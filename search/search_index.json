{"config":{"lang":["en"],"separator":"[\\s\\u200b\\-]","pipeline":["stemmer"]},"docs":[{"location":"","title":"\u65bd\u5de5\u200b\u5efa\u8bbe\u200b\u4e2d\u200b...","text":""},{"location":"Linux/shell%E8%84%9A%E6%9C%AC/","title":"Shell\u200b\u811a\u672c","text":""},{"location":"Linux/shell%E8%84%9A%E6%9C%AC/#_1","title":"\u6279\u91cf\u200b\u6d4b\u8bd5\u200b\u7aef\u53e3\u200b\u7684\u200b\u8fde\u901a\u6027","text":"<pre><code> bash -c 'for i in {109..228}; do echo -n \"$i:\";grep -q \"Connect\" &amp;&gt; /dev/null &lt;&lt;&lt; `echo | timeout 3s telnet 192.168.168.$i 7000`; echo $?;done'\n</code></pre>"},{"location":"Linux/shell%E8%84%9A%E6%9C%AC/#desal","title":"\u57fa\u4e8e\u200bdesal\u200b\u5199\u200b\u7684\u200b\u811a\u672c","text":"<pre><code>#!/usr/bin/env bash\nSCRIPT_LOG=\"./logs/action_$(date \"+%-Y-%m-%d\").log\" # _$(date \"+%-Y-%m-%d\").log\nDECODE_SERVER_CONFIG=_servers.json\nDECODE_SERVER_QUANTITY=$(./dasel -f $DECODE_SERVER_CONFIG '[#]')\nDELETED_SERVER_CONFIG=deleted-servers.json\n\n\nfunction logger() {\n        level=$1; msg=$2; _output_file=${3-true}\n        if $_output_file; then\n  [ -d $(dirname $SCRIPT_LOG) ] || mkdir -p $(dirname $SCRIPT_LOG)\n  [ -f $SCRIPT_LOG ] || touch $SCRIPT_LOG\n                if [[ $level == info ]];then\n                        echo \"$(date \"+%F %T\") [$level]: $msg\" | tee -a \"$SCRIPT_LOG\"\n                elif [[ $level == err ]];then\n                        echo -e \"\\e[1;31m$(date \"+%F %T\") [$level]: $msg\\e[0m\" | tee -a \"$SCRIPT_LOG\"\n                fi\n         else\n                if [[ $level == info ]];then\n                        echo \"$(date \"+%F %T\") [$level]: $msg\"\n                 elif [[ $level == err ]];then\n                         echo -e \"\\e[1;31m$(date \"+%F %T\") [$level]: $msg\\e[0m\"\n                 fi\n        fi\n}\n\n[ ! -f $DELETED_SERVER_CONFIG ] &amp;&amp; touch $DELETED_SERVER_CONFIG\n\nlogger info \"\u200b\u5f00\u59cb\u200b\u5254\u9664\u200b\u5931\u6548\u200b\u7684\u200b\u670d\u52a1\u5668\u200b...\"\nDELETE_SERVER_LIST=()\nfor ((index=0; index&lt;$DECODE_SERVER_QUANTITY; index++));\ndo \n IP=$(./dasel --plain -f $DECODE_SERVER_CONFIG \"[$index].host\")\n PORT=$(./dasel --plain -f $DECODE_SERVER_CONFIG \"[$index].port\")\n if ./wait-for-it.sh $IP:$PORT -t 3 &amp;&gt;/dev/null\n then\n  #logger info  \"$IP:$PORT is open\" false\n  :\n else\n  logger info \"$IP:$PORT is closed\" false\n  DELETE_SERVER_LIST+=(\"$IP:$PORT\")\n fi\ndone\nfor server in ${DELETE_SERVER_LIST[@]}; do\n DELETE_SERVER_IP=$(awk -F: '{print $1}' &lt;&lt;&lt; $server)\n DELETE_SERVER_PORT=$(awk -F: '{print $2}' &lt;&lt;&lt; $server)\n # \u200b\u5982\u679c\u200b\u5c4f\u853d\u200bIP\u200b\u5df2\u7ecf\u200b\u5b58\u5728\u200b\u5c4f\u853d\u200b\u6587\u4ef6\u200b\u4e2d\u200b, \u200b\u8fd8\u4f1a\u200b\u5224\u65ad\u200b\u5728\u200b\u4e0d\u200b\u5728\u200b\u670d\u52a1\u5668\u200b\u5217\u8868\u200b\u4e2d\u200b\uff0c\u200b\u5982\u679c\u200b\u5728\u200b\u8fd8\u200b\u4f1a\u200b\u7ee7\u7eed\u200b\u5220\u6389\u200b\uff0c\u200b\u4e0d\u200b\u5728\u200b\u5c31\u200b\u4f1a\u200b\u8df3\u200b\u8fc7\u200b\n        if [[ $(./dasel -n -f $DELETED_SERVER_CONFIG -m \".(?:host=$DELETE_SERVER_IP)\") != null ]]; then\n      if [[ $(./dasel -n -f $DECODE_SERVER_CONFIG -m \".(?:host=$DELETE_SERVER_IP)\") != null ]]; then\n       logger info \"*\u200b\u6ce8\u610f\u200b* $server \u200b\u8be5\u200b\u670d\u52a1\u5668\u200b\u8fd8\u200b\u5b58\u5728\u200b\u4e8e\u200b $DECODE_SERVER_CONFIG \uff0c\u200b\u8fdb\u884c\u200b\u5220\u9664\u200b\u64cd\u4f5c\u200b\"\n       ./dasel delete -f $DECODE_SERVER_CONFIG -m \"(?:host=$DELETE_SERVER_IP)\"\n      fi\n                        logger info \"$server \u200b\u8be5\u200b\u670d\u52a1\u5668\u200b\u5df2\u7ecf\u200b\u5b58\u5728\u200b\u4e8e\u200b\u5c4f\u853d\u200b\u5217\u8868\u200b\u4e2d\u200b, \u200b\u7565\u8fc7\u200b\"\n                        continue\n        fi\n        logger info \"\u200b\u5f00\u59cb\u200b\u4ece\u200b $DECODE_SERVER_CONFIG \u200b\u5254\u9664\u200b\u670d\u52a1\u5668\u200b $server\"\n        SERVER_JSON=$(./dasel -f $DECODE_SERVER_CONFIG -m \"(?:host=$DELETE_SERVER_IP)\")\n        ./dasel put document -f $DELETED_SERVER_CONFIG '[]' \"$SERVER_JSON\"\n        ./dasel delete -f $DECODE_SERVER_CONFIG -m \"(?:host=$DELETE_SERVER_IP)\"\n        logger info \"\u200b\u670d\u52a1\u5668\u200b $server \u200b\u5254\u9664\u200b\u6210\u529f\u200b\"\ndone\n\nlogger info \"\u200b\u5f00\u59cb\u200b\u6dfb\u52a0\u200b\u5df2\u7ecf\u200b\u6062\u590d\u200b\u7684\u200b\u670d\u52a1\u5668\u200b\u5230\u200b\u7ba1\u7406\u200b\u670d\u52a1\u5668\u200b\u670d\u52a1\u5668\u200b\u5217\u8868\u200b\u5f53\u4e2d\u200b...\"\nDELETED_SERVER_QUANTITY=$(./dasel -f $DELETED_SERVER_CONFIG '[#]')\nRECOVER_SERVER_LIST=()\nfor ((index=0; index&lt;$DELETED_SERVER_QUANTITY; index++));\ndo \n IP=$(./dasel --plain -f $DELETED_SERVER_CONFIG \"[$index].host\")\n PORT=$(./dasel --plain -f $DELETED_SERVER_CONFIG \"[$index].port\")\n for server in ${DELETE_SERVER_LIST[@]}; do\n  if [[ $server == ${IP}:${PORT} ]]; then\n   logger info \"${IP}:${PORT} \u200b\u8be5\u200b\u670d\u52a1\u5668\u200b\u521a\u521a\u200b\u5df2\u7ecf\u200b\u5c4f\u853d\u200b\uff0c\u200b\u4e0d\u200b\u6062\u590d\u200b\"\n   continue 2\n  fi\n done\n\n if ./wait-for-it.sh $IP:$PORT -t 3 &amp;&gt;/dev/null\n then\n  logger info  \"$IP:$PORT is open\" false\n  RECOVER_SERVER_LIST+=(\"$IP:$PORT\")\n else\n  #logger info \"$IP:$PORT is closed\" false\n  #RECOVER_SERVER_LIST+=(\"$IP:$PORT\")\n  :\n fi\ndone\nfor server in ${RECOVER_SERVER_LIST[@]}; do\n RECOVER_SERVER_IP=$(awk -F: '{print $1}' &lt;&lt;&lt; $server)\n RECOVER_SERVER_PORT=$(awk -F: '{print $2}' &lt;&lt;&lt; $server)\n # \u200b\u6062\u590d\u200b\u7684\u200b IP\u200b\u5df2\u7ecf\u200b\u5b58\u5728\u200b\u4e8e\u200b\u670d\u52a1\u5668\u200b\u5217\u8868\u200b\u4e2d\u200b\uff0c\u200b\u8fd8\u4f1a\u200b\u7ee7\u7eed\u200b\u5224\u65ad\u200b\u662f\u5426\u200b\u5728\u200b\u5c4f\u853d\u200b\u5217\u8868\u200b\u4e2d\u200b\uff0c\u200b\u5982\u679c\u200b\u5728\u200b\u8fd8\u200b\u4f1a\u200b\u5220\u6389\u200b\u5c4f\u853d\u200b\u5217\u8868\u200b\u7684\u200b\uff0c\u200b\u4e0d\u200b\u5728\u200b\u5c31\u200b\u4f1a\u200b\u8df3\u200b\u8fc7\u200b\n        if [[ $(./dasel -n -f $DECODE_SERVER_CONFIG -m \".(?:host=RECOVER_SERVER_IP)\") != null ]]; then\n      if [[ $(./dasel -f $DELETED_SERVER_CONFIG -m \"(?:host=$RECOVER_SERVER_IP)\") != null ]]; then\n       logger info \"*\u200b\u6ce8\u610f\u200b* $server \u200b\u8be5\u200b\u670d\u52a1\u5668\u200b\u8fd8\u200b\u5b58\u5728\u200b\u4e8e\u200b $DELETED_SERVER_CONFIG \uff0c\u200b\u8fdb\u884c\u200b\u5220\u9664\u200b\u64cd\u4f5c\u200b\"\n       ./dasel delete -f $DELETED_SERVER_CONFIG -m \"(?:host=$RECOVER_SERVER_IP)\"\n      fi\n                        logger info \"$server \u200b\u8be5\u200b\u670d\u52a1\u5668\u200b\u5df2\u7ecf\u200b\u5b58\u5728\u200b\u4e8e\u200b\u670d\u52a1\u5668\u200b\u5217\u8868\u200b\u4e2d\u200b, \u200b\u7565\u8fc7\u200b\"\n                        continue\n        fi\n        logger info \"\u200b\u5f00\u59cb\u200b\u4ece\u200b $DELETED_SERVER_CONFIG \u200b\u6062\u590d\u200b\u670d\u52a1\u5668\u200b $server\"\n        SERVER_JSON=$(./dasel -f $DELETED_SERVER_CONFIG -m \"(?:host=$RECOVER_SERVER_IP)\")\n        ./dasel put document -f $DECODE_SERVER_CONFIG '[]' \"$SERVER_JSON\"\n        ./dasel delete -f $DELETED_SERVER_CONFIG -m \"(?:host=$RECOVER_SERVER_IP)\"\n        logger info \"\u200b\u670d\u52a1\u5668\u200b $server \u200b\u6062\u590d\u200b\u6210\u529f\u200b\"\ndone\n</code></pre>"},{"location":"Linux/shell%E8%84%9A%E6%9C%AC/#while","title":"while\u200b\u4e00\u6b21\u200b\u8bfb\u53d6\u200b\u4e24\u884c","text":"<pre><code>paste &lt;(sed -n '1~2p' txt) &lt;(sed -n '2~2p' txt) | while read ip ip_2\ndo\n    echo \"${ip}----${ip_2}\"\ndone\n\n10.128.12.18\n10.128.12.20\n10.128.12.27\n10.128.12.29\n10.128.12.49\n10.128.12.51\n10.128.12.57\n10.128.12.59\n10.128.12.65\n10.128.12.67\n10.128.12.69\n10.128.12.71\n10.128.12.73\n10.128.12.75\n</code></pre>"},{"location":"Linux/%E4%BD%BF%E7%94%A8systemd%E5%90%AF%E5%8A%A8jar%E7%A8%8B%E5%BA%8F/","title":"\u4f7f\u7528\u200bsystemd\u200b\u542f\u52a8\u200bjar\u200b\u7a0b\u5e8f","text":""},{"location":"Linux/%E4%BD%BF%E7%94%A8systemd%E5%90%AF%E5%8A%A8jar%E7%A8%8B%E5%BA%8F/#systemd","title":"systemd \u200b\u5355\u5143\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u7684\u200b\u7f16\u5199\u200b\u4e0e\u200b\u6d4b\u8bd5","text":"<p>\u200b       \u200b\u907f\u514d\u200b\u7ba1\u7406\u7a0b\u5e8f\u200b\u548c\u200b\u65e5\u5fd7\u200b\u7a0b\u5e8f\u200b\u6216\u8005\u200b\u5176\u4ed6\u200b\u7a0b\u5e8f\u200b\u56e0\u4e3a\u200bOOM\u200b\u7684\u200b\u60c5\u51b5\u200b\u88ab\u200b\u7cfb\u7edf\u200bKILL\uff0c\u200b\u6216\u8005\u200b\u5f02\u5e38\u200b\u9000\u51fa\u200b\uff0c\u200b\u5bf9\u4e8e\u200b\u8fd9\u4e2a\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c\u200b\u5e94\u627e\u200b\u76f8\u5e94\u200b\u7684\u200b\u65b9\u6cd5\u200b\u6765\u200b\u907f\u514d\u200b\u6b64\u7c7b\u200b\u95ee\u9898\u200b\u3002\u200b\u6211\u7ecf\u200b\u6d4b\u8bd5\u200b\u53d1\u73b0\u200b\u901a\u8fc7\u200b\u7f16\u5199\u200bsystemd\u200b\u5355\u5143\u200b\u6587\u4ef6\u200b\u53ef\u4ee5\u200b\u907f\u514d\u200b\u6b64\u7c7b\u200b\u6545\u969c\u200b\u7684\u200b\u53d1\u751f\u200b\uff0c\u200b\u5982\u679c\u200b\u7a0b\u5e8f\u200b\u5f02\u5e38\u200b\u9000\u51fa\u200b\uff0c\u200b\u9ed8\u8ba4\u200b\u7b49\u5f85\u200b100ms\uff0c\u200b\u542f\u52a8\u200b\u5e94\u7528\u200b\u3002 [[systemd\u200b\u76f8\u5173\u200b\u547d\u4ee4\u200b]] 1. \u200b\u4e0a\u4f20\u200b\u7a0b\u5e8f\u200bdemo\u200b\u7a0b\u5e8f\u200b\u6587\u4ef6\u200b</p> <ol> <li>\u200b\u7f16\u5199\u200b\u542f\u52a8\u200b\u811a\u672c\u200b</li> </ol> <pre><code>#!/usr/bin/env bash\ncase $1 in\n        start)\n                $JAVA_HOME/bin/java $JAVA_OPTS -jar $JAR_NAMEOO &gt;&gt; $JAR_HOME/service.log 2&gt;&amp;1 &amp;\n                ;;\nesac\n</code></pre> <ol> <li>\u200b\u7f16\u5199\u200bunit\u200b\u914d\u7f6e\u6587\u4ef6\u200b</li> </ol> <p>\u200b        \u200b\u5728\u200b\u8def\u5f84\u200b<code>/usr/lib/systemd/system/</code>\u200b\u8def\u5f84\u200b\u4e0b\u200b\u7f16\u5199\u200bjar.service\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u3002</p> <p>\u200b        Systemd \u200b\u9ed8\u8ba4\u200b\u4ece\u200b\u76ee\u5f55\u200b<code>/etc/systemd/system/</code>\u200b\u8bfb\u53d6\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u3002\u200b\u4f46\u662f\u200b\uff0c\u200b\u91cc\u9762\u200b\u5b58\u653e\u200b\u7684\u200b\u5927\u90e8\u5206\u200b\u6587\u4ef6\u200b\u90fd\u200b\u662f\u200b\u7b26\u53f7\u200b\u94fe\u63a5\u200b\uff0c\u200b\u6307\u5411\u200b\u76ee\u5f55\u200b<code>/usr/lib/systemd/system/</code>\uff0c\u200b\u771f\u6b63\u200b\u7684\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u5b58\u653e\u200b\u5728\u200b\u90a3\u4e2a\u200b\u76ee\u5f55\u200b\u3002</p> <pre><code>[Unit]\n# \u200b\u5bf9\u200b\u5f53\u524d\u200b\u670d\u52a1\u200b\u7684\u200b\u7b80\u5355\u200b\u63cf\u8ff0\u200b\uff0c\u200b\u6211\u200b\u8fd9\u91cc\u200b\u63cf\u8ff0\u200b\u4e0d\u662f\u200b\u5f88\u200b\u6070\u5f53\u200b\nDescription= test script jar.sh\n# \u200b\u5982\u679c\u200bnetwork.target\u200b\u9700\u8981\u200b\u542f\u52a8\u200b\uff0c\u200b\u90a3\u4e48\u200bjar.service\u200b\u5728\u200b\u5b83\u200b\u4e4b\u540e\u200b\u542f\u52a8\u200b\nAfter=network.target\n\n[Service]\n# ExecStart\u200b\u5b57\u6bb5\u200b\u5c06\u200b\u4ee5\u200bfork()\u200b\u65b9\u5f0f\u200b\u542f\u52a8\u200b\uff0c\u200b\u6b64\u65f6\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u5c06\u4f1a\u200b\u9000\u51fa\u200b\uff0c\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u5c06\u200b\u6210\u4e3a\u200b\u4e3b\u200b\u8fdb\u7a0b\u200b\nType=forking\n# \u200b\u5b9a\u4e49\u200b\u53d8\u91cf\u200b\nEnvironment=\"JAVA_HOME=/usr/java/jdk1.8.0_212/\"\n# \u200b\u5b9a\u4e49\u200b\u53d8\u91cf\u200b\nEnvironment=\"JAR_DIR=/root/app/demo-1.0.6\"\n# \u200b\u5b9a\u4e49\u200b\u53d8\u91cf\u200b\nEnvironment=\"JAR_NAMEOO=demo-1.0.6.jar\"\n# \u200b\u5b9a\u4e49\u200b\u542f\u52a8\u200b\u8fdb\u7a0b\u200b\u6267\u884c\u200b\u7684\u200b\u547d\u4ee4\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u5728\u200b\u811a\u672c\u200b\u4e2d\u200b\u5f15\u7528\u200b\u53d8\u91cf\u200b\nExecStart=/root/jar.sh start\n# \u200b\u5f53\u200b\u8fdb\u7a0b\u200b\u9000\u51fa\u200b\u540e\u200b\uff0c\u200b\u4ee5\u200b\u4ec0\u4e48\u200b\u65b9\u5f0f\u200b\u91cd\u542f\u200b\uff0calways\uff1a\u200b\u4e0d\u7ba1\u200b\u662f\u200b\u4ec0\u4e48\u200b\u9000\u51fa\u200b\u539f\u56e0\u200b\uff0c\u200b\u603b\u662f\u200b\u91cd\u542f\u200b\nRestart=always\n# \u200b\u8bbe\u7f6e\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u5de5\u4f5c\u200b\u76ee\u5f55\u200b\nWorkingDirectory=/root/app/demo-1.0.6\n\n[Install]\n# \u200b\u8868\u793a\u200b\u8be5\u200b\u670d\u52a1\u200b\u6240\u5728\u200b\u7684\u200b Target\nWantedBy=multi-user.target\n</code></pre> <p>\u200b    \u200b\u8bbe\u7f6e\u200bjar.service\u200b\u8f6f\u200b\u8fde\u63a5\u200b\u5230\u200b<code>/etc/systemd/system/</code></p> <pre><code>ln -s /usr/lib/systemd/system/jar.service /etc/systemd/system/\n</code></pre> <p>\u200b    \u200b\u7f16\u5199\u200b\u6216\u8005\u200b\u4fee\u6539\u200b\u5355\u5143\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u4e4b\u540e\u200b\uff0c\u200b\u5e94\u8be5\u200b\u91cd\u8f7d\u200b\u4e00\u4e0b\u200b\uff0c\u200b\u624d\u200b\u4f1a\u200b\u751f\u6548\u200b\u3002</p> <pre><code>systemctl daemon-reload\nsystemctl start jar.service\n</code></pre> <ol> <li> <p>\u200b\u603b\u7ed3\u200b</p> <ol> <li> <p>\u200b\u8bd5\u7740\u200bkill\u200b\u6389\u200bjava\u200b\u8fdb\u7a0b\u200b\uff0c\u200b\u7ed3\u679c\u200b\u7a0b\u5e8f\u200b\u53c8\u200b\u88ab\u200b\u91cd\u65b0\u200b\u62c9\u200b\u4e86\u200b\u8d77\u6765\u200b\uff0c\u200b\u53ea\u6709\u200b\u6267\u884c\u200b</p> <p><code>systemctl stop jar.service</code> \u200b\u7a0b\u5e8f\u200b\u624d\u200b\u4f1a\u200b\u505c\u6b62\u200b\u3002</p> </li> <li> <p>\u200b\u518d\u200b\u4efb\u4f55\u200b\u5730\u65b9\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u91cd\u65b0\u542f\u52a8\u200bjava\u200b\u7a0b\u5e8f\u200b\u3002</p> </li> <li> <p>\u200b\u53ef\u4ee5\u200b\u4e0d\u7528\u200b\u8c03\u7528\u200b\uff0c\u200b\u76f4\u63a5\u200b\u628a\u200b\u547d\u4ee4\u200b\u5199\u200b\u5728\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u4e2d\u200b\u3002</p> </li> <li> <p>\u200b\u53ef\u4ee5\u200b\u7ed9\u200b\u5176\u4ed6\u200b\u670d\u52a1\u200b\u5355\u5143\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u4e2d\u200b\u52a0\u4e0a\u200bRestart\u200b\u53c2\u6570\u200b\u3002</p> </li> <li> <p>\u200b\u91cd\u65b0\u200b\u5b9a\u4e49\u200b\u73af\u5883\u53d8\u91cf\u200b\u8ba9\u200b\u5355\u5143\u200b\u670d\u52a1\u200b\u5177\u6709\u200b\u53ef\u79fb\u690d\u6027\u200b\u3002 <pre><code>[Unit]\nDescription=start service\nAfter=network.target\n\n[Service]\nType=simple\nExecStart=java -Dlog.days=7 -Dlog.dir=./logs -jar idreader-service-ct-cloud-1.0.7.jar\nRestart=on-failure\nRestartSec=3s\nWorkingDirectory=/data/idreader-service-ct-cloud/idreader-service-ct-cloud\n\n[Install]\nWantedBy=multi-user.target\n[sunrise@gzsmz012089 user]$ ls\nidreader.servic\n</code></pre></p> </li> </ol> </li> </ol> <p>\u200b\u53c2\u8003\u200b\uff1a</p> <p>\u200b       http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html</p> <p>\u200b       http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-part-two.html</p> <p>\u200b       http://www.jinbuguo.com/systemd/systemd.index.html</p> <p>\u200b       https://qastack.cn/server/413397/how-to-set-environment-variable-in-systemd-service</p>"},{"location":"Linux/%E5%86%85%E6%A0%B8%E5%8F%82%E6%95%B0%E8%B0%83%E4%BC%98/","title":"\u5185\u6838\u200b\u53c2\u6570\u200b\u8c03\u4f18","text":""},{"location":"Linux/%E5%86%85%E6%A0%B8%E5%8F%82%E6%95%B0%E8%B0%83%E4%BC%98/#_1","title":"\u5185\u6838\u200b\u53c2\u6570\u200b\u8c03\u4f18","text":"<p>```shell net.ipv4.tcp_timestamps = 1</p>"},{"location":"Linux/%E5%86%85%E6%A0%B8%E5%8F%82%E6%95%B0%E8%B0%83%E4%BC%98/#-nginxtime_wait","title":"\u5ba2\u6237\u7aef\u200b -&gt; nginx\u200b\u8fde\u63a5\u200b\u590d\u7528\u200b\uff0c\u200b\u4e3b\u52a8\u200b\u5173\u95ed\u200b\u4e86\u200bTIME_WAIT","text":"<p>net.ipv4.tcp_tw_reuse = 1</p>"},{"location":"Linux/%E5%86%85%E6%A0%B8%E5%8F%82%E6%95%B0%E8%B0%83%E4%BC%98/#nginx-","title":"nginx -&gt; \u200b\u7ba1\u7406\u7a0b\u5e8f\u200b\u8fde\u63a5\u200b\u590d\u7528","text":"<p>net.ipv4.tcp_tw_recycle=1</p>"},{"location":"Linux/%E5%86%85%E6%A0%B8%E5%8F%82%E6%95%B0%E8%B0%83%E4%BC%98/#fin-wait-2","title":"\u51cf\u5c11\u200b\u5904\u4e8e\u200bFIN-WAIT-2\u200b\u8fde\u63a5\u200b\u72b6\u6001\u200b\u7684\u200b\u65f6\u95f4\u200b\uff0c\u200b\u4f7f\u200b\u7cfb\u7edf\u200b\u53ef\u4ee5\u200b\u5904\u7406\u200b\u66f4\u200b\u591a\u200b\u7684\u200b\u8fde\u63a5","text":"<p>net.ipv4.tcp_fin_timeout = 30</p>"},{"location":"Linux/%E5%86%85%E6%A0%B8%E5%8F%82%E6%95%B0%E8%B0%83%E4%BC%98/#tcp-syn-cookiesyncflood","title":"\u6253\u5f00\u200bTCP SYN cookie\u200b\u9009\u9879\u200b\uff0c\u200b\u6709\u52a9\u4e8e\u200b\u4fdd\u62a4\u200b\u670d\u52a1\u5668\u200b\u514d\u53d7\u200bSyncFlood\u200b\u653b\u51fb\u200b\u3002","text":"<p>net.ipv4.tcp_syncookies=1</p>"},{"location":"Linux/%E5%86%85%E6%A0%B8%E5%8F%82%E6%95%B0%E8%B0%83%E4%BC%98/#tcp-keepalived180330","title":"\u51cf\u5c11\u200bTCP Keepalived\u200b\u8fde\u63a5\u200b\u63a2\u6d4b\u200b\uff0c\u200b\u8fde\u63a5\u200b\u95f2\u7f6e\u200b180\u200b\u79d2\u200b\u540e\u200b\uff0c\u200b\u53d1\u6b21\u200b3\u200b\u6b21\u200b\u63a2\u6d4b\u200b\uff0c\u200b\u6bcf\u6b21\u200b30\u200b\u79d2","text":"<p>net.ipv4.tcp_keepalive_time = 180 net.ipv4.tcp_keepalive_probes = 3 net.ipv4.tcp_keepalive_intvl = 30</p> <p>net.ipv4.tcp_timestamps = 1 net.ipv4.tcp_tw_reuse = 1 net.ipv4.tcp_tw_recycle=1 net.ipv4.tcp_fin_timeout = 30 net.ipv4.tcp_syncookies=1 net.ipv4.tcp_keepalive_time = 180 net.ipv4.tcp_keepalive_probes = 3 net.ipv4.tcp_keepalive_intvl = 30</p>"},{"location":"Linux/%E5%90%AF%E7%94%A8sudo%E6%9D%83%E9%99%90/","title":"\u542f\u7528\u200bsudo\u200b\u6743\u9650","text":""},{"location":"Linux/%E5%90%AF%E7%94%A8sudo%E6%9D%83%E9%99%90/#sudo","title":"\u542f\u7528\u200bsudo\u200b\u6743\u9650","text":"<p>\u200b\u4ee5\u4e0b\u200b\u662f\u200b\u5982\u4f55\u200b\u5c06\u200b\u7528\u6237\u200b\u6dfb\u52a0\u200b\u5230\u200b\u8d85\u7ea7\u200b\u7528\u6237\u7ec4\u200b\u3002</p> <p>\u200b\u6253\u5f00\u200b\u7ec8\u7aef\u200b\u5e76\u200b\u4f7f\u7528\u200b root \u200b\u5bc6\u7801\u200b\u8fdb\u5165\u200b root \u200b\u8d26\u6237\u200b\u3002</p> <pre><code>su\n</code></pre> <p>\u200b\u7136\u540e\u200b\u8fd0\u884c\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\uff0c\u200b\u5c06\u200b\u4f60\u200b\u7684\u200b\u7528\u6237\u200b\u8d26\u6237\u200b\u6dfb\u52a0\u200b\u5230\u200b\u00a0<code>sudo</code>\u00a0\u200b\u7ec4\u200b\u3002\u200b\u8bf7\u200b\u5c06\u200b\u4e0b\u9762\u200b\u7684\u200b\u7528\u6237\u540d\u200b\u66f4\u200b\u6539\u4e3a\u200b\u4f60\u200b\u7684\u200b\u8d26\u6237\u200b\u3002</p> <p><pre><code>/sbin/addgroup \u200b\u7528\u6237\u540d\u200b sudo\n</code></pre> \u200b\u73b0\u5728\u200b\uff0c\u200b\u4f60\u200b\u53ef\u4ee5\u200b\u6ce8\u9500\u200b\u5e76\u200b\u518d\u6b21\u200b\u767b\u5f55\u200b\u8be5\u200b\u8d26\u6237\u200b\u3002</p>"},{"location":"Linux/%E8%B0%83%E6%95%B4Linux%E6%89%93%E5%BC%80%E6%96%87%E4%BB%B6%E6%95%B0/","title":"\u8c03\u6574\u200bLinux\u200b\u6253\u5f00\u200b\u6587\u4ef6\u200b\u6570","text":""},{"location":"Linux/%E8%B0%83%E6%95%B4Linux%E6%89%93%E5%BC%80%E6%96%87%E4%BB%B6%E6%95%B0/#linux","title":"\u8c03\u6574\u200bLinux\u200b\u7cfb\u7edf\u200b\u8fde\u63a5\u6570","text":"<p>\u200b\u67e5\u770b\u200b\u7528\u6237\u200b\u6253\u5f00\u200b\u6700\u5927\u200b\u6587\u4ef6\u200b\u6570\u200b</p> <pre><code>ulimit -n\n</code></pre> <p>\u200b\u67e5\u770b\u200b\u7cfb\u7edf\u200b\u7ea7\u200b\u7684\u200b\u6700\u5927\u200b\u9650\u5236\u200b</p> <pre><code>cat /proc/sys/fs/file-max\n</code></pre> <p>linux \u200b\u4e2d\u200b, \u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u00a0<code>cat /proc/pid/limits</code>\u00a0\u200b\u7684\u200b\u65b9\u5f0f\u200b\u67e5\u770b\u200b\u4e00\u4e2a\u200b\u8fdb\u7a0b\u200b\u7684\u200b ulimit \u200b\u9650\u5236\u200b\u60c5\u51b5\u200b, \u200b\u5982\u4e0b\u200b\u6240\u793a\u200b:</p> <pre><code># cat /proc/31519/limits\nLimit                     Soft Limit           Hard Limit           Units\nMax cpu time              unlimited            unlimited            seconds\nMax file size             unlimited            unlimited            bytes\nMax data size             unlimited            unlimited            bytes\nMax stack size            8388608              unlimited            bytes\nMax core file size        0                    unlimited            bytes\nMax resident set          unlimited            unlimited            bytes\nMax processes             65535                65535                processes\nMax open files            65535                65535                files\nMax locked memory         65536                65536                bytes\nMax address space         unlimited            unlimited            bytes\nMax file locks            unlimited            unlimited            locks\nMax pending signals       14052                14052                signals\nMax msgqueue size         819200               819200               bytes\nMax nice priority         0                    0\nMax realtime priority     0                    0\nMax realtime timeout      unlimited            unlimited            us\n</code></pre>"},{"location":"Linux/%E8%B0%83%E6%95%B4Linux%E6%89%93%E5%BC%80%E6%96%87%E4%BB%B6%E6%95%B0/#_1","title":"\u4e34\u65f6\u200b\u8c03\u6574","text":""},{"location":"Linux/%E8%B0%83%E6%95%B4Linux%E6%89%93%E5%BC%80%E6%96%87%E4%BB%B6%E6%95%B0/#1-prlimitcentos7","title":"\u65b9\u5f0f\u200b1. prlimit(Centos7\u200b\u4ee5\u4e0a\u200b)","text":"<p>Centos/RedHat 7 \u200b\u53ca\u200b\u4ee5\u4e0a\u200b\u7684\u200b\u7cfb\u7edf\u200b\u4f7f\u7528\u200b\u00a0<code>prlimit</code>\u00a0\u200b\u5de5\u5177\u200b(&gt;= util-linux-2.21 \u200b\u63d0\u4f9b\u200b)\u200b\u4fee\u6539\u200b:</p> <pre><code># \u200b\u4e0d\u200b\u9650\u5236\u200b\u662f\u200b unlimited:unlimited\nprlimit --pid xxxx --nofile=65535:65535\n</code></pre>"},{"location":"Linux/%E8%B0%83%E6%95%B4Linux%E6%89%93%E5%BC%80%E6%96%87%E4%BB%B6%E6%95%B0/#2-centos6","title":"\u65b9\u5f0f\u200b2. (Centos6\u200b\u4ee5\u4e0b\u200b)","text":"<p>\u200b\u65e9\u671f\u200b\u7cfb\u7edf\u200b(\u200b\u6bd4\u5982\u200b Centos/RedHat 6 - 2.6.32+), \u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u4ee5\u4e0b\u200b\u65b9\u5f0f\u200b\u76f4\u63a5\u200b\u4fee\u6539\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u9650\u5236\u200b:</p> <pre><code>echo -n \u201cMax processes=SOFT_LIMIT:HARD_LIMIT\u201d &gt; /proc/pid/limits\necho -n \u201cMax open files=SOFT_LIMIT:HARD_LIMIT\u201d &gt; /proc/pid/limits\n</code></pre>"},{"location":"Linux/%E8%B0%83%E6%95%B4Linux%E6%89%93%E5%BC%80%E6%96%87%E4%BB%B6%E6%95%B0/#3-centos6","title":"\u65b9\u5f0f\u200b3. Centos6\u200b\u4ee5\u4e0a","text":"<p>\u200b\u8bb0\u5f55\u200b\u4e0b\u200b\u53e6\u5916\u200b\u4e00\u79cd\u200b\u65b9\u5f0f\u200b\u8c03\u6574\u200b\u8fde\u63a5\u6570\u200b\uff0c\u200b\u5728\u200b\u542f\u52a8\u200b\u7684\u200b\u7684\u200b\u65f6\u5019\u200b\u8fdb\u884c\u200b\u8c03\u6574\u200b\uff0c\u200b\u540c\u65f6\u200b\u53ef\u4ee5\u200b\u6307\u5b9a\u200b\u7528\u6237\u200b\u8fd0\u884c\u200b\u6b21\u200b\u7a0b\u5e8f\u200b\uff1a</p> <pre><code>ulimit -n 65535\nsu -s /bin/sh -c 'java -Dlog.dir=logs -Dlog.days=7 -jar logger-1.0.5.jar &gt;/dev/null 2&gt;&amp;1 &amp;' sunrise\n</code></pre>"},{"location":"Linux/%E8%B0%83%E6%95%B4Linux%E6%89%93%E5%BC%80%E6%96%87%E4%BB%B6%E6%95%B0/#todo","title":"\u6c38\u4e45\u200b\u4fee\u6539\u200b(TODO)","text":"<p>(137\u200b\u6761\u200b\u6d88\u606f\u200b) RedHat\u3001centos 7.0\u200b\u4ee5\u4e0a\u200b\u8bbe\u7f6e\u200b\u7cfb\u7edf\u200b\u6253\u5f00\u200b\u6587\u4ef6\u200b\u6570\u7b49\u200b\u8bbe\u7f6e\u200b\u95ee\u9898\u200b_hzgj77\u200b\u7684\u200b\u535a\u5ba2\u200b-CSDN\u200b\u535a\u5ba2\u200b</p>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/systemd/","title":"Systemd","text":"<pre><code># \u200b\u542f\u52a8\u200b\u3001\u200b\u505c\u6b62\u200b\u670d\u52a1\u200b\nsystemctl start service_name1 service_name2\nsystemctl stop service_name\n# \u200b\u91cd\u8f7d\u200b\u670d\u52a1\u200b\uff1a\u200b\u670d\u52a1\u200b\u672a\u200b\u8fd0\u884c\u200b\u4e0d\u200b\u505a\u200b\u4efb\u4f55\u200b\u4e8b\u200b\nsystemctl reload Service_Name\n# \u200b\u91cd\u542f\u200b\u670d\u52a1\u200b\uff1a\u200b\u670d\u52a1\u200b\u8fd0\u884c\u200b\u5219\u200b\u91cd\u542f\u200b\uff0c\u200b\u672a\u200b\u542f\u52a8\u200b\u5219\u200b\u542f\u52a8\u200b\nsystemctl restart Service_Name\n# \u200b\u670d\u52a1\u200b\u5df2\u7ecf\u200b\u8fd0\u884c\u200b\u91cd\u542f\u200b\uff0c\u200b\u672a\u200b\u8fd0\u884c\u200b\u4e0d\u200b\u542f\u52a8\u200b\nsystemctl try-restart Service_Name\n# \u200b\u670d\u52a1\u200b\u5df2\u200b\u8fd0\u884c\u200b\u65f6\u200b\uff0c\u200b\u652f\u6301\u200breload\uff0c\u200b\u5219\u200breload\uff0c\u200b\u5982\u679c\u200b\u4e0d\u200b\u652f\u6301\u200breload\u200b\u5219\u200brestart\n# \u200b\u670d\u52a1\u200b\u672a\u200b\u8fd0\u884c\u200b\u65f6\u200b\uff0c\u200b\u542f\u52a8\u200b\u4e4b\u200b\nsystemctl reload-or-restart Service_Name\n# \u200b\u670d\u52a1\u200b\u5df2\u7ecf\u200b\u8fd0\u884c\u200b\u65f6\u200b\uff0c\u200b\u5982\u679c\u200b\u652f\u6301\u200breload\uff0c\u200b\u5219\u200breload\uff0c\u200b\u5982\u679c\u200b\u4e0d\u200b\u652f\u6301\u200breload\u200b\u5219\u200brestart\n# \u200b\u670d\u52a1\u200b\u672a\u200b\u8fd0\u884c\u200b\u65f6\u200b\uff0c\u200b\u4e0d\u200b\u505a\u200b\u4efb\u4f55\u200b\u4e8b\u200b\nsystemctl relaod-or-try-restart Service_Name\n# \u200b\u67e5\u770b\u200b\u670d\u52a1\u200b\u72b6\u6001\u200b\nsystemctl status Service_Name\n# \u200b\u68c0\u67e5\u200b\u670d\u52a1\u200b\u65f6\u5426\u200bactive\uff1a \u200b\u670d\u52a1\u200b\u662f\u5426\u200b\u5df2\u7ecf\u200b\u542f\u52a8\u200b\n# \u200b\u81f3\u5c11\u200b\u4e00\u4e2a\u200bactive\u200b\u65f6\u200b\uff0c\u200b\u8fd4\u56de\u200b0\uff0c\u200b\u5426\u5219\u200b\u8fd4\u56de\u200b\u975e\u200b0\u200b\u9000\u51fa\u200b\u72b6\u6001\u200b\u7801\u200b\nsystemctl is-active Service_Name1 Service_name2\nsystemctl --quiet is-active Service_Name # \u200b\u9759\u9ed8\u200b\u6a21\u5f0f\u200b\n# \u200b\u68c0\u67e5\u200b\u670d\u52a1\u200b\u662f\u5426\u200bfailed\uff1a\u200b\u670d\u52a1\u200b\u542f\u52a8\u200b\u547d\u4ee4\u200b\u9000\u51fa\u200b\u72b6\u6001\u200b\u7801\u975e\u200b0\u200b\u6216\u8005\u200b\u542f\u52a8\u200b\u8d85\u65f6\u200b\nsystemctl is-failed Service_Name\n# \u200b\u5217\u51fa\u200b\u6240\u6709\u200bService Unit\u200b\u7684\u200b\u72b6\u6001\u200b\u4fe1\u606f\u200b\nsystemctl list-units --type=service\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/systemd/#_1","title":"\u670d\u52a1\u200b\u72b6\u6001\u503c","text":"<pre><code>active # \u200b\u542f\u52a8\u200b\u6210\u529f\u200b\ninactive # \u200b\u670d\u52a1\u200b\u672a\u200b\u542f\u52a8\u200b\u6216\u8005\u200b\u5df2\u7ecf\u200b\u505c\u6b62\u200b\nactivating\u200b\u6216\u8005\u200bdeactivating # \u200b\u670d\u52a1\u200b\u542f\u52a8\u200b\u4e2d\u200b\u6216\u8005\u200b\u670d\u52a1\u200b\u505c\u6b62\u200b\u4e2d\u200b\nreloading # \u200b\u670d\u52a1\u200b\u91cd\u8f7d\u200b\u4e2d\u200b\nfailed # ExecStart \u200b\u6307\u4ee4\u200b\u975e\u200b0\u200b\u9000\u51fa\u200b\u3001\u200b\u542f\u52a8\u200b\u8d85\u65f6\u200b\u3001\u200b\u8fdb\u7a0b\u200b\u81a8\u200b\u8770\u200b\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/systemd/#_2","title":"\u5f00\u673a\u200b\u65f6\u200b\u957f","text":"<p>\u200b\u4f7f\u7528\u200b<code>systemctl-analyze blame</code>\u200b\u5206\u6790\u200b\u5f00\u673a\u200b\u542f\u52a8\u200b\u670d\u52a1\u200b\u5360\u7528\u200b\u7684\u200b\u65f6\u957f\u200b \u200b\u4f7f\u7528\u200b<code>systemctl-analyze time</code>\u200b\u4ece\u200b\u5185\u6838\u200b\u542f\u52a8\u200b\u5f00\u59cb\u200b\u81f3\u200b\u5f00\u673a\u200b\u7ed3\u675f\u200b\u6240\u82b1\u200b\u7684\u200b\u65f6\u95f4\u200b</p>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/systemd/#systemd","title":"systemd\u200b\u670d\u52a1\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u5b58\u653e\u200b\u8def\u5f84","text":"<p>Systemd Service\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u7684\u200b\u6587\u4ef6\u540d\u200b\u5747\u200b\u4ee5\u200b<code>.service</code>\u200b\u4e3a\u200b\u540e\u7f00\u200b\uff0c\u200b\u8fd9\u4e9b\u200b\u670d\u52a1\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u5b58\u653e\u200b\u8def\u5f84\u200b\u4f9d\u7136\u200b\u9075\u5faa\u200bSystemd\u200b\u7ba1\u7406\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u7684\u200b\u98ce\u683c\u200b\uff0c**\u200b\u5c06\u200b\u670d\u52a1\u200b\u7ba1\u7406\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u7edf\u4e00\u200b\u201c\u200b\u9690\u85cf\u200b\u201d\u200b\u5728\u200b<code>/usr/lib/systemd/system</code>\u200b\u8def\u5f84\u200b\u4e0b\u200b\uff0c\u200b\u540c\u65f6\u200b\u66b4\u9732\u200b\u4e00\u4e2a\u200b\u53ef\u200b\u4f9b\u200b\u7528\u6237\u200b\u5b58\u653e\u200b\u670d\u52a1\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u7684\u200b\u76ee\u5f55\u200b<code>/etc/systemd/system</code>\u3002</p> <p>[Unit]\u200b\u548c\u200b[Install]\u200b\u6bb5\u200b\u7684\u200b\u914d\u7f6e\u200b\u6307\u4ee4\u200b\u90fd\u200b\u6765\u81ea\u200b\u4e8e\u200bman systemd.unit\uff0c\u200b\u8fd9\u4e9b\u200b\u6307\u4ee4\u200b\u90fd\u200b\u7528\u4e8e\u200b\u63cf\u8ff0\u200b\u4f5c\u4e3a\u200bUnit\u200b\u65f6\u200b\u7684\u200b\u5c5e\u6027\u200b\uff0c[Service]\u200b\u6bb5\u200b\u5219\u200b\u4e13\u200b\u5c5e\u4e8e\u200b.Service\u200b\u670d\u52a1\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u3002</p>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/systemd/#systemd_1","title":"systemd\u200b\u4e2d\u200b\u670d\u52a1\u200b\u5f00\u673a\u200b\u81ea\u542f\u52a8","text":"<pre><code># \u200b\u5c06\u200b\u670d\u52a1\u200b\u52a0\u5165\u200b\u5f00\u673a\u200b\u81ea\u542f\u52a8\u200b\nsystemctl enable Service_Name\n\n# \u200b\u7981\u6b62\u200b\u670d\u52a1\u200b\u5f00\u673a\u200b\u81ea\u542f\u52a8\u200b\nsystemctl disable Service_Name\n\n# \u200b\u67e5\u770b\u200b\u670d\u52a1\u200b\u662f\u5426\u200b\u5f00\u673a\u200b\u81ea\u542f\u52a8\u200b\nsystemctl is-enable Service_Name\n\n# \u200b\u67e5\u770b\u200b\u6240\u6709\u200b\u5f00\u673a\u200b\u81ea\u542f\u52a8\u200b\u670d\u52a1\u200b\nsystemctl list-unit-files --type service | grep enable\\\n\n# \u200b\u5982\u679c\u200b\u670d\u52a1\u200b\u5df2\u7ecf\u200b\u52a0\u5165\u200b\u5f00\u673a\u200b\u81ea\u542f\u52a8\u200b\uff0c\u200b\u4f46\u662f\u200b\u60f3\u8981\u200b\u518d\u6b21\u200b\u52a0\u5165\u200b\n#\uff08\u200b\u6bd4\u5982\u200b\u66f4\u65b0\u200b\u4e86\u200b/usr/lib/systemd/system\u200b\u4e0b\u200b\u7684\u200b\u670d\u52a1\u200b\u914d\u7f6e\u6587\u4ef6\u200b\uff09\nsystemctl --force enable Service_Name\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/systemd/#_3","title":"\u811a\u672c\u200b\u5f00\u673a\u200b\u81ea\u542f\u52a8","text":"<p>\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200brc.local\uff0c\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200bsystemd\u200b\u5f00\u673a\u200b\u81ea\u542f\u200b <pre><code>[Unit]\nDescription = some shell script\n# \u200b\u8981\u6c42\u200b\u811a\u672c\u200b\u5177\u6709\u200b\u53ef\u200b\u6267\u884c\u200b\u6743\u9650\u200b\nConditionFileIsExecutable = /usr/bin/some.sh\n\n# \u200b\u6307\u5b9a\u200b\u8981\u200b\u8fd0\u884c\u200b\u7684\u200b\u547d\u4ee4\u200b\u3001\u200b\u811a\u672c\u200b\n[Service]\nExecStart = /usr/bin/some.sh\n\n# \u200b\u4e0d\u80fd\u200b\u5c11\u200b\n[Install]\nWantedBy = multi-user.target\n</code></pre> \u200b\u7136\u540e\u200b\uff1a <pre><code>systemctl daemon-reload\nsystemctl enable mycmd.service\n</code></pre></p>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/systemd/#systemd_2","title":"systemd \u200b\u8fd0\u884c\u200b\u7ea7\u522b","text":"<pre><code>$ ls -l /usr/lib/systemd/system/*.target | grep -o '/.*' \n\n# /usr/lib/systemd/system/\u200b\u4e0b\u5b9a\u4e49\u200b\u7684\u200b\u9ed8\u8ba4\u200b\u8fd0\u884c\u200b\u7ea7\u522b\u200b\uff1agraphical\n/usr/lib/systemd/system/default.target -&gt; graphical.target\n\n# \u200b\u8fd0\u884c\u200b\u7ea7\u522b\u200b0-6\uff0c\u200b\u6ce8\u610f\u200b\u591a\u7528\u6237\u200b\u6a21\u5f0f\u200b\u4e3a\u200bmulti-user.target\n/usr/lib/systemd/system/runlevel0.target -&gt; poweroff.target\n/usr/lib/systemd/system/runlevel1.target -&gt; rescue.target\n/usr/lib/systemd/system/runlevel2.target -&gt; multi-user.target\n/usr/lib/systemd/system/runlevel3.target -&gt; multi-user.target\n/usr/lib/systemd/system/runlevel4.target -&gt; multi-user.target\n/usr/lib/systemd/system/runlevel5.target -&gt; graphical.target\n/usr/lib/systemd/system/runlevel6.target -&gt; reboot.target\n\n# \u200b\u7d27\u6025\u200b\u6a21\u5f0f\u200b\u3001\u200b\u6551\u63f4\u200b\u6a21\u5f0f\u200b\u3001\u200b\u591a\u7528\u6237\u200b\u6a21\u5f0f\u200b\u548c\u200b\u56fe\u5f62\u754c\u9762\u200b\u6a21\u5f0f\u200b\n/usr/lib/systemd/system/emergency.target\n/usr/lib/systemd/system/rescue.target\n/usr/lib/systemd/system/multi-user.target\n/usr/lib/systemd/system/graphical.target\n\n# \u200b\u5173\u673a\u200b\u548c\u200b\u91cd\u542f\u200b\u76f8\u5173\u200b\u64cd\u4f5c\u200b\n/usr/lib/systemd/system/halt.target\n/usr/lib/systemd/system/poweroff.target\n/usr/lib/systemd/system/shutdown.target\n/usr/lib/systemd/system/reboot.target\n/usr/lib/systemd/system/ctrl-alt-del.target -&gt; reboot.target\n\n\n# \u200b\u67e5\u770b\u200b\u5df2\u7ecf\u200b\u52a0\u8f7d\u200b\u7684\u200btarget\nsystemctl list-units --type target\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/systemd/#systemd-timesyncd","title":"systemd timesyncd \u200b\u505a\u200b\u65f6\u95f4\u200b\u540c\u6b65","text":"<p>CentOS8\u200b\u5df2\u7ecf\u200b\u79fb\u9664\u200bntp\u200b\u548c\u200bntpdate\uff0c\u200b\u6ca1\u6709\u200b\u96c6\u6210\u200b\u57fa\u7840\u200b\u5305\u4e2d\u200b CentOS8\u200b\u4f7f\u7528\u200bchronyd\u200b\u4f5c\u4e3a\u200b\u65f6\u95f4\u200b\u670d\u52a1\u5668\u200b <pre><code>vim /etc/systemd/timesyncd.conf\n[TIME]\nNTP=ntp1.aliyun.com ntp2.aliyun.com\n# \u200b\u4ee5\u4e0b\u200b\u56db\u9879\u200b\u5747\u200b\u53ef\u200b\u7701\u7565\u200b\nFallbackNTP=1.cn.pool.ntp.org 2.cn.pool.ntp.org\nRootDistanceMaxSec=5\nPollIntervalMinSec=32\nPollIntervalMaxSec=2048\n</code></pre></p> <p>\u200b\u5e38\u7528\u200b\u7684\u200b\u65f6\u95f4\u200b\u670d\u52a1\u5668\u200b\uff1a <pre><code>cn.pool.ntp.org\n1.cn.pool.ntp.org\n2.cn.pool.ntp.org\n3.cn.pool.ntp.org\n0.cn.pool.ntp.org\n\nntp1.aliyun.com\nntp2.aliyun.com\nntp3.aliyun.com\nntp4.aliyun.com\nntp5.aliyun.com\nntp6.aliyun.com\nntp7.aliyun.com\n</code></pre></p> <p>\u200b\u914d\u7f6e\u200b\u597d\u200btimesyncd.conf\u200b\u540e\u200b\uff0c\u200b\u542f\u52a8\u200bsystemd timesyncd\u200b\u65f6\u95f4\u200b\u540c\u6b65\u200b\u670d\u52a1\u200b <pre><code>timedatectl set-ntp true\n</code></pre> \u200b\u67e5\u770b\u200b\u540c\u6b65\u200b\u72b6\u6001\u200b\uff1a <pre><code>timedatectl status\n\u200b\u6216\u8005\u200b\ntimedatectl show\n</code></pre></p>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/","title":"\u6211\u200b\u7684\u200bLinux\u200b\u547d\u4ee4\u200b\u5e2e\u52a9\u200b\u624b\u518c","text":""},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#top","title":"top","text":""},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#cpu","title":"\u5b9e\u65f6\u200b\u964d\u5e8f\u200bCPU\u200b\u6216\u200b\u5185\u5b58\u200b\u5360\u7528","text":"<p>top\u200b\u547d\u4ee4\u200b\uff1a\u200b\u5728\u200b\u7ec8\u7aef\u200b\u4e2d\u200b\u8fd0\u884c\u200btop\u200b\u547d\u4ee4\u200b\uff0c\u200b\u7136\u540e\u200b\u6309\u4e0b\u200b\"Shift + M\"\u200b\u952e\u200b\uff0c\u200b\u6309\u200b\u5185\u5b58\u200b\u4f7f\u7528\u91cf\u200b\u8fdb\u884c\u200b\u6392\u5e8f\u200b\u3002\u200b\u8fd9\u200b\u5c06\u200b\u663e\u793a\u200b\u5f53\u524d\u200b\u8fd0\u884c\u200b\u7684\u200b\u6240\u6709\u200b\u8fdb\u7a0b\u200b\u6309\u7167\u200b\u5185\u5b58\u200b\u4f7f\u7528\u91cf\u200b\u4ece\u200b\u9ad8\u5230\u200b\u4f4e\u200b\u7684\u200b\u5217\u8868\u200b\u3002\u200b\u60a8\u200b\u53ef\u4ee5\u200b\u67e5\u770b\u200bRES\uff08Resident Set Size\uff09\u200b\u5217\u200b\uff0c\u200b\u5b83\u200b\u8868\u793a\u200b\u8fdb\u7a0b\u200b\u5b9e\u9645\u200b\u5360\u7528\u200b\u7684\u200b\u7269\u7406\u200b\u5185\u5b58\u200b\u3002 <pre><code>Shift + M \u200b\u6309\u200bmem\u200b\u964d\u5e8f\u200b\nShift + C \u200b\u6309\u200bCPU\u200b\u964d\u5e8f\u200b\n</code></pre></p> <p>\u200b\u663e\u793a\u200b\u5185\u5b58\u200b\u3001swap\u200b\u5360\u7528\u200b\u767e\u5206\u6bd4\u200b\u5e76\u200b\u663e\u793a\u200b\u8fdb\u5ea6\u6761\u200b <pre><code>top \u200b\u6309\u4e0b\u200b\u7136\u540e\u200b\u6309\u200bm\n</code></pre></p> <p>\u200b\u663e\u793a\u200bcpu\u200b\u5360\u7528\u200b\u767e\u5206\u6bd4\u200b\u5e76\u200b\u663e\u793a\u200b\u8fdb\u5ea6\u6761\u200b <pre><code>top \u200b\u6309\u4e0b\u200b\u7136\u540e\u200b\u6309\u200bt\n</code></pre></p>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#_1","title":"\u53c2\u8003","text":"<ul> <li>https://qiita.com/Kernel_OGSun/items/55afb7e93b445f1be019</li> </ul>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#ps","title":"ps","text":""},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#cpu_1","title":"\u67e5\u770b\u200b\u5360\u7528\u200bCPU\u200b\u6700\u591a\u200b\u7684\u200b\u8fdb\u7a0b","text":"<pre><code>ps aux --sort=-%cpu | head\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#_2","title":"\u67e5\u770b\u200b\u5360\u7528\u200b\u5185\u5b58\u200b\u6700\u591a\u200b\u7684\u200b\u8fdb\u7a0b","text":"<pre><code>ps aux --sort=-%mem | head\nps aux --sort -rss\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#_3","title":"\u8fc7\u6ee4\u200b\u6307\u5b9a\u200b\u7a0b\u5e8f\u200b\u5bfc\u81f4\u200b\u6807\u9898\u200b\u9057\u6f0f\u200b\u95ee\u9898","text":"<p>\u200b\u4f7f\u7528\u200b\u591a\u91cd\u200b\u5339\u914d\u200b\uff0c\u200b\u591a\u200b\u5339\u914d\u200b\u4e00\u6b21\u200b<code>PID</code>\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u89e3\u51b3\u200b</p> <pre><code>ps axw -o pid,ppid,user,%cpu,vsz,wchan,command | egrep '(nginx|PID)'\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#cpumem","title":"\u67e5\u770b\u200b\u6307\u5b9a\u200b\u8fdb\u7a0b\u200b\u7684\u200bCPU&amp;MEM\u200b\u4f7f\u7528\u7387","text":"<pre><code>ps -p $(pgrep -f nginx -o) -o pid,user,%cpu,%mem,cmd\n</code></pre> <p>\u200b\u53c2\u8003\u200b\uff1a Linux ps \u200b\u547d\u4ee4\u200b | \u200b\u83dc\u9e1f\u200b\u6559\u7a0b\u200b (runoob.com)</p>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#pidstat","title":"pidstat","text":""},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#cpu_2","title":"\u67e5\u770b\u200b\u6307\u5b9a\u200b\u8fdb\u7a0b\u200bCPU\u200b\u5185\u5b58\u200b\u5360\u7528","text":"<p>\u200b\u53ef\u4ee5\u200b\u4f18\u5148\u200b\u4f7f\u7528\u200bps</p> <pre><code>./pidstat -ru -p $(pgrep -o nginx) -h --human 1 -l\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#io","title":"\u67e5\u770b\u200b\u6307\u5b9a\u200b\u8fdb\u7a0b\u200bIO\u200b\u5360\u7528","text":"<pre><code>./pidstat -d -p $(pgrep -o nginx) -h --human 1 -l\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#systemd","title":"systemd\u200b\u76f8\u5173\u200b\u547d\u4ee4","text":"<pre><code># \u200b\u5217\u51fa\u200b\u6b63\u5728\u200b\u8fd0\u884c\u200b\u7684\u200b Unit\n$ systemctl list-units\n# \u200b\u91cd\u65b0\u200b\u52a0\u8f7d\u200b\u4e00\u4e2a\u200b\u670d\u52a1\u200b\u7684\u200b\u914d\u7f6e\u6587\u4ef6\u200b\n$ sudo systemctl reload apache.service\n# \u200b\u91cd\u8f7d\u200b\u6240\u6709\u200b\u4fee\u6539\u200b\u8fc7\u200b\u7684\u200b\u914d\u7f6e\u6587\u4ef6\u200b\n$ sudo systemctl daemon-reload\n# \u200b\u663e\u793a\u200b\u67d0\u4e2a\u200b Unit \u200b\u7684\u200b\u6240\u6709\u200b\u5e95\u5c42\u200b\u53c2\u200ba\u200b\u6570\u200b\n$ systemctl show httpd.service\n\n# \u200b\u67e5\u770b\u200b\u6307\u5b9a\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u65e5\u5fd7\u200b\n$ sudo journalctl _PID=1\n# \u200b\u67e5\u770b\u200b\u67d0\u4e2a\u200b\u8def\u5f84\u200b\u7684\u200b\u811a\u672c\u200b\u7684\u200b\u65e5\u5fd7\u200b\n$ sudo journalctl /usr/bin/bash\n# \u200b\u67e5\u770b\u200b\u6307\u5b9a\u200b\u7528\u6237\u200b\u7684\u200b\u65e5\u5fd7\u200b\n$ sudo journalctl _UID=33 --since today\n# \u200b\u67e5\u770b\u200b\u67d0\u4e2a\u200b Unit \u200b\u7684\u200b\u65e5\u5fd7\u200b\n$ sudo journalctl -u nginx.service\n$ sudo journalctl -u nginx.service --since today\n# \u200b\u5b9e\u65f6\u200b\u6eda\u52a8\u200b\u663e\u793a\u200b\u67d0\u4e2a\u200b Unit \u200b\u7684\u200b\u6700\u65b0\u200b\u65e5\u5fd7\u200b\n$ sudo journalctl -u nginx.service -f\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#dasel","title":"dasel","text":"<pre><code>echo '{\"users\": [{\"name\": \"Tom\"}]}' | dasel put object -p json -t string '.users.[]' name=Frank\n./dasel_linux_amd64 delete -f  example.json -m '.(?:host=192.168.168.33)'\n\n./dasel_linux_amd64 -n -f  example.json -m '.(?:host=192.168.168.911)'\n\n ./dasel_linux_amd64 -n -f  example.json -m '[0].host' \n # \u200b\u5c06\u200b\u5220\u9664\u200b\u7684\u200b\u5185\u5bb9\u200b\u8f93\u51fa\u200b\u5230\u200bxxx.json\uff0c\u200b\u5e76\u200b\u4e0d\u4f1a\u200b\u5220\u9664\u200b\u6e90\u6587\u4ef6\u200b\u5185\u5bb9\u200b\uff0c\u200b\u5982\u679c\u200b\u4e0d\u200b\u6307\u5b9a\u200b-o \u200b\u5219\u200b\u4f1a\u200b\u5728\u200b\u6e90\u6587\u4ef6\u200b\u4e0a\u200b\u8fdb\u884c\u200b\u4fee\u6539\u200b\n./dasel_linux_amd64 delete -f example.json '[0]'  -o xxx.json\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#_4","title":"\u53c2\u8003","text":"<ul> <li>TomWright/dasel: Select, put and delete data from JSON, TOML, YAML, XML and CSV files with a single tool. Supports conversion between formats and can be used as a Go package. (github.com)</li> <li>jq\u200b\u8868\u8fbe\u5f0f\u200b\u5728\u7ebf\u200b\u9a8c\u8bc1\u200bjq play</li> </ul>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#iptables","title":"iptables","text":"<pre><code># \u200b\u6e05\u7a7a\u200b\u81ea\u5b9a\u4e49\u200b\u94fe\u200b\u3001\u200b\u6e05\u7a7a\u200b\u89c4\u5219\u200b\u3001\u200b\u6e05\u7a7a\u200b\u89c4\u5219\u200b\u8ba1\u6570\u5668\u200b\niptables -X\niptables -F\niptables -Z\n\n# \u200b\u6307\u5b9a\u200b\u591a\u4e2a\u200b\u7aef\u53e3\u200b\niptables -A INPUT -s 172.16.0.0/16 -d 172.16.100.10 -p tcp -m multiport --dports 20:22,80 -j ACCEPT\n\n\niptables -A INPUT -s 172.16.0.0/16 -d 172.16.100.10 -p tcp -m multiport --dports 20:22,80 -j ACCEPT\n\n\n# iprange\u200b\u6269\u5c55\u200b\n# [!] --src-range from[-to] \u200b\u6e90\u200bIP\u200b\u5730\u5740\u200b\u8303\u56f4\u200b\n# [!] --dst-range from[-to] \u200b\u76ee\u6807\u200bIP\u200b\u5730\u5740\u200b\u8303\u56f4\u200b\niptabels -A INPUT -d 172.16.1.100 -p tcp --dport 80 -m iprange --src-range 172.16.1.5-192.16.1.10 -j DROP\n\n# mac \u200b\u6269\u5c55\u200b\n# mac \u200b\u6a21\u5757\u200b\u53ef\u4ee5\u200b\u6307\u660e\u200b\u6e90\u200bMAC\u200b\u5730\u5740\u200b,\uff0c\u200b\u9002\u7528\u200b\u4e8e\u200b\uff1aPREROUTING, FORWARD\uff0cINPUT chains\n# [!] --mac-source xx:xx:xx:xx:xx\niptables -A INPUT -s 172.16.0.100 -m mac --mac-source \n00:50:56:12:34:56 -j ACCEPT\n\n\n# \u200b\u6301\u4e45\u200b\u4fdd\u5b58\u200b\n# centos6:\nservice iptables save\n# centos7\u30018\niptables-save &gt;/PATH/TO/SOME_RULES_FILE\n\n# \u200b\u52a0\u8f7d\u200b\u89c4\u5219\u200b centos7\uff1a\niptables-restore &lt; /PATH/FROM/SOME_RULES_FILE\n-n, -noflush: \u200b\u4e0d\u200b\u6e05\u9664\u200b\u539f\u6709\u200b\u89c4\u5219\u200b\n-t, -test: \u200b\u4ec5\u200b\u751f\u6210\u200b\u89c4\u5219\u200b\u96c6\u200b\uff0c\u200b\u4f46\u200b\u4e0d\u200b\u63d0\u4ea4\u200b\n\n# centos6\n#\u200b\u4f1a\u200b\u81ea\u52a8\u200b\u4ece\u200b/etc/sysconfig/iptables \u200b\u91cd\u65b0\u200b\u8f7d\u5165\u200b\u89c4\u5219\u200b\nservice  iptables  restart\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#_5","title":"\u9632\u706b\u5899\u200b\u89c4\u5219","text":"<pre><code># ssh \u200b\u7aef\u53e3\u200b\u91cd\u8981\u200b\niptables -A INPUT -p tcp -m state --state=NEW,ESTABLISHED --dport 5151 -j ACCEPT\n\n# \u200b\u670d\u52a1\u200b\u76f8\u5173\u200b\n# ng\u200b\u6ce8\u610f\u200b\u7aef\u53e3\u200b\niptables -A INPUT -p tcp -m state --state=NEW,ESTABLISHED --dport 6100 -j ACCEPT\n\n# \u200b\u5176\u5b83\u200b\u89c4\u5219\u200b\niptables -A INPUT -m state --state=INVALID -j DROP\niptables -A INPUT -i lo  -j ACCEPT\niptables -A INPUT -p icmp -j ACCEPT\niptables -A INPUT -m iprange --src-range 192.168.12.89-192.168.12.90 -j ACCEPT\niptables -A INPUT -m state --state NEW -m tcp -p tcp --dport 10050 -j ACCEPT\n\n# END\niptables -A INPUT -p all -s any/0 -j DROP\n</code></pre> <pre><code># ssh \u200b\u7aef\u53e3\u200b\u91cd\u8981\u200b\niptables -A INPUT -p tcp -m state --state=NEW,ESTABLISHED --dport 5151 -j ACCEPT\n\n\n# \u200b\u670d\u52a1\u200b\u76f8\u5173\u200b\uff0c\u200b\u5c3d\u65e9\u200b\u5339\u914d\u200b\n# ng\u200b\u6ce8\u610f\u200b\u7aef\u53e3\u200b\niptables -A INPUT -p tcp  -m state state=NEW,ESTABLISHED,RELATED --dport 6000 -j ACCEPT\n\n\n# \u200b\u5176\u5b83\u200b\u89c4\u5219\u200b\niptables -A INPUT -m state INVALID -j DROP\niptables -A INPUT -i lo  -j ACCEPT\niptables -A INPUT -p icmp -j ACCEPT\niptables -A INPUT -m iprange --src-range 192.168.12.89-192.168.12.90 -j ACCEPT\n\n\n# END\niptables -A INPUT -p all -s any/0 -j DROP\n</code></pre> <pre><code># ssh \u200b\u7aef\u53e3\u200b\u91cd\u8981\u200b\niptables -A INPUT -p tcp -m state --state=NEW,ESTABLISHED --dport 5151 -j ACCEPT\n\n\n# \u200b\u670d\u52a1\u200b\u76f8\u5173\u200b\uff0c\u200b\u5c3d\u65e9\u200b\u5339\u914d\u200b\n# \u200b\u7ba1\u7406\u200b\u670d\u52a1\u200b\u5bf9\u200bng\u200b\u653e\u884c\u200b\niptables -A INPUT -p tcp -s 192.168.12.12/24 -m state state=NEW,ESTABLISHED,RELATED --dport 6200 -j ACCEPT\niptables -A INPUT -p tcp -s 192.168.12.13/24 -m state state=NEW,ESTABLISHED,RELATED --dport 6200 -j ACCEPT\niptables -A INPUT -p tcp -s 192.168.12.61/24 -m state state=NEW,ESTABLISHED,RELATED --dport 6200 -j ACCEPT\niptables -A INPUT -p tcp -s 192.168.12.62/24 -m state state=NEW,ESTABLISHED,RELATED --dport 6200 -j ACCEPT\n\n\n\n# \u200b\u5176\u5b83\u200b\u89c4\u5219\u200b\niptables -A INPUT -m state INVALID -j DROP\niptables -A INPUT -i lo  -j ACCEPT\niptables -A INPUT -p icmp -j ACCEPT\niptables -A INPUT -m iprange --src-range 192.168.12.89-192.168.12.90 -j ACCEPT\n\n# END\niptables -A INPUT -p all -s any/0 -j DROP\n</code></pre> <pre><code>sudo -i\n\nsystemctl stop firewalld\nsystemctl disable firewalld\n\n\niptables -X\niptables -F\niptables -Z\n\nnetstat -anpt | grep ssh | head\n\niptables -A INPUT -p tcp -m state --state=NEW,ESTABLISHED --dport 5151 -j ACCEPT\niptables -A INPUT -p tcp -s 192.168.12.12 -m state --state=NEW,ESTABLISHED,RELATED --dport 6200 -j ACCEPT\niptables -A INPUT -p tcp -s 192.168.12.13 -m state --state=NEW,ESTABLISHED,RELATED --dport 6200 -j ACCEPT\niptables -A INPUT -p tcp -s 192.168.12.61 -m state --state=NEW,ESTABLISHED,RELATED --dport 6200 -j ACCEPT\niptables -A INPUT -p tcp -s 192.168.12.62 -m state --state=NEW,ESTABLISHED,RELATED --dport 6200 -j ACCEPT\n\n\n# \u200b\u5176\u5b83\u200b\u89c4\u5219\u200b\niptables -A INPUT -m state --state=INVALID -j DROP\niptables -A INPUT -i lo  -j ACCEPT\niptables -A INPUT -p icmp -j ACCEPT\niptables -A INPUT -m iprange --src-range 192.168.12.89-192.168.12.90 -j ACCEPT\niptables -A INPUT -m iprange --src-range 192.168.12.14-192.168.12.17 -j ACCEPT\niptables -A INPUT -m state --state NEW -m tcp -p tcp --dport 10050 -j ACCEPT\n\n#iptables -A INPUT -p all -s any/0 -j DROP\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#pgrep","title":"pgrep","text":""},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#grephelp","title":"grep\u200b\u8fc7\u6ee4\u200b\u547d\u4ee4\u200bhelp\u200b\u53c2\u6570","text":"<pre><code>pgrep --help1 |&amp; grep -wEc -- '-l|-f'\npgrep --help1 |&amp; grep -wEc -- '-a|-f'\n\npgrep --help1 | grep -wEc -- '-l|-f'\npgrep --help1 | grep -wEc -- '-a|-f'\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#yum-config-manager","title":"yum-config-manager","text":"<pre><code>yum -y install yum-utils\n</code></pre> <p>\u200b\u5efa\u8bae\u200b\u4f7f\u7528\u200b\u963f\u91cc\u200b\u4e91\u200byum\u200b\u6e90\u200b\uff1a\uff08\u200b\u63a8\u8350\u200b\uff09</p> <pre><code>yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\nyum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#coda","title":"coda","text":"<pre><code># \u200b\u67e5\u770b\u200bconda\u200b\u7248\u672c\u200b\uff0c\u200b\u9a8c\u8bc1\u200b\u662f\u5426\u200b\u5b89\u88c5\u200b \nconda -V \n\n# \u200b\u66f4\u65b0\u200bconda\u200b\u81f3\u200b\u6700\u65b0\u200b\u7248\u672c\u200b\nconda update conda \n\n# \u200b\u66f4\u65b0\u200b\u6240\u6709\u200b\u5305\u200b\nconda update --all \n\n# \u200b\u66f4\u65b0\u200b\u6307\u5b9a\u200b\u7684\u200b\u5305\u200b\nconda update package_name \n\n# \u200b\u521b\u5efa\u200b\u540d\u4e3a\u200benv_name\u200b\u7684\u200b\u65b0\u200b\u73af\u5883\u200b\uff0c\u200b\u5e76\u200b\u5728\u200b\u8be5\u200b\u73af\u5883\u200b\u4e0b\u200b\u5b89\u88c5\u200b\u540d\u4e3a\u200bpackage_name \u200b\u7684\u200b\u5305\u200b\uff0c\n# \u200b\u53ef\u4ee5\u200b\u6307\u5b9a\u200b\u65b0\u200b\u73af\u5883\u200b\u7684\u200b\u7248\u672c\u53f7\u200b\uff0c\u200b\u4f8b\u5982\u200b\uff1aconda create -n python3 python=python3.7 numpy pandas\uff0c\n# \u200b\u521b\u5efa\u200b\u4e86\u200bpython3\u200b\u73af\u5883\u200b\uff0cpython\u200b\u7248\u672c\u200b\u4e3a\u200b3.7\uff0c\u200b\u540c\u65f6\u200b\u8fd8\u200b\u5b89\u88c5\u200b\u4e86\u200bnumpy pandas\u200b\u5305\u200b\nconda create -n env_name package_name \n\n# \u200b\u5207\u6362\u200b\u81f3\u200benv_name\u200b\u73af\u5883\u200b\nconda activate env_name \n\n#\u200b\u9000\u51fa\u200b\u73af\u5883\u200b\nconda deactivate \n\n# \u200b\u663e\u793a\u200b\u6240\u6709\u200b\u5df2\u7ecf\u200b\u521b\u5efa\u200b\u7684\u200b\u73af\u5883\u200b\nconda info -e  \n# \u200b\u6216\u8005\u200b\u4f7f\u7528\u200b \nconda env list\n\n# \u200b\u590d\u5236\u200bold_env_name\u200b\u4e3a\u200bnew_env_name\nconda create --name new_env_name --clone old_env_name \n\n# \u200b\u5220\u9664\u200b\u73af\u5883\u200b\nconda remove --name env_name --all \n\n# \u200b\u67e5\u770b\u200b\u6240\u6709\u200b\u5df2\u7ecf\u200b\u5b89\u88c5\u200b\u7684\u200b\u5305\u200b\nconda list \n\n# \u200b\u5728\u200b\u5f53\u524d\u200b\u73af\u5883\u200b\u4e2d\u200b\u5b89\u88c5\u5305\u200b\nconda install package_name \n\n# \u200b\u5728\u200b\u6307\u5b9a\u200b\u73af\u5883\u200b\u4e2d\u200b\u5b89\u88c5\u5305\u200b\nconda install --name env_name package_name \n\n# \u200b\u5220\u9664\u200b\u6307\u5b9a\u200b\u73af\u5883\u200b\u4e2d\u200b\u7684\u200b\u5305\u200b\nconda remove -- name env_name package \n\n# \u200b\u91c7\u7528\u200b\u4e0a\u200b\u4e00\u6b65\u200b\u65b9\u6cd5\u200b\u5220\u9664\u200b\u73af\u5883\u200b\u5931\u8d25\u200b\u65f6\u200b\uff0c\u200b\u53ef\u200b\u91c7\u7528\u200b\u8fd9\u79cd\u200b\u65b9\u6cd5\u200b\nconda env remove -n env_name \n\n\n# \u200b\u5220\u9664\u200b\u5f53\u524d\u200b\u73af\u5883\u200b\u4e2d\u200b\u7684\u200b\u5305\u200b\nconda remove package \n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#last","title":"last","text":""},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#_6","title":"\u91cd\u542f\u200b\u670d\u52a1\u5668\u200b\u7684\u200b\u65f6\u95f4","text":"<pre><code>last -x reboot\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#nc","title":"nc","text":"<p>Ubuntu \u200b\u5207\u6362\u200b netcat \u200b\u4e3a\u200b traditional\u200b\u7248\u200b\u4ee5\u53ca\u200b\u4f7f\u7528\u200b\u65b9\u6cd5\u200b - adhzl - \u200b\u535a\u5ba2\u56ed\u200b (cnblogs.com)</p>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#numfmt","title":"numfmt","text":"<pre><code>yanghe@IkunOS:~/coreutils-9.3/src$ ./numfmt --help\n\u200b\u7528\u6cd5\u200b: ./numfmt [\u200b\u9009\u9879\u200b]... [\u200b\u6570\u5b57\u200b]...\n\u200b\u5bf9\u200b &lt;\u200b\u6570\u5b57\u200b&gt; \u200b\u8fdb\u884c\u200b\u91cd\u65b0\u200b\u683c\u5f0f\u5316\u200b\uff0c\u200b\u5982\u679c\u200b\u672a\u6307\u5b9a\u200b &lt;\u200b\u6570\u5b57\u200b&gt;\uff0c\u200b\u5219\u200b\u4ece\u200b\u6807\u51c6\u200b\u8f93\u5165\u200b\u8bfb\u53d6\u200b\u6570\u5b57\u200b\u3002\n\n\u200b\u957f\u200b\u9009\u9879\u200b\u7684\u200b\u5fc5\u9009\u200b\u53c2\u6570\u200b\u5bf9\u4e8e\u200b\u77ed\u200b\u9009\u9879\u200b\u4e5f\u200b\u662f\u200b\u5fc5\u9009\u200b\u7684\u200b\u3002\n      --debug          \u200b\u5bf9\u200b\u65e0\u6548\u200b\u7684\u200b\u8f93\u5165\u200b\u5185\u5bb9\u200b\u6253\u5370\u200b\u8b66\u544a\u200b\u4fe1\u606f\u200b\n  -d, --delimiter=X    \u200b\u4f7f\u7528\u200b X \u200b\u800c\u200b\u4e0d\u662f\u200b\u7a7a\u683c\u200b\u4f5c\u4e3a\u200b\u5b57\u200b\u6bb5\u200b\u5206\u9694\u7b26\u200b\n      --field=FIELDS   replace the numbers in these input fields (default=1);\n                         see FIELDS below\n      --format=\u200b\u683c\u5f0f\u200b    \u200b\u4f7f\u7528\u200b printf \u200b\u98ce\u683c\u200b\u7684\u200b\u6d6e\u70b9\u200b &lt;\u200b\u683c\u5f0f\u200b&gt;\uff1b\n                         \u200b\u53c2\u89c1\u200b\u4e0b\u6587\u200b &lt;\u200b\u683c\u5f0f\u200b&gt; \u200b\u90e8\u5206\u200b\u4ee5\u200b\u4e86\u89e3\u200b\u7ec6\u8282\u200b\n      --from=\u200b\u5355\u4f4d\u200b      \u200b\u4f7f\u7528\u200b &lt;\u200b\u5355\u4f4d\u200b&gt; \u200b\u5bf9\u200b\u8f93\u5165\u200b\u6570\u5b57\u200b\u8fdb\u884c\u200b\u81ea\u52a8\u200b\u7f29\u653e\u200b\uff1b\u200b\u9ed8\u8ba4\u503c\u200b\u4e3a\u200b \"none\"\uff1b\n                         \u200b\u53c2\u89c1\u200b\u4e0b\u6587\u200b &lt;\u200b\u5355\u4f4d\u200b&gt; \u200b\u90e8\u5206\u200b\n      --from-unit=N    \u200b\u6307\u5b9a\u200b\u8f93\u5165\u200b\u7684\u200b\u5355\u4f4d\u200b\u5927\u5c0f\u200b\uff08\u200b\u800c\u200b\u975e\u200b\u9ed8\u8ba4\u503c\u200b 1\uff09\n      --grouping       \u200b\u4f7f\u7528\u200b\u533a\u57df\u200b\u8bbe\u7f6e\u200b\u4e2d\u200b\u5b9a\u4e49\u200b\u7684\u200b\u65b9\u6cd5\u200b\u5bf9\u200b\u6570\u5b57\u200b\u8fdb\u884c\u200b\u5206\u7ec4\u200b\uff0c\u200b\u4f8b\u5982\u200b 1,000,000\n                         \uff08\u200b\u610f\u5473\u7740\u200b\u8be5\u200b\u9009\u9879\u200b\u5728\u200b C/POSIX \u200b\u533a\u57df\u200b\u8bbe\u7f6e\u200b\u4e0b\u200b\u65e0\u200b\u6548\u679c\u200b\uff09\n      --header[=N]     \u200b\u5c06\u200b\u524d\u200b N \u200b\u884c\u200b\u89c6\u4e3a\u200b\u5934\u90e8\u200b\uff0c\u200b\u539f\u6837\u200b\u8f93\u51fa\u200b\uff08\u200b\u4e0d\u200b\u8fdb\u884c\u200b\u8f6c\u6362\u200b\uff09\uff1b\n                         \u200b\u5982\u200b\u672a\u6307\u5b9a\u200b N\uff0c\u200b\u9ed8\u8ba4\u503c\u200b\u4e3a\u200b 1\n      --invalid=\u200b\u6a21\u5f0f\u200b   \u200b\u9047\u5230\u200b\u65e0\u6548\u200b\u6570\u5b57\u200b\u65f6\u200b\u7684\u200b\u5904\u7406\u200b\u6a21\u5f0f\u200b\uff1a &lt;\u200b\u6a21\u5f0f\u200b&gt; \u200b\u53ef\u4ee5\u200b\u662f\u200b\uff1a\n                         abort\uff08\u200b\u9ed8\u8ba4\u200b\uff09\u3001fail\u3001warn\u3001ignore\n      --padding=N      \u200b\u5c06\u200b\u8f93\u51fa\u200b\u586b\u5145\u200b\u81f3\u200b N \u200b\u5b57\u7b26\u200b\u957f\u5ea6\u200b\uff1b\u200b\u82e5\u200b N \u200b\u503c\u4e3a\u200b\u6b63\u200b\uff0c\u200b\u5219\u200b\u4f7f\u7528\u200b\n                         \u200b\u53f3\u200b\u5bf9\u9f50\u200b\uff1b\u200b\u82e5\u200b N \u200b\u503c\u4e3a\u200b\u8d1f\u200b\uff0c\u200b\u5219\u200b\u4f7f\u7528\u200b\u5de6\u200b\u5bf9\u9f50\u200b\uff1b\n                         \u200b\u82e5\u200b\u8f93\u51fa\u200b\u5bbd\u5ea6\u200b\u5927\u4e8e\u200b N \u200b\u7684\u200b\u7edd\u5bf9\u503c\u200b\uff0c\u200b\u5219\u200b\u4e0d\u200b\u586b\u5145\u200b\uff1b\n                         \u200b\u9ed8\u8ba4\u200b\u884c\u4e3a\u200b\u662f\u200b\u5982\u679c\u200b\u8f93\u5165\u200b\u542b\u6709\u200b\u7a7a\u683c\u200b\uff0c\u200b\u5219\u200b\u81ea\u52a8\u200b\u586b\u5145\u200b\n      --round=\u200b\u65b9\u6cd5\u200b     \u200b\u7f29\u653e\u200b\u65f6\u200b\u4f7f\u7528\u200b\u6307\u5b9a\u200b &lt;\u200b\u65b9\u6cd5\u200b&gt; \u200b\u8fdb\u884c\u200b\u820d\u5165\u200b\uff1b&lt;\u200b\u65b9\u6cd5\u200b&gt; \u200b\u53ef\u4ee5\u200b\u662f\u200b\uff1a\n                         up\u3001down\u3001from-zero\uff08\u200b\u9ed8\u8ba4\u200b\uff09\u3001towards-zero\u3001nearest\n      --suffix=\u200b\u540e\u7f00\u200b    \u200b\u5c06\u200b &lt;\u200b\u540e\u7f00\u200b&gt; \u200b\u6dfb\u52a0\u200b\u5230\u200b\u8f93\u51fa\u200b\u6570\u5b57\u200b\u4e4b\u540e\u200b\uff0c\u200b\u5e76\u200b\u5141\u8bb8\u200b\u8f93\u5165\u200b\u6570\u5b57\u200b\u4e2d\u200b\n                         \u200b\u542b\u6709\u200b\u8be5\u200b &lt;\u200b\u540e\u7f00\u200b&gt;\n      --to=\u200b\u5355\u4f4d\u200b        \u200b\u4f7f\u7528\u200b &lt;\u200b\u5355\u4f4d\u200b&gt; \u200b\u5bf9\u200b\u8f93\u51fa\u200b\u6570\u5b57\u200b\u8fdb\u884c\u200b\u81ea\u52a8\u200b\u7f29\u653e\u200b\uff1b\u200b\u53c2\u89c1\u200b\u4e0b\u6587\u200b &lt;\u200b\u5355\u4f4d\u200b&gt; \u200b\u90e8\u5206\u200b\n      --to-unit=N      \u200b\u6307\u5b9a\u200b\u8f93\u51fa\u200b\u7684\u200b\u5355\u4f4d\u200b\u5927\u5c0f\u200b\uff08\u200b\u800c\u200b\u975e\u200b\u9ed8\u8ba4\u503c\u200b 1\uff09\n  -z, --zero-terminated    \u200b\u4ee5\u200b NUL \u200b\u7a7a\u5b57\u7b26\u200b\u800c\u200b\u975e\u200b\u6362\u884c\u7b26\u200b\u4f5c\u4e3a\u200b\u884c\u200b\u5206\u9694\u7b26\u200b\n      --help        display this help and exit\n      --version     output version information and exit\n\n&lt;\u200b\u5355\u4f4d\u200b&gt; \u200b\u9009\u9879\u200b\uff1a\n  none       \u200b\u4e0d\u200b\u8fdb\u884c\u200b\u81ea\u52a8\u200b\u7f29\u653e\u200b\uff1b\u200b\u5e26\u200b\u540e\u7f00\u200b\u4f1a\u200b\u89e6\u53d1\u200b\u9519\u8bef\u200b\n  auto       \u200b\u63a5\u53d7\u200b\u53ef\u9009\u200b\u7684\u200b\u5355\u200b\u5b57\u7b26\u200b\u6216\u200b\u53cc\u200b\u5b57\u7b26\u200b\u540e\u7f00\u200b\uff1a\n               1K = 1000,\n               1Ki = 1024,\n               1M = 1000000,\n               1Mi = 1048576,\n  si         \u200b\u63a5\u53d7\u200b\u53ef\u9009\u200b\u7684\u200b\u5355\u200b\u5b57\u7b26\u200b\u540e\u7f00\u200b\uff1a\n               1K = 1000,\n               1M = 1000000,\n               ...\n  iec        \u200b\u63a5\u53d7\u200b\u53ef\u9009\u200b\u7684\u200b\u5355\u200b\u5b57\u7b26\u200b\u540e\u7f00\u200b\uff1a\n               1K = 1024,\n               1M = 1048576,\n               ...\n  iec-i      \u200b\u63a5\u53d7\u200b\u53ef\u9009\u200b\u7684\u200b\u53cc\u200b\u5b57\u7b26\u200b\u540e\u7f00\u200b\uff1a\n               1Ki = 1024,\n               1Mi = 1048576,\n               ...\n\n&lt;\u200b\u5b57\u200b\u6bb5\u200b&gt; \u200b\u652f\u6301\u200b cut(1) \u200b\u98ce\u683c\u200b\u7684\u200b\u5b57\u200b\u6bb5\u200b\u8303\u56f4\u200b\uff1a\n  N    \u200b\u7b2c\u200b N \u200b\u4e2a\u200b\u5b57\u200b\u6bb5\u200b\uff0c\u200b\u4ece\u200b 1 \u200b\u5f00\u59cb\u200b\u8ba1\u6570\u200b\n  N-   \u200b\u4ece\u200b\u7b2c\u200b N \u200b\u4e2a\u200b\u5b57\u200b\u6bb5\u200b\u5f00\u59cb\u200b\uff0c\u200b\u5230\u200b\u884c\u5c3e\u200b\n  N-M  \u200b\u7b2c\u200b N \u200b\u4e2a\u200b\u5230\u200b\u7b2c\u200b M \u200b\u4e2a\u200b\u5b57\u200b\u6bb5\u200b\uff08\u200b\u542b\u200b\u7b2c\u200b N \u200b\u4e2a\u200b\u548c\u200b\u7b2c\u200b M \u200b\u4e2a\u200b\uff09\n  -M   \u200b\u7b2c\u200b 1 \u200b\u4e2a\u200b\u5230\u200b\u7b2c\u200b M \u200b\u4e2a\u200b\u5b57\u200b\u6bb5\u200b\uff08\u200b\u542b\u200b\u7b2c\u200b 1 \u200b\u4e2a\u200b\u548c\u200b\u7b2c\u200b M \u200b\u4e2a\u200b\uff09\n  -    \u200b\u6240\u6709\u200b\u5b57\u200b\u6bb5\u200b\n\u200b\u591a\u4e2a\u200b\u5b57\u6bb5\u200b\u6216\u200b\u5b57\u200b\u6bb5\u200b\u8303\u56f4\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u9017\u53f7\u200b\u5206\u9694\u200b\n\n&lt;\u200b\u683c\u5f0f\u200b&gt; \u200b\u5fc5\u987b\u200b\u9002\u5408\u200b\u6253\u5370\u200b\u4e00\u4e2a\u200b\u6d6e\u70b9\u200b\u53c2\u6570\u200b \"%f\"\u3002\n\u200b\u53ef\u9009\u200b\u7684\u200b\u5355\u5f15\u53f7\u200b (%'f) \u200b\u5c06\u200b\u542f\u7528\u200b --grouping\uff08\u200b\u5982\u679c\u200b\u5f53\u524d\u200b\u533a\u57df\u200b\u8bbe\u7f6e\u200b\u652f\u6301\u200b\uff09\u3002\n\u200b\u53ef\u9009\u200b\u7684\u200b\u5bbd\u5ea6\u200b\u503c\u200b (%10f) \u200b\u4f1a\u200b\u586b\u5145\u200b\u8f93\u51fa\u200b\u3002\u200b\u53ef\u9009\u200b\u7684\u200b\u4ee5\u200b 0 \u200b\u5f00\u5934\u200b (%010f) \u200b\u7684\u200b\u5bbd\u5ea6\u200b\n\u200b\u4f1a\u200b\u4f7f\u7528\u200b 0 \u200b\u5bf9\u200b\u6570\u5b57\u200b\u8fdb\u884c\u200b\u586b\u5145\u200b\u3002\u200b\u53ef\u9009\u200b\u7684\u200b\u8d1f\u503c\u200b (%-10f) \u200b\u4f1a\u200b\u542f\u7528\u200b\u5de6\u200b\u5bf9\u9f50\u200b\u3002\n\u200b\u53ef\u9009\u200b\u7684\u200b\u7cbe\u5ea6\u200b (%.1f) \u200b\u4f1a\u200b\u8986\u76d6\u200b\u7531\u200b\u8f93\u5165\u200b\u6240\u200b\u786e\u5b9a\u200b\u7684\u200b\u7cbe\u5ea6\u200b\u3002\n\n\u200b\u5982\u679c\u200b\u6240\u6709\u200b\u8f93\u5165\u200b\u6570\u5b57\u200b\u5747\u200b\u6210\u529f\u200b\u8f6c\u6362\u200b\uff0c\u200b\u9000\u51fa\u200b\u72b6\u6001\u503c\u200b\u5c06\u200b\u4e3a\u200b 0\u3002\n\u200b\u9ed8\u8ba4\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c./numfmt \u200b\u5c06\u4f1a\u200b\u5728\u200b\u7b2c\u4e00\u4e2a\u200b\u8f6c\u6362\u200b\u9519\u8bef\u200b\u51fa\u73b0\u200b\u65f6\u200b\u505c\u6b62\u200b\u5e76\u200b\u5c06\u200b\u9000\u51fa\u200b\u72b6\u6001\u200b\u8bbe\u200b\u4e3a\u200b 2\u3002\n\u200b\u5982\u679c\u200b\u4f7f\u7528\u200b\u4e86\u200b --invalid='fail'\uff0c\u200b\u7a0b\u5e8f\u200b\u6bcf\u6b21\u200b\u9047\u5230\u200b\u8f6c\u6362\u200b\u9519\u8bef\u200b\u65f6\u200b\u90fd\u200b\u5c06\u200b\u8f93\u51fa\u200b\u8b66\u544a\u200b\uff0c\u200b\u5e76\u200b\u5728\u200b\n\u200b\u6700\u540e\u200b\u5c06\u200b\u9000\u51fa\u200b\u72b6\u6001\u200b\u8bbe\u200b\u4e3a\u200b 2\u3002\u200b\u5982\u679c\u200b\u4f7f\u7528\u200b\u4e86\u200b --invalid='warn'\uff0c\u200b\u7a0b\u5e8f\u200b\u6bcf\u6b21\u200b\u9047\u5230\u200b\u8f6c\u6362\u200b\n\u200b\u9519\u8bef\u200b\u65f6\u200b\u90fd\u200b\u8f93\u51fa\u200b\u8bca\u65ad\u200b\u4fe1\u606f\u200b\uff0c\u200b\u4f46\u200b\u6700\u540e\u200b\u7684\u200b\u9000\u51fa\u200b\u72b6\u6001\u200b\u5c06\u200b\u4e3a\u200b 0\u3002\u200b\u5982\u679c\u200b\u4f7f\u7528\u200b\u4e86\u200b\n--invalid='ignore'\uff0c\u200b\u7a0b\u5e8f\u200b\u5728\u200b\u9047\u5230\u200b\u8f6c\u6362\u200b\u9519\u8bef\u200b\u65f6\u200b\u5c06\u200b\u4e0d\u200b\u8f93\u51fa\u200b\u8bca\u65ad\u200b\u4fe1\u606f\u200b\uff0c\u200b\u6700\u540e\u200b\u7684\u200b\n\u200b\u9000\u51fa\u200b\u72b6\u6001\u200b\u4e5f\u200b\u5c06\u200b\u4e3a\u200b 0\u3002\n\n\u200b\u793a\u4f8b\u200b\uff1a\n  $ ./numfmt --to=si 1000\n            -&gt; \"1.0K\"\n  $ ./numfmt --to=iec 2048\n           -&gt; \"2.0K\"\n  $ ./numfmt --to=iec-i 4096\n           -&gt; \"4.0Ki\"\n  $ echo 1K | ./numfmt --from=si\n           -&gt; \"1000\"\n  $ echo 1K | ./numfmt --from=iec\n           -&gt; \"1024\"\n  $ df -B1 | ./numfmt --header --field 2-4 --to=si\n  $ ls -l  | ./numfmt --header --field 5 --to=iec\n  $ ls -lh | ./numfmt --header --field 5 --from=iec --padding=10\n  $ ls -lh | ./numfmt --header --field 5 --from=iec --format %10f\n\nGNU coreutils \u200b\u5728\u7ebf\u200b\u5e2e\u52a9\u200b\uff1a&lt;https://www.gnu.org/software/coreutils/&gt;\n\u200b\u8bf7\u200b\u5411\u200b &lt;http://translationproject.org/team/zh_CN.html&gt; \u200b\u62a5\u544a\u200b\u4efb\u4f55\u200b\u7ffb\u8bd1\u200b\u9519\u8bef\u200b\n\u200b\u5b8c\u6574\u200b\u6587\u6863\u200b &lt;https://www.gnu.org/software/coreutils/numfmt&gt;\n\u200b\u6216\u8005\u200b\u5728\u200b\u672c\u5730\u200b\u4f7f\u7528\u200b\uff1ainfo '(coreutils) numfmt invocation'\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#shuf","title":"shuf","text":"<p>\u200b\u5728\u200b\u4f7f\u7528\u200b<code>shuf</code>\u200b\u547d\u4ee4\u200b\u65f6\u200b\uff0c\u200b\u8bf7\u200b\u6ce8\u610f\u200b\uff0c\u200b\u5b83\u200b\u53ef\u80fd\u200b\u65e0\u6cd5\u200b\u5904\u7406\u200b\u975e\u5e38\u200b\u5927\u200b\u7684\u200b\u6587\u4ef6\u200b\uff0c\u200b\u56e0\u4e3a\u200b\u5b83\u4f1a\u200b\u5c06\u200b\u6574\u4e2a\u200b\u6587\u4ef6\u200b\u52a0\u8f7d\u200b\u5230\u200b\u5185\u5b58\u200b\u4e2d\u200b\u8fdb\u884c\u200b\u5904\u7406\u200b\u3002\u200b\u5bf9\u4e8e\u200b\u5927\u578b\u200b\u6587\u4ef6\u200b\uff0c\u200b\u60a8\u200b\u53ef\u80fd\u200b\u9700\u8981\u200b\u5bfb\u627e\u200b\u5176\u4ed6\u200b\u5de5\u5177\u200b\u6216\u200b\u65b9\u6cd5\u200b\u6765\u200b\u8fdb\u884c\u200b\u968f\u673a\u5316\u200b\u5904\u7406\u200b\u3002</p> <pre><code>shuf input.txt\n\n# \u200b\u8986\u76d6\u200b\nshuf input.txt -o output.txt\n\n# \u200b\u968f\u673a\u200b\u62bd\u53d6\u200b5\u200b\u884c\u200b\nshuf -n 5 input.txt\n\n# \u200b\u751f\u6210\u200b\u4e00\u4e2a\u200b\u968f\u673a\u6570\u200b\nshuf -i 1-100 -n 1\n\n# \u200b\u4ece\u200b\u6807\u51c6\u200b\u8f93\u5165\u200b\u8bfb\u53d6\u200b\u5185\u5bb9\u200b\necho -e \"line1\\nline2\\nline3\" | shuf\n\n# \u200b\u751f\u6210\u200b\u6307\u5b9a\u200b\u8303\u56f4\u200b\u5c0f\u6570\u200b\nmin=0; max=1; scale=100; shuf -i \"$((min*scale))-$((max*scale))\" -n 1 | awk '{ print $1 / 100 }'\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#pmap","title":"pmap","text":"<p>~~writeable/private \u200b\u597d\u50cf\u200b\u662f\u200b\u5f53\u524d\u200b\u8fdb\u7a0b\u200b\u5360\u7528\u200b\u5185\u5b58\u200b\u7684\u200b\u603b\u91cf\u200b\uff0c\u200b\u53ef\u80fd\u200b\u4e0d\u200b\u5bf9\u200b~~</p> <pre><code>(name=idreader; pmap -d $(pgrep -fn $name))\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#awk","title":"awk","text":""},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#_7","title":"\u4f7f\u7528\u200b\u6b63\u5219\u200b\u8fdb\u884c\u200b\u5206\u7ec4","text":"<pre><code>echo -e \"Saturday\\ntoday\" | awk 'match($1, /S(.*)?t(.*)y/, groups) { print groups[1]; print groups[2]; }'\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#tar","title":"tar","text":""},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#_8","title":"\u901a\u8fc7\u200b\u6807\u51c6\u200b\u8f93\u5165\u200b\u8fdb\u884c\u200b\u6253\u5305","text":"<p><code>ls -f</code>\u200b\u66ff\u6362\u200bfind\u200b\u6027\u80fd\u200b\u4f1a\u200b\u63d0\u9ad8\u200b\u5f88\u591a\u200b</p> <pre><code>find $max_dir -name *.json | head -$file_num | tar zcvf $tar_dir/$tar_name -T - --remove-file &gt;&gt;$tar_dir/tar.log\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#curl","title":"curl","text":""},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#_9","title":"\u5b66\u4e60\u200b\u8d44\u6599","text":"<p>\u200b\u5377\u66f2\u200b\u98df\u8c31\u200b (catonmat.net)</p>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#https","title":"\u5ffd\u7565\u200bhttps\u200b\u8bc1\u4e66\u200b\u548c\u200b\u8fdb\u884c\u200b\u5bc6\u7801\u200b\u8ba4\u8bc1","text":"<pre><code>curl -k -u admin:123 https://xxx\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#rescurl","title":"\u5c06\u200bres\u200b\u7ed3\u679c\u200b\u4f5c\u4e3a\u200b\u53e6\u5916\u200b\u4e00\u4e2a\u200bcurl\u200b\u7684\u200b\u53c2\u6570","text":"<pre><code>curl -s --compressed --http2 -X GET \\\n        -H \"Host:smp-api.iyouke.com\" \\\n        -H \"authorization:bearer5378fb9bd91687516570322\" \\\n        -H \"charset:utf-8\" \\\n        -H \"xy-extra-frame.html\" \\\n        -H \"accept:*/*\" $url | \\\n        curl -s -u yanghe:8m. -d @- http://localhost:8081/moto\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#curl-debug","title":"curl debug","text":"<pre><code># -vvv\u200b\u4e5f\u200b\u884c\u200b\ncurl -s --trace - --dns-servers 1.1.1.1 https://www.baidu.com \n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#_10","title":"\u968f\u673a\u200b\u751f\u6210\u200b\u5bc6\u7801","text":"<pre><code>tr\u00a0-dc\u00a0'A-Za-z0-9_!@#$%^&amp;*()-+='\u00a0&lt;\u00a0/dev/urandom\u00a0|\u00a0head\u00a0-c\u00a012\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#nginx","title":"NGINX","text":""},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#nginx_1","title":"\u901a\u8fc7\u200b\u4fe1\u53f7\u200b\u63a7\u5236\u200bNGINX","text":"<p>NGINX\u200b\u9ed8\u8ba4\u200bmaster\u200b\u8fdb\u7a0b\u200bpid\u200b\u6587\u4ef6\u200b\u5728\u200b~~/usr/local/nginx/logs/nginx.pid~~\uff0c\u200b\u6211\u200b\u7684\u200bMint\u200b\u5728\u200b<code>/var/run/nginx.pid</code> ![[Snipaste_2023-07-12_14-17-01.png]] \u200b\u4e3b\u200b\u8fdb\u7a0b\u200b\u652f\u6301\u200b\u4ee5\u4e0b\u200b\u4fe1\u53f7\u200b\uff1a</p> <ul> <li>TERM,INT \uff1a\u200b\u5feb\u901f\u200b\u5173\u95ed\u200b</li> <li>QUIT\uff1a \u200b\u4f18\u96c5\u200b\u7684\u200b\u5173\u95ed\u200b</li> <li>HUP \uff1a\u200b\u66f4\u6539\u200b\u914d\u7f6e\u200b\uff0c\u200b\u4f7f\u7528\u200b\u65b0\u200b\u914d\u7f6e\u200b\u542f\u52a8\u200b\u8fdb\u7a0b\u200b\uff0c\u200b\u5173\u95ed\u200b\u65e7\u200b\u8fdb\u7a0b\u200b</li> <li>USR1\uff1a\u200b\u91cd\u65b0\u200b\u6253\u5f00\u200b\u65e5\u5fd7\u200b\u6587\u4ef6\u200b</li> <li>USR2\uff1a\u200b\u5347\u7ea7\u200b\u53ef\u6267\u884c\u6587\u4ef6\u200b</li> <li>WINCH\uff1a\u200b\u4f18\u96c5\u200b\u7684\u200b\u5173\u95ed\u200b\u5de5\u4f5c\u200b\u8fdb\u7a0b\u200b\uff0c\u200b\u5355\u4e2a\u200b\u5de5\u4f5c\u200b\u8fdb\u7a0b\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u7528\u200b\u4fe1\u53f7\u200b\u63a7\u5236\u200b\uff0c\u200b\u4e0d\u662f\u200b\u5fc5\u987b\u200b\u7684\u200b</li> <li>TERM, INT\uff1a\u200b\u5feb\u901f\u200b\u5173\u95ed\u200b</li> <li>QUIT\uff1a\u200b\u4f18\u96c5\u200b\u7684\u200b\u5173\u95ed\u200b</li> <li>\u200b\u91cd\u65b0\u200b\u6253\u5f00\u200b\u65e5\u5fd7\u200b\u6587\u4ef6\u200b</li> <li>WINCH\uff1a\u200b\u7ec8\u6b62\u200b\u5f02\u5e38\u200b\u8c03\u8bd5\u200b\uff08\u200b\u9700\u8981\u200b\u542f\u7528\u200bdebug_points\uff09</li> </ul>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#nginx_2","title":"\u66f4\u6539\u200bnginx\u200b\u914d\u7f6e","text":"<pre><code>ps axw -o pid,ppid,user,%cpu,vxz,wchan,command | egrep '(nginx|PID)'\nkill -HUP 33126\n</code></pre> <p>PID\u200b\u4e3a\u200b33126\u200b\u7684\u200b\u8fdb\u7a0b\u200b\u4ecd\u200b\u5728\u200b\u5de5\u4f5c\u200b\uff0c\u200b\u4e00\u6bb5\u65f6\u95f4\u200b\u540e\u200b\u5c31\u200b\u4f1a\u200b\u9000\u51fa\u200b</p>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#_11","title":"\u65e5\u5fd7\u200b\u6587\u4ef6\u200b\u8f6e\u8be2","text":"<pre><code>mv access.log access_bak.log\nkill\u00a0-USR1\u00a011604\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#_12","title":"\u52a8\u6001\u200b\u5347\u7ea7\u200b\u53ef\u6267\u884c\u6587\u4ef6","text":"<p>\u200b\u901a\u8fc7\u200b\u4fe1\u53f7\u200b\u63a7\u5236\u200b nginx - Nginx \u200b\u6559\u7a0b\u200b (hxstrive.com) \u200b\u4e0d\u5982\u200bkill\u200b\u6389\u200b\uff0c\u200b\u66ff\u6362\u200b</p>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#shc-shell","title":"shc \u200b\u52a0\u5bc6\u200bshell\u200b\u811a\u672c","text":"<pre><code>shc -r -f filename.sh\n# \u200b\u5f00\u59cb\u200b\u9759\u6001\u200b\u7f16\u8bd1\u200b\uff0c\u200b\u8ba9\u200b\u53ef\u4ee5\u200b\u8de8\u5e73\u53f0\u200b\u8fd0\u884c\u200b\ncc -Wall -lutil -static -o filename filename.x.c\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#docker","title":"Docker","text":"<pre><code>docker save -o docker-elk-filebeat.tar docker-elk-filebeat:latest # \u200b\u5bfc\u51fa\u200b\u955c\u50cf\u200b\n docker load -i docker-elk-filebeat.tar # \u200b\u5bfc\u5165\u200b\u955c\u50cf\u200b\ndocker kill \u200b\u5bb9\u5668\u200bID\u200b\u6216\u200b\u955c\u50cf\u200b\u540d\u5b57\u200b # \u200b\u5220\u9664\u200b\u5bb9\u5668\u200b\ndocker rmi \u200b\u955c\u50cf\u200b\u540d\u79f0\u200b # \u200b\u5220\u9664\u200b\u955c\u50cf\u200b\n\n# \u200b\u4e00\u6b21\u6027\u200b\u5220\u9664\u200b\u591a\u4e2a\u200b\u5bb9\u5668\u200b\u5b9e\u4f8b\u200b\uff1a\ndocker rm -f $(docker ps -a -q)\ndocker rm -a -q | xargs docker rm\n\ndocker export \u200b\u5bb9\u5668\u200bID &gt; \u200b\u6587\u4ef6\u540d\u200b.tar # \u200b\u5bfc\u51fa\u200b\u5bb9\u5668\u200b\n# \u200b\u6062\u590d\u200b\u5230\u200b\u65b0\u200b\u7684\u200b\u955c\u50cf\u200b\uff0c\u200b\u7136\u540e\u200b\u521b\u5efa\u200b\u65b0\u200b\u7684\u200b\u5bb9\u5668\u200b\ncat \u200b\u6587\u4ef6\u540d\u200b.tar | docker import - \ndocker run -it ...\n\n# \u200b\u5bb9\u5668\u200b\u6253\u5305\u200b\u6210\u200b\u955c\u50cf\u200b\ndocker commit -m \"\u200b\u63cf\u8ff0\u200b\" -a \"\u200b\u4f5c\u8005\u200b\" \u200b\u5bb9\u5668\u200bID:tag\n\n# \u200b\u5bb9\u5668\u200b\u5377\u200b\ndocker run -it --privileged=true -v /\u200b\u5bbf\u4e3b\u673a\u200b\u76ee\u5f55\u200b:/\u200b\u5bb9\u5668\u200b\u5185\u200b\u76ee\u5f55\u200b:rw \u200b\u955c\u50cf\u200b\u540d\u200b (\u200b\u9ed8\u8ba4\u200b\u662f\u200brw)\uff0c\u200b\u53ef\u4ee5\u200b\u6539\u4e3a\u200bro\uff08read only\uff09\uff0c\u200b\u5bb9\u5668\u200b\u5377\u200b\u53ea\u8bfb\u200b\uff0c\u200b\u4e0d\u53ef\u200b\u5199\u5165\u200b\u3002\u200b\u5bbf\u4e3b\u673a\u200b\u53ef\u4ee5\u200b\u5199\u5165\u200b\uff0c\u200b\u540c\u6b65\u200b\u7ed9\u200b\u5bb9\u5668\u200b\u3002\n\n# docker\u200b\u5377\u200b\u7ee7\u627f\u200b\ndocker run -it --privileged=true --volumes-from \u200b\u7236\u7c7b\u200b --name u2 ubuntu\n\n# \u200b\u67e5\u770b\u200b\u6240\u6709\u200b\u865a\u7384\u200b\u955c\u50cf\u200b\ndocker image ls -f dangling=true\n# \u200b\u5220\u9664\u200b\u6240\u6709\u200b\u865a\u7384\u200b\u955c\u50cf\u200b\ndocker image prune\n</code></pre> <p>Docker\u200b\u6302\u200b\u5728\u200b\u4e3b\u673a\u200b\u76ee\u5f55\u200b\u8bbf\u95ee\u200b\u5982\u679c\u200b\u51fa\u73b0\u200bconnot open directory \uff1aPermission denied \u200b\u89e3\u51b3\u529e\u6cd5\u200b\uff1a\u200b\u5728\u200b\u6302\u8f7d\u200b\u76ee\u5f55\u200b\u540e\u591a\u52a0\u200b\u4e00\u4e2a\u200b--privileged=true</p>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#docker-compose","title":"docker-compose","text":""},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#_13","title":"\u547d\u4ee4\u884c\u200b\u53c2\u6570","text":"<pre><code>docker-compose up # \u200b\u542f\u52a8\u200b\u6240\u6709\u200bdocker-compose\u200b\u670d\u52a1\u200b\ndocker-compose up -d # \u200b\u542f\u52a8\u200b\u6240\u6709\u200bdocker-compose\u200b\u670d\u52a1\u200b\u5728\u200b\u540e\u53f0\u200b\u8fd0\u884c\u200b\ndocker-compose down # \u200b\u505c\u6b62\u200b\u5e76\u200b\u5220\u9664\u200b\u5bb9\u5668\u200b\u3001\u200b\u7f51\u7edc\u200b\u3001\u200b\u5377\u200b\u3001\u200b\u955c\u50cf\u200b\ndocker-compose exec \u200b\u5bb9\u5668\u200bID /bin/bash # \u200b\u8fdb\u5165\u200b\u5bb9\u5668\u200b\u5185\u90e8\u200b\ndocker-compose ps # \u200b\u5c55\u793a\u200b\u5f53\u524d\u200bdocker-compose\u200b\u7f16\u6392\u200b\u8fc7\u200b\u7684\u200b\u8fd0\u884c\u200b\u7684\u200b\u6240\u6709\u200b\u5bb9\u5668\u200b\ndocker-compose top # \u200b\u5c55\u793a\u200b\u5f53\u524d\u200bdocker-compose\u200b\u7f16\u6392\u200b\u8fc7\u200b\u7684\u200b\u5bb9\u5668\u200b\u8fdb\u7a0b\u200b\ndocker-compose logs \u200b\u5bb9\u5668\u200bID # \u200b\u67e5\u770b\u200b\u5bb9\u5668\u200b\u8f93\u51fa\u200b\u65e5\u5fd7\u200b\ndocker-compose config # \u200b\u68c0\u67e5\u200b\u914d\u7f6e\u200b\ndocker-compose config -q # \u200b\u68c0\u67e5\u200b\u914d\u7f6e\u200b\uff0c\u200b\u6709\u200b\u95ee\u9898\u200b\u624d\u200b\u8f93\u51fa\u200b\ndocker-compose restart # \u200b\u91cd\u542f\u200b\u670d\u52a1\u200b\ndocker-compose start # \u200b\u542f\u52a8\u200b\u670d\u52a1\u200b\ndocker-compose stop # \u200b\u505c\u6b62\u200b\u670d\u52a1\u200b\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#yaml","title":"yaml \u200b\u6587\u4ef6\u200b\u7ea7","text":"<p>Docker Compose \u200b\u7684\u200b YAML \u200b\u6587\u4ef6\u200b\u5305\u542b\u200b4\u200b\u4e2a\u200b\u4e00\u7ea7\u200b key:version\u3001services\u3001networks\u3001volumes\u3002</p> <ul> <li>version \u200b\u662f\u200b\u5fc5\u987b\u200b\u6307\u5b9a\u200b\u7684\u200b\uff0c\u200b\u4f4d\u4e8e\u200b\u6587\u4ef6\u200b\u7684\u200b\u7b2c\u4e00\u884c\u200b\u3002\u200b\u5b83\u200b\u5b9a\u4e49\u200b\u4e86\u200b Compose \u200b\u6587\u4ef6\u683c\u5f0f\u200b\uff08\u200b\u4e3b\u8981\u200b\u662f\u200bAPI\uff09\u200b\u7684\u200b\u7248\u672c\u200b\u3002</li> <li>services \u200b\u7528\u4e8e\u200b\u5b9a\u4e49\u200b\u4e0d\u540c\u200b\u7684\u200b\u5e94\u7528\u670d\u52a1\u200b\u3002</li> <li>networks \u200b\u7528\u4e8e\u200b\u6307\u5f15\u200b Docker \u200b\u521b\u5efa\u200b\u65b0\u200b\u7684\u200b\u7f51\u7edc\u200b\u3002</li> <li>volumes \u200b\u7528\u4e8e\u200b\u6307\u5f15\u200b Docker \u200b\u6765\u200b\u521b\u5efa\u200b\u65b0\u200b\u7684\u200b\u5377\u200b\u3002</li> </ul>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#strip","title":"strip \u2014 \u200b\u4e22\u5f03\u200b\u5bf9\u8c61\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u7684\u200b\u7b26\u53f7\u200b\u548c\u200b\u5176\u4ed6\u200b\u6570\u636e","text":"<p>\u200b\u5728\u200b\u5d4c\u5165\u5f0f\u200b\u7528\u200b\u7684\u200b\u6bd4\u8f83\u200b\u591a\u200b\uff0c\u200b\u5d4c\u5165\u5f0f\u200b\u5b58\u50a8\u7a7a\u95f4\u200b\u4e00\u822c\u200b\u975e\u5e38\u200b\u5c0f\u200b\uff0c\u200b\u4e00\u822c\u200b\u670d\u52a1\u5668\u200b\u65e0\u6240\u8c13\u200b</p> <pre><code>yanghe@IkunOS:/tmp$ file hello_world\nhello_world: ELF 64-bit LSB executable, x86-64, version 1 (GNU/Linux), statically linked, BuildID[sha1]=0266e8c8b510581d97cd75551682b839d8c8ba47, for GNU/Linux 3.2.0, not stripped\nyanghe@IkunOS:/tmp$ du hello_world\n1024 hello_world\nyanghe@IkunOS:/tmp$ strip -s hello_world\nyanghe@IkunOS:/tmp$ du hello_world\n940 hello_world\nyanghe@IkunOS:/tmp$ file hello_world\nhello_world: ELF 64-bit LSB executable, x86-64, version 1 (GNU/Linux), statically linked, BuildID[sha1]=0266e8c8b510581d97cd75551682b839d8c8ba47, for GNU/Linux 3.2.0, stripped\n</code></pre> <p>\u200b\u53c2\u8003\u200b\uff1a</p> <ul> <li>strip\u200b\u547d\u4ee4\u200b | CS\u200b\u7b14\u8bb0\u200b (pynote.net)</li> <li>Linux \u200b\u53ef\u6267\u884c\u6587\u4ef6\u200b\u7626\u8eab\u200b\u6307\u4ee4\u200b strip \u200b\u4f7f\u7528\u200b\u793a\u4f8b\u200b - ENG\u200b\u516b\u6212\u200b - \u200b\u535a\u5ba2\u56ed\u200b (cnblogs.com)</li> </ul>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#nmcli","title":"nmcli","text":"<pre><code>nmcli con show\n nmcli con mod enp0s8 ipv4.addresses 192.168.56.119/24 ipv4.gateway 192.168.56.1 ipv4.method manual\n nmcli con up enp0s8\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#wget","title":"wget","text":"<p>\u200b\u65ad\u70b9\u7eed\u4f20\u200b+\u200b\u540e\u53f0\u200b\u4e0b\u8f7d\u200b</p> <pre><code>wget -b -c https://xxx\n</code></pre> <p>\u200b\u4e0b\u8f7d\u200b\u8fd9\u4e2a\u200b\u7ad9\u70b9\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u7684\u200b\u5168\u90e8\u200brpm</p> <p><pre><code>wget -r -np -L -nv -x -N mirrors.cmecloud.cn/bclinux/el8.2/BaseOS/x86_64/os/Packages/\n</code></pre> - \u200b\u53c2\u8003\u200b   - https://www.cnblogs.com/librarookie/p/14660645.html</p>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#pcregrep-pcre2grep","title":"pcregrep &amp; pcre2grep","text":"<p>\u200b\u4e13\u95e8\u200b\u4f7f\u7528\u200bPCRE\u200b\u89c4\u8303\u200b\u6765\u200b\u5b9e\u73b0\u200b\u7684\u200bgrep \u200b\u4f7f\u7528\u200b\u6b63\u5219\u8868\u8fbe\u5f0f\u200b\uff1a <pre><code>pcregrep  -o1 'echo(.*?)d' hello-world.sh\n</code></pre></p> <p>\u200b\u4e3b\u8981\u200b\u539f\u56e0\u200b\u662f\u200bgrep\u200b\u652f\u6301\u200b\u4e09\u79cd\u200b\u6b63\u5219\u8868\u8fbe\u5f0f\u200bBRE,ERE,PCRE\uff0c\u200b\u800c\u200b\u5176\u200b\u9ed8\u8ba4\u200b\u4f7f\u7528\u200b\u7684\u200b\u662f\u200bBRE\uff0c\u200b\u4f46\u200b\\d\u200b\u662f\u200b\u5b9a\u4e49\u200b\u5728\u200bPCRE\u200b\u4e2d\u200b\u7684\u200b\uff0c\u200b\u6240\u4ee5\u200bgrep\u200b\u9ed8\u8ba4\u200b\u662f\u200b\u4e0d\u200b\u652f\u6301\u200b\\d\u200b\u7684\u200b\u3002</p> <p>pcre2grep \u200b\u6709\u4e2a\u200b\u597d\u200b\u7528\u200b\u7684\u200b\u529f\u80fd\u200b\uff1a <pre><code>$ echo -e 'name:zhangsan,age:18 \\n name:lisi,age:20' | pcre2grep -O '$1 $2' 'name:(\\w+),age:(\\d+)'\nzhangsan 18\nlisi 20\n</code></pre> - \u200b\u53c2\u8003\u200b   - https://www.cnblogs.com/codelogs/p/16060372.html</p>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#sudo","title":"sudo","text":"<p>\u200b\u5224\u65ad\u200b\u662f\u4e0d\u662f\u200b\u5177\u6709\u200bsudo\u200b\u6743\u9650\u200b\uff1a <pre><code>sudo -l -U zhangsan\n</code></pre></p>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#netstat","title":"netstat","text":""},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#tcp","title":"\u7edf\u8ba1\u200bTCP\u200b\u8fde\u63a5\u200b\u72b6\u6001","text":"<pre><code>netstat -n | awk '/^tcp/ {++S[$NF]} END {for(a in S) print a, S[a]}'\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#ss","title":"ss","text":"<p>\u200b\u6307\u5b9a\u200b\u7aef\u53e3\u200b\u7edf\u8ba1\u200b\u8fde\u63a5\u6570\u200b</p> <pre><code>ss -ta src :6000\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#lsof","title":"lsof","text":""},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#_14","title":"\u7a0b\u5e8f\u200b\u6253\u5f00\u200b\u6587\u4ef6\u200b\u6570","text":"<pre><code>lsof -c nginx  | wc -l\n</code></pre> <pre><code>lsof | grep java |grep IPv | wc -l\nlsof | grep java |grep :6379 | wc -l\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#tail","title":"tail","text":""},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#tail-fio","title":"tail -f\u200b\u52a0\u200b\u7ba1\u9053\u200b\u547d\u4ee4\u200b\u540e\u200b\u4e0d\u80fd\u200b\u53ca\u65f6\u200b\u8f93\u51fa\u200b\u7684\u200b\u95ee\u9898\u200b\uff08IO\u200b\u7f13\u51b2","text":"<ol> <li>\u200b\u4f7f\u7528\u200bstdbuf\u200b\u547d\u4ee4\u200b <code>tail -fn0 a.log | stdbuf -oL grep \"F3 00\" | grep SR</code></li> <li>\u200b\u628a\u200b\u6807\u51c6\u200b\u8f93\u51fa\u200b\u91cd\u5b9a\u5411\u200b\u5230\u200b\u6807\u51c6\u200b\u9519\u8bef\u200b\u4e0a\u200b\uff0c\u200b\u5e76\u200b\u628a\u200b\u9519\u8bef\u200b\u4e5f\u200b\u7ed9\u200b\u7ba1\u9053\u200b\uff08\u200b\u56e0\u4e3a\u200bstderr\u200b\u662f\u200b\u65e0\u200b\u7f13\u51b2\u200b\u7684\u200b\uff09 <code>tail -f &gt;&amp;2 |&amp; awk</code></li> </ol>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#_15","title":"\u5176\u5b83","text":""},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#procpidstatus","title":"/proc/pid/status \u200b\u67e5\u770b\u200b\u5185\u5b58\u200b\u4f7f\u7528\u7387","text":"<p>/proc/[PID]/status\u200b\u6587\u4ef6\u200b\uff1a\u200b\u6bcf\u4e2a\u200b\u8fd0\u884c\u200b\u7684\u200b\u8fdb\u7a0b\u200b\u90fd\u200b\u5728\u200b/proc\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u6709\u200b\u4e00\u4e2a\u200b\u4ee5\u200b\u8fdb\u7a0b\u200bID\u200b\u547d\u540d\u200b\u7684\u200b\u76ee\u5f55\u200b\u3002\u200b\u8fdb\u5165\u200b\u7279\u5b9a\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u76ee\u5f55\u200b\uff08\u200b\u4f8b\u5982\u200b/proc/12345\uff09\uff0c\u200b\u7136\u540e\u200b\u67e5\u770b\u200bstatus\u200b\u6587\u4ef6\u200b\u3002\u200b\u5728\u200bstatus\u200b\u6587\u4ef6\u200b\u4e2d\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u627e\u5230\u200bVmRSS\u200b\u5b57\u200b\u6bb5\u200b\uff0c\u200b\u5b83\u200b\u8868\u793a\u200b\u8fdb\u7a0b\u200b\u5b9e\u9645\u200b\u5360\u7528\u200b\u7684\u200b\u7269\u7406\u200b\u5185\u5b58\u200b\u3002</p> <p><code>cat /proc/12345/status | grep VmRSS</code></p>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#shellstderrstdout","title":"shell\u200b\u5c06\u200bstderr\u200b\u8f93\u51fa\u200b\u5230\u200bstdout","text":"<pre><code># |&amp; == 2&gt;&amp;1\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#python3","title":"python3 \u200b\u5f00\u542f\u200b\u6587\u4ef6\u200b\u670d\u52a1\u5668","text":"<pre><code>python3 -m http.server\n</code></pre>"},{"location":"Linux/Linux%E5%91%BD%E4%BB%A4/%E6%88%91%E7%9A%84Linux%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#_16","title":"\u67e5\u770b\u200b\u8fdb\u7a0b\u200b\u7ebf\u7a0b\u200b&amp;\u200b\u8fdb\u7a0b\u200b\u8be6\u7ec6\u4fe1\u606f","text":"<pre><code>cat /proc/102551/status | more\nName: java\nUmask: 0002\nState: S (sleeping)\nTgid: 102551\nNgid: 0\nPid: 102551\nPPid: 102344\nTracerPid: 0\nUid: 1002 1002 1002 1002\nGid: 1002 1002 1002 1002\nFDSize: 4096\nGroups: 1002 \nVmPeak: 23980072 kB\nVmSize: 23818032 kB\nVmLck:        0 kB\nVmPin:        0 kB\nVmHWM:  9205188 kB\nVmRSS:  9057300 kB\nRssAnon:  9049584 kB\nRssFile:     7716 kB\nRssShmem:        0 kB\nVmData: 23656776 kB\nVmStk:      132 kB\nVmExe:        4 kB\nVmLib:    17316 kB\nVmPTE:    18692 kB\nVmSwap:    25872 kB\nThreads: 213\nSigQ: 0/127861\nSigPnd: 0000000000000000\nShdPnd: 0000000000000000\nSigBlk: 0000000000000004\nSigIgn: 0000000000000002\nSigCgt: 2000000181005ccd\nCapInh: 0000000000000000\nCapPrm: 0000000000000000\nCapEff: 0000000000000000\nCapBnd: 0000001fffffffff\nCapAmb: 0000000000000000\nSeccomp: 0\nSpeculation_Store_Bypass: vulnerable\nCpus_allowed: ffffffff,ffffffff,ffffffff,ffffffff,ffffffff\nCpus_allowed_list: 0-159\nMems_allowed: 00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000\n000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000\n,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00000000,00\n000000,00000000,00000001\nMems_allowed_list: 0\nvoluntary_ctxt_switches: 478194\nnonvoluntary_ctxt_switches: 170\n</code></pre>"},{"location":"Linux/%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/emqx/","title":"Emqx","text":""},{"location":"Linux/%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/emqx/#emqx","title":"emqx \u200b\u9759\u6001\u200b\u96c6\u7fa4\u200b\u7684\u200b\u642d\u5efa","text":"IP \u200b\u8282\u70b9\u200b\u540d\u79f0\u200b 10.130.21.232 nginx 10.130.21.233 emqx01 10.130.21.234 emqx02 10.130.21.235 emqx03 <p>\u200b\u4e0b\u8f7d\u200b\u955c\u50cf\u200b\uff0c\u200b\u8fd9\u4e2a\u200b\u955c\u50cf\u200b\u662f\u200b4.x\u200b\u7248\u672c\u200b\uff0c\u200b\u4e0d\u662f\u200b\u6700\u65b0\u200b\u7684\u200b5.x\u200b\u7248\u672c\u200b\uff0c\u200b\u4e0d\u8981\u200b\u4e0b\u8f7d\u200b<code>emqx:latest</code>\u200b\u955c\u50cf\u200b\uff0c\u200b\u8fd9\u4e2a\u200b\u955c\u50cf\u200b\u4e5f\u200b\u662f\u200b4.x\u200b\u7248\u672c\u200b\u3002 <pre><code>docker pull emqx/emqx\n</code></pre> \u200b\u5728\u200bemqx\u200b\u4e09\u4e2a\u200b\u8282\u70b9\u200b\u5206\u522b\u200b\u8fd0\u884c\u200b\uff1a <pre><code>docker run -itd \\\n    # \u200b\u5bb9\u5668\u200b\u8282\u70b9\u200b\u540d\u79f0\u200b(\u200b\u4fee\u6539\u200b)\n    --name emqx01 \\\n    # EMQX\u200b\u540d\u79f0\u200b\u548c\u200b\u5bb9\u5668\u200b\u8282\u70b9\u200b\u540d\u79f0\u200b\u4fdd\u6301\u4e00\u81f4\u200b(\u200b\u4fee\u6539\u200b)\n    -e EMQX_NAME=emqx01 \\\n    # \u200b\u672c\u200b\u673a\u200bIP \u200b\u5730\u5740\u200b(\u200b\u4fee\u6539\u200b)\n    -e EMQX_HOST=10.130.21.233 \\\n    # \u200b\u524d\u7aef\u200b\u9762\u677f\u200b\u767b\u5f55\u200b\u7528\u6237\u540d\u200b(\u200b\u4fee\u6539\u200b)\n    -e EMQX_DASHBOARD__DEFAULT_USER__LOGIN=admin \\\n    # \u200b\u524d\u7aef\u200b\u9762\u677f\u200b\u767b\u5f55\u200b\u7528\u6237\u200b\u5bc6\u7801\u200b(\u200b\u4fee\u6539\u200b)\n        -e EMQX_DASHBOARD__DEFAULT_USER__PASSWORD=admin123456 \\\n    -e EMQX_CLUSTER__DISCOVERY=static \\\n    -e EMQX_LOADED_PLUGINS=\"emqx_management,emqx_auth_mnesia,emqx_recon,emqx_retainer,emqx_dashboard\" \\\n    -e EMQX_ALLOW_ANONYMOUS=false \\\n    # \u200b\u96c6\u7fa4\u200b\u8282\u70b9\u200b(\u200b\u4fee\u6539\u200b)\n        -e EMQX_CLUSTER__STATIC__SEEDS=[emqx01@10.130.21.233,emqx02@10.130.21.234,emqx03@10.130.21.235] \\\n         # \u200b\u6388\u6743\u200b\u8bbf\u95ee\u200bmqtt 1883\u200b\u7aef\u53e3\u200b\u7528\u6237\u540d\u200b(\u200b\u4fee\u6539\u200b)\n    -e EMQX_AUTH__USER__1__USERNAME=admin \\\n        # \u200b\u6388\u6743\u200b\u8bbf\u95ee\u200bmqtt 1883\u200b\u7aef\u53e3\u200b\u7528\u6237\u200b\u5bc6\u7801\u200b(\u200b\u4fee\u6539\u200b)\n    -e EMQX_AUTH__USER__1__PASSWORD=admin123 \\\n        -v /etc/localtime:/etc/localtime:ro \\\n        --network=host \\\n    emqx/emqx\n\ndocker run -itd \\\n    --name emqx02 \\\n    -e EMQX_NAME=emqx02 \\\n    -e EMQX_HOST=10.130.21.234 \\\n    -e EMQX_DASHBOARD__DEFAULT_USER__LOGIN=admin \\\n        -e EMQX_DASHBOARD__DEFAULT_USER__PASSWORD=admin123456 \\\n    -e EMQX_CLUSTER__DISCOVERY=static \\\n    -e EMQX_LOADED_PLUGINS=\"emqx_management,emqx_auth_mnesia,emqx_recon,emqx_retainer,emqx_dashboard\" \\\n    -e EMQX_ALLOW_ANONYMOUS=false \\\n        -e EMQX_CLUSTER__STATIC__SEEDS=[emqx01@10.130.21.233,emqx02@10.130.21.234,emqx03@10.130.21.235] \\\n    -e EMQX_AUTH__USER__1__USERNAME=admin \\\n    -e EMQX_AUTH__USER__1__PASSWORD=admin123 \\\n        -v /etc/localtime:/etc/localtime:ro \\\n        --network=host \\\n    emqx/emqx\n\ndocker run -itd \\\n    --name emqx03 \\\n    -e EMQX_NAME=emqx03 \\\n    -e EMQX_HOST=10.130.21.235 \\\n    -e EMQX_DASHBOARD__DEFAULT_USER__LOGIN=admin \\\n        -e EMQX_DASHBOARD__DEFAULT_USER__PASSWORD=admin123456 \\\n    -e EMQX_CLUSTER__DISCOVERY=static \\\n    -e EMQX_LOADED_PLUGINS=\"emqx_management,emqx_auth_mnesia,emqx_recon,emqx_retainer,emqx_dashboard\" \\\n    -e EMQX_ALLOW_ANONYMOUS=false \\\n        -e EMQX_CLUSTER__STATIC__SEEDS=[emqx01@10.130.21.233,emqx02@10.130.21.234,emqx03@10.130.21.235] \\\n    -e EMQX_AUTH__USER__1__USERNAME=admin \\\n    -e EMQX_AUTH__USER__1__PASSWORD=admin123 \\\n        -v /etc/localtime:/etc/localtime:ro \\\n        --network=host \\\n    emqx/emqx\n</code></pre> nginx\u200b\u914d\u7f6e\u200b: <pre><code>docker pull nginx:latest\n</code></pre> \u200b\u4ece\u200bnginx\u200b\u5bb9\u5668\u200b\u590d\u5236\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u5230\u200b\u672c\u5730\u200b\u6765\u200b\u6302\u8f7d\u200b\uff0c\u200b\u5e76\u200b\u521b\u5efa\u200b\u65e5\u5fd7\u200b\u6587\u4ef6\u200b <pre><code>docker run -itd --name nginx nginx:latest\ndocker cp nginx:/etc/nginx /opt/docker-nginx-emqx/conf\ndocker rm -f nginx\nmkdir -p /opt/docker-nginx-emqx/logs\ntouch /opt/docker-nginx-emqx/logs/{access,error}.log\n</code></pre> \u200b\u590d\u5236\u200b\u4e0b\u9762\u200b\u7684\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u5230\u200b<code>/opt/docker-nginx-emqx/conf/nginx.conf</code>\uff0c\u200b\u8fdb\u884c\u200b\u4fee\u6539\u200bIP\u200b\u5730\u5740\u200b\u548c\u200b\u5177\u4f53\u200b\u66b4\u9732\u200b\u7684\u200b\u7aef\u53e3\u200b <pre><code>user  root;\nworker_processes  auto;\n\nerror_log  /var/log/nginx/error.log warn;\npid        /var/run/nginx.pid;\nworker_rlimit_nofile 655350;\n\nevents {\n    worker_connections  65535;\n}\n\n\nstream{\n        log_format proxy '$time_iso8601 '\n        '$remote_addr -&gt; :$server_port -&gt; $upstream_addr'\n        ' \"$protocol\" \"$status\"'\n        ' \"$upstream_connect_time\"';\n\n        upstream emqx_servers {\n                server 10.130.21.233:1883  max_fails=3 fail_timeout=30s;\n                server 10.130.21.234:1883  max_fails=3 fail_timeout=30s;\n                server 10.130.21.235:1883  max_fails=3 fail_timeout=30s;\n        }\n\n        server {\n                 listen 1883;\n                 proxy_pass emqx_servers;\n                 access_log /var/log/nginx/access.log proxy;\n                 error_log /var/log/nginx/error.log;\n        }\n}\n</code></pre> \u200b\u8fd0\u884c\u200b\u65b0\u200b\u7684\u200bnginx\u200b\u5bb9\u5668\u200b <pre><code>docker run -itd \\\n    --name nginx-emqx \\\n    -p 1883:1883 \\\n    -v /opt/docker-nginx-emqx/conf/:/etc/nginx/ \\\n    -v /opt/docker-nginx-emqx/logs/:/var/log/nginx \\\n    nginx:latest\n</code></pre> \u200b\u7136\u540e\u200b\u8bbf\u95ee\u200bemqx\u200b\u7684\u200bweb\u200b\u754c\u9762\u200b\u67e5\u770b\u200b\u96c6\u7fa4\u200b\u7684\u200b\u72b6\u6001\u200b\uff0chttp://10.130.21.233:18083\uff0c\u200b\u6216\u8005\u200b\u6267\u884c\u200b\u4ee5\u4e0b\u200b\u547d\u4ee4\u200b\u67e5\u770b\u200b\u96c6\u7fa4\u200b\u72b6\u6001\u200b\uff1a <pre><code>docker exec -it emqx01 sh -c \"emqx_ctl cluster status\"\n</code></pre> \u200b\u7136\u540e\u200b\u4e0b\u8f7d\u200bMQTTX\u200b\u6216\u8005\u200bMQTTBox\u200b\u8f6f\u4ef6\u200b\u8fdb\u884c\u200b\u6d4b\u8bd5\u200b\u53d1\u5e03\u200b\u6d88\u606f\u200b\uff0cMQTTBox windows\u200b\u5546\u5e97\u200b\u5c31\u200b\u6709\u200b\uff0c\u200b\u8fde\u63a5\u200bnginx\u200b\u7684\u200b\u5730\u5740\u200b</p>"},{"location":"Linux/%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/emqx/#docker-compose","title":"docker compose \u200b\u90e8\u7f72","text":"<p>\u200b\u76f4\u63a5\u200b\u7528\u200bdocker\u200b\u547d\u4ee4\u200b\u751f\u6210\u200bdocker compose\u200b\u7684\u200b\u6267\u884c\u200b\u6587\u4ef6\u200b\uff0c\u200b\u5728\u200b\u8fd9\u4e2a\u200b\u7f51\u7ad9\u200b\u751f\u6210\u200bcomposerize</p>"},{"location":"Linux/%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/emqx/#docker-compose_1","title":"docker compose \u200b\u4f2a\u200b\u96c6\u7fa4","text":"<pre><code>version: '3'\n\nservices:\n  emqx1:\n    image: emqx/emqx\n    environment:\n      - EMQX_NAME=emqx\n      - EMQX_HOST=node1.emqx.io\n      - EMQX_CLUSTER__DISCOVERY=static\n      - EMQX_CLUSTER__STATIC__SEEDS=emqx@node1.emqx.io, emqx@node2.emqx.io,emqx@node3.emqx.io\n    ports:\n      - 22211:18083\n      - 22212:1883\n      - 22213:8083\n    restart: always\n    volumes:\n      - /etc/localtime:/etc/localtime:ro\n    networks:\n      emqx-bridge:\n        aliases:\n          - node1.emqx.io\n\n  emqx2:\n    image: emqx/emqx\n    environment:\n      - EMQX_NAME=emqx\n      - EMQX_HOST=node2.emqx.io\n      - EMQX_CLUSTER__DISCOVERY=static\n      - EMQX_CLUSTER__STATIC__SEEDS=emqx@node1.emqx.io, emqx@node2.emqx.io,emqx@node3.emqx.io\n    ports:\n      - 22221:18083\n      - 22222:1883\n      - 22223:8083\n    restart: always\n    volumes:\n      - /etc/localtime:/etc/localtime:ro\n    networks:\n      emqx-bridge:\n        aliases:\n          - node2.emqx.io\n\n  emqx3:\n    image: emqx/emqx\n    environment:\n      - EMQX_NAME=emqx\n      - EMQX_HOST=node3.emqx.io\n      - EMQX_CLUSTER__DISCOVERY=static\n      - EMQX_CLUSTER__STATIC__SEEDS=emqx@node1.emqx.io, emqx@node2.emqx.io,emqx@node3.emqx.io\n    ports:\n      - 22231:18083\n      - 22232:1883\n      - 22233:8083\n    restart: always\n    volumes:\n      - /etc/localtime:/etc/localtime:ro\n    networks:\n      emqx-bridge:\n        aliases:\n          - node3.emqx.io\n\nnetworks:\n  emqx-bridge:\n    driver: bridge\n</code></pre>"},{"location":"Linux/%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/haproxy/","title":"Haproxy","text":""},{"location":"Linux/%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/haproxy/#haproxy","title":"haproxy","text":""},{"location":"Linux/%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/haproxy/#_1","title":"\u5b89\u88c5","text":"<pre><code>apt install  liblua5.4-dev lua5.4\nmake TARGET=linux-glibc STATIC=1 LDFLAGS=-static USE_LUA=1 USE_OPENSSL=1 USE_PCRE=1 USE_ZLIB=1 USE_PROMEX=1 USE_CPU_AFFINITY=1 PREFIX=/data/haproxy\nmake install PREFIX=/apps/haproxy\n</code></pre>"},{"location":"Linux/%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/haproxy/#_2","title":"\u521b\u5efa\u200b\u8d26\u53f7","text":"<pre><code>useradd -r -M -s /sbin/nologin haproxy\n</code></pre>"},{"location":"Linux/%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/haproxy/#haproxy_1","title":"\u5e73\u6ed1\u200b\u91cd\u542f\u200bhaproxy","text":"<p>\u200b\u4e0d\u200b\u5f71\u54cd\u200b\u73b0\u6709\u200b\u94fe\u63a5\u200b</p> <pre><code>haproxy -f haproxy.cfg -sf $(pgrep haproxy)\n</code></pre>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/","title":"Ansible","text":""},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#_1","title":"\u76f8\u5173\u200b\u547d\u4ee4","text":""},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#_2","title":"\u67e5\u770b\u200b\u4e3b\u673a\u200b\u6e05\u5355","text":"<p>\u200b\u6211\u200b\u89c9\u5f97\u200b\u53ef\u4ee5\u200b\u5b9a\u4e49\u200balias\uff0call\u200b\u90e8\u5206\u200b\u53ef\u4ee5\u200b\u66ff\u6362\u200b\u4e3a\u4e3b\u200b\u673a\u7ec4\u200b <pre><code> ansible-inventory all --graph --vars\n</code></pre></p>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#ansible-console","title":"ansible-console","text":"<pre><code>ansible-console\n# \u200b\u67e5\u770b\u200b\u5f53\u524d\u200b\u6240\u6709\u200b\u7684\u200b\u6267\u884c\u200b\u4e3b\u673a\u200b\nlist\n# \u200b\u5207\u6362\u200b\u5230\u200bwebservers\u200b\u7ec4\u200b\ncd webservers\nlist\n# \u200b\u6a21\u5757\u200b+\u200b\u53c2\u6570\u200b\u6267\u884c\u200b\u64cd\u4f5c\u200b\ncopy src=./test_file dest=/tmp\n</code></pre>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#_3","title":"\u4f7f\u7528\u200b\u524d\u63d0","text":""},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#todo","title":"\u6279\u91cf\u200b\u5206\u53d1\u200b\u516c\u94a5\u200btodo","text":""},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#sudo","title":"\u6279\u91cf\u200b\u6dfb\u52a0\u200b\u7528\u6237\u200b\u5230\u200bsudo","text":"<pre><code>ansible all -m lineinfile -a 'dest=/etc/sudoers line=\"ansible ALL=(ALL) NOPASSWD: ALL\" validate=\"visudo -cf %s\" state=present'\n</code></pre>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#_4","title":"\u6a21\u5757","text":""},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#_5","title":"\u547d\u4ee4\u200b\u6267\u884c\u200b\u6a21\u5757","text":"<p><code>raw</code>\u200b\u6a21\u5757\u200b\u548c\u200b<code>command</code>\u3001<code>shell</code>\u200b\u6a21\u5757\u200b\u4e0d\u540c\u200b\u7684\u200b\u662f\u200b\u5b83\u200b\u6ca1\u6709\u200b<code>chdir</code>\u3001<code>creates</code>\u3001<code>removes</code>\u200b\u53c2\u6570\u200b\uff0c<code>chdir</code>\u200b\u53c2\u6570\u200b\u7684\u200b\u4f5c\u7528\u200b\u5c31\u662f\u200b\u5148\u200b\u5207\u6362\u200b\u5230\u200b\u6307\u5b9a\u200b\u76ee\u5f55\u200b\uff0c\u200b\u518d\u200b\u6267\u884c\u200b\u540e\u9762\u200b\u7684\u200b\u547d\u4ee4\u200b\uff0c\u200b\u540e\u9762\u200b\u5f88\u591a\u200b\u6a21\u5757\u200b\u90fd\u200b\u6709\u200b\u8be5\u200b\u53c2\u6570\u200b\u3002</p> <ul> <li><code>creates</code>\uff1a \u200b\u4e00\u4e2a\u200b\u6587\u4ef6\u540d\u200b\uff0c\u200b\u5f53\u8be5\u200b\u6587\u4ef6\u200b\u5b58\u5728\u200b\uff0c\u200b\u5219\u200b\u8be5\u200b\u547d\u4ee4\u200b\u4e0d\u200b\u6267\u884c\u200b\uff0craw\u200b\u6ca1\u6709\u200b</li> <li><code>free_from</code>\uff1a\u200b\u8981\u200b\u6267\u884c\u200b\u7684\u200blinux\u200b\u547d\u4ee4\u200b</li> <li><code>chdir</code>: \u200b\u6267\u884c\u200b\u6307\u4ee4\u200b\u4e4b\u524d\u200b\uff0c\u200b\u5148\u200b\u5207\u6362\u200b\u5230\u200b\u6307\u5b9a\u200b\u7684\u200b\u76ee\u5f55\u200b\uff0craw\u200b\u6ca1\u6709\u200b</li> <li><code>remotes</code>: \u200b\u4e00\u4e2a\u200b\u6587\u4ef6\u540d\u200b\uff0c\u200b\u5f53\u200b\u6587\u4ef6\u200b\u4e0d\u200b\u5b58\u5728\u200b\uff0c\u200b\u547d\u4ee4\u200b\u4e0d\u200b\u6267\u884c\u200b\uff0craw\u200b\u6ca1\u6709\u200b</li> <li><code>executale</code>: \u200b\u5207\u6362\u200bshell\u200b\u6765\u200b\u6267\u884c\u200b\u6307\u4ee4\u200b\uff0c\u200b\u8be5\u200b\u6267\u884c\u200b\u8def\u5f84\u200b\u5fc5\u987b\u200b\u662f\u200b\u4e00\u4e2a\u200b\u7edd\u5bf9\u8def\u5f84\u200b\uff0c</li> </ul> <pre><code>ansible webservers -m command -a 'chdir=/tmp touch test.file'\nansible webservers -m shell -a 'chdir=/tmp touch test1.file'\n</code></pre> <p>\u200b\u8fd9\u4e2a\u200b\u4f1a\u200b\u6267\u884c\u200b\u5931\u8d25\u200b\uff1a <pre><code>ansible webservers -m raw -a 'chdir=/tmp touch test2.file'\n192.168.56.105 | CHANGED | rc=0 &gt;&gt;\nShared connection to 192.168.56.105 closed.\n</code></pre></p> <p><code>creates</code>\u200b\u548c\u200b<code>removes</code>\u200b\u7684\u200b\u533a\u522b\u200b\uff1a <pre><code>(ansible-env) [root@localhost ~]# ansible webservers -m command -a 'creates=/tmp/test.file uptime'\n192.168.56.105 | SUCCESS | rc=0 &gt;&gt;\nskipped, since /tmp/test.file existsDid not run command since '/tmp/test.file' exists\n(ansible-env) [root@localhost ~]# ansible webservers -m command -a 'removes=/tmp/test.file uptime'\n192.168.56.105 | CHANGED | rc=0 &gt;&gt;\n 14:58:12 up  5:10,  0 users,  load average: 0.00, 0.01, 0.05\n</code></pre></p>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#script","title":"script","text":"<pre><code>ansible all -m script -a '/tmp/script.sh'\n</code></pre>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#file","title":"file","text":"<p>file \u200b\u6a21\u5757\u200b\u9009\u9879\u200b\uff1a - force: \u200b\u4e24\u79cd\u200b\u60c5\u51b5\u200b\u4e0b\u200b\u5f3a\u5236\u200b\u521b\u5efa\u200b\u8f6f\u200b\u8fde\u63a5\u200b\uff1a     - \u200b\u6e90\u6587\u4ef6\u200b\u4e0d\u200b\u5b58\u5728\u200b\uff0c\u200b\u4f46\u200b\u4e4b\u540e\u200b\u4f1a\u200b\u5efa\u7acb\u200b     - \u200b\u94fe\u63a5\u200b\u5df2\u7ecf\u200b\u5b58\u5728\u200b\uff0c\u200b\u9700\u8981\u200b\u5148\u200b\u53d6\u6d88\u200b\uff0c\u200b\u7136\u540e\u200b\u521b\u5efa\u200b\u65b0\u200b\u7684\u200b     - \u200b\u9009\u9879\u200b: yes|no</p> <ul> <li>group\uff1a \u200b\u5b9a\u4e49\u200b\u6587\u4ef6\u200b\u5c5e\u7ec4\u200b</li> <li>mode\uff1a\u200b\u5b9a\u4e49\u200b\u6587\u4ef6\u200b\u7684\u200b\u6743\u9650\u200b</li> <li>owner\uff1a\u200b\u5b9a\u4e49\u200b\u6587\u4ef6\u200b\u7684\u200b\u5c5e\u4e3b\u200b</li> <li>path\uff1a\u200b\u5fc5\u200b\u9009\u9879\u200b\uff0c\u200b\u5b9a\u4e49\u200b\u6587\u4ef6\u200b/\u200b\u76ee\u5f55\u200b\u6240\u200b\u521b\u5efa\u200b\u7684\u200b\u8def\u5f84\u200b</li> <li>src\uff1a\u200b\u8981\u200b\u88ab\u200b\u521b\u5efa\u200b\u8f6f\u200b\u8fde\u63a5\u200b\u6e90\u6587\u4ef6\u200b\u8def\u5f84\u200b\uff0c\u200b\u53ea\u200b\u5e94\u7528\u200b\u4e8e\u200b<code>state=link</code>\u200b\u7684\u200b\u60c5\u51b5\u200b</li> <li>dest\uff1a\u200b\u88ab\u200b\u94fe\u63a5\u200b\u5230\u200b\u7684\u200b\u8def\u5f84\u200b\uff0c\u200b\u53ea\u200b\u5e94\u7528\u200b\u4e8e\u200b<code>state=link</code>\u200b\u7684\u200b\u60c5\u51b5\u200b</li> <li>state:<ul> <li>directory\uff1a\u200b\u76ee\u5f55\u200b\u4e0d\u200b\u5b58\u5728\u200b\uff0c\u200b\u521b\u5efa\u200b\u76ee\u5f55\u200b</li> <li>file\uff1a\u200b\u6587\u4ef6\u200b\u4e0d\u200b\u5b58\u5728\u200b\uff0c\u200b\u4e5f\u200b\u4e0d\u4f1a\u200b\u521b\u5efa\u200b</li> <li>link\uff1a\u200b\u521b\u5efa\u200b\u8f6f\u200b\u8fde\u63a5\u200b</li> <li>hard\uff1a\u200b\u521b\u5efa\u200b\u786c\u200b\u94fe\u63a5\u200b</li> <li>touch\uff1a\u200b\u5982\u679c\u200b\u6587\u4ef6\u200b\u4e0d\u200b\u5b58\u5728\u200b\uff0c\u200b\u5219\u200b\u4f1a\u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b\u65b0\u200b\u7684\u200b\u6587\u4ef6\u200b\uff0c\u200b\u5982\u679c\u200b\u6587\u4ef6\u200b\u6216\u200b\u76ee\u5f55\u200b\u5df2\u7ecf\u200b\u5b58\u5728\u200b\uff0c\u200b\u5219\u200b\u66f4\u65b0\u200b\u5176\u200b\u6700\u540e\u200b\u7684\u200b\u4fee\u6539\u200b\u65f6\u95f4\u200b</li> <li>absent\uff1a\u200b\u5220\u9664\u200b\u76ee\u5f55\u200b\uff0c\u200b\u6587\u4ef6\u200b\u6216\u200b\u53d6\u6d88\u200b\u94fe\u63a5\u200b</li> </ul> </li> </ul> <p>\u200b\u793a\u4f8b\u200b\uff1a <pre><code># \u200b\u6587\u4ef6\u200b\u6ca1\u200b\u5b58\u5728\u200b\u5219\u200b\u521b\u5efa\u200b\uff0c\u200b\u786e\u4fdd\u200b\u6587\u4ef6\u200b\u5b58\u5728\u200b\nansible all -m file -a 'path=/tmp/test.txt state=touch owner=root group=root mode=644'\n# \u200b\u521b\u5efa\u200b\u8f6f\u200b\u8fde\u63a5\u200b\nansible all -m file -a 'path=/tmp/test.txt dest=/tmp/test.txt.link state=link'\n# \u200b\u6587\u4ef6\u200b\u5982\u679c\u200b\u6ca1\u200b\u5b58\u5728\u200b\uff0c\u200b\u5c31\u200b\u4e0d\u200b\u521b\u5efa\u200b\nansible all -m file -a 'path=/tmp/test.txt state=file'\n# \u200b\u76ee\u5f55\u200b\u6ca1\u200b\u5b58\u5728\u200b\u521b\u5efa\u200b\u76ee\u5f55\u200b\nansible all -m file -a 'path=/tmp/test_dir state=directory'\n# \u200b\u9012\u5f52\u200b\u521b\u5efa\u200b\u76ee\u5f55\u200b\nansible all -m file -a 'path=/tmp/test_dir/dir1/dir2/dir3 state=directory'\n# \u200b\u5220\u9664\u200b\u6587\u4ef6\u200b\nansible all -m file -a 'path=/tmp/test_dir state=absent'\n</code></pre></p>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#copy","title":"copy","text":"<p>copy\u200b\u6a21\u5757\u200b\u7684\u200b\u9009\u9879\u200b\uff1a - backup\uff1a\u200b\u518d\u200b\u8986\u76d6\u200b\u4e4b\u524d\u200b\u5c06\u200b\u6587\u4ef6\u200b\u5907\u4efd\u200b - content\uff1a\u200b\u7528\u4e8e\u200b\u4ee3\u66ff\u200b\u201csrc\u201d\uff0c\u200b\u76f4\u63a5\u200b\u6307\u5b9a\u200b\u5b57\u7b26\u200b\u5411\u200b\u6587\u4ef6\u200b\u5199\u5165\u200b\u5185\u5bb9\u200b - dest\uff1a\u200b\u5fc5\u200b\u9009\u9879\u200b\uff0c\u200b\u590d\u5236\u5230\u200b\u8fdc\u7a0b\u200b\u4e3b\u673a\u200b\u7684\u200b\u76ee\u6807\u76ee\u5f55\u200b - force\uff1a\u200b\u5982\u679c\u200b\u76ee\u6807\u200b\u4e3b\u673a\u200b\u5305\u542b\u200b\u8be5\u200b\u6587\u4ef6\u200b\uff0c\u200b\u4f46\u200b\u5185\u5bb9\u200b\u4e0d\u540c\u200b\uff0c\u200b\u4e3a\u200byes\uff0c\u200b\u5219\u200b\u5f3a\u5236\u200b\u8986\u76d6\u200b\u3002\u200b\u5219\u200b\u76ee\u6807\u200b\u4e3b\u673a\u200b\u6ca1\u6709\u200b\u8be5\u200b\u6587\u4ef6\u200b\uff0c\u200b\u624d\u200b\u590d\u5236\u200b\uff0c\u200b\u4e3a\u200bno\u3002\u200b\u9ed8\u8ba4\u200b\u4e3a\u200byes - other\uff1a\u200b\u6240\u6709\u200bfile\u200b\u6a21\u5757\u200b\u91cc\u200b\u7684\u200b\u76f8\u5173\u200b\u6587\u4ef6\u5c5e\u6027\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u5728\u200b\u8fd9\u7528\u200b - src\uff1a\u200b\u672c\u5730\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b/\u200b\u76ee\u5f55\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u4e3a\u200b\u7edd\u5bf9\u200b\u76f8\u5bf9\u200b\u3002\u200b\u590d\u5236\u200b\u76ee\u5f55\u200b\u65f6\u200b\u672c\u5730\u200b\u76ee\u5f55\u200b\u540e\u5e26\u200b\u201d/\u201c\u200b\u662f\u200b\u590d\u5236\u200b\u672c\u5730\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u7684\u200b\u6240\u6709\u200b\u6587\u4ef6\u200b\u5230\u200b\u76ee\u6807\u76ee\u5f55\u200b\u3002 <pre><code># \u200b\u590d\u5236\u200b\u6587\u4ef6\u200b\uff0c\u200b\u5982\u679c\u200b\u6587\u4ef6\u200b\u5df2\u7ecf\u200b\u5b58\u5728\u200b\u4e14\u200b\u6ca1\u6709\u200b\u6539\u52a8\u200b\uff0c\u200b\u5219\u200b\u4e0d\u4f1a\u200b\u590d\u5236\u200b\nansible all -m copy -a 'src=.ansible.cfg dest=/tmp/ owner=ansible group=ansible mode=755'\n# \u200b\u5982\u679c\u200b\u590d\u5236\u200b\u7684\u200b\u6587\u4ef6\u200b\u5df2\u200b\u5b58\u5728\u200b\u4e14\u200b\u6ca1\u6709\u200b\u6539\u52a8\u200b\uff0c\u200b\u90a3\u4e48\u200b\u5c06\u200b\u4e0d\u4f1a\u200b\u590d\u5236\u200b\uff0c\u200b\u4e5f\u200b\u5c31\u200b\u4e0d\u4f1a\u200b\u5907\u4efd\u200b\u4e86\u200b\uff0c\u200b\u9664\u975e\u200b\u6587\u4ef6\u200b\u5df2\u7ecf\u200b\u6539\u53d8\u200b\nansible all -m copy -a 'backup=yes src=.ansible.cfg dest=/tmp/'\n# \u200b\u6587\u4ef6\u200b\u5b58\u5728\u200b\u5219\u200b\u8986\u76d6\u200b\u5199\u5165\u200b\uff0c\u200b\u6587\u4ef6\u200b\u6ca1\u6709\u200b\u5b58\u5728\u200b\u521b\u5efa\u200b\u5e76\u200b\u5199\u5165\u200b\nansible all -m copy -a 'content=\"just a test!\" dest=/tmp/test.txt'\n# \u200b\u590d\u5236\u200b\u6574\u4e2a\u200b\u76ee\u5f55\u200b\u5230\u200b\u76ee\u6807\u200b\u4e3b\u673a\u200b\nansible all -m copy -a 'src=/tmp/test_dir dest=/tmp'\n# \u200b\u590d\u5236\u200b\u76ee\u5f55\u200b\u4e0b\u200b\u7684\u200b\u6240\u6709\u200b\u6587\u4ef6\u200b\u5230\u200b\u76ee\u6807\u200b\u4e3b\u673a\u200b\nansible all -m copy -a 'src=/tmp/test_dir/ test=/tmp'\n# \u200b\u590d\u5236\u200b\u4e4b\u524d\u200b\u5148\u200b\u9a8c\u8bc1\u200b\uff1f\nansible 192.168.8.120 -m copy -a \"src=/mine/sudoers dest=/etc/sudoers validate='visudo -cf %s'\"\n</code></pre></p>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#yum","title":"yum","text":"<p>yum\u200b\u6a21\u5757\u200b\u9009\u9879\u200b\uff1a - name\uff1a\u200b\u5b89\u88c5\u200b\u8f6f\u4ef6\u5305\u200b\u540d\u79f0\u200b\uff0c\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u4f20\u9012\u200burl\u200b\u6216\u8005\u200b\u672c\u5730\u200b\u7684\u200brpm\u200b\u5305\u200b\u8def\u5f84\u200b - state\uff1a\u200b\u72b6\u6001\u200b\uff08present\uff0cabsent\uff0clatest\uff09 <pre><code># \u200b\u5347\u7ea7\u200b\nansible all -m yum -a 'name=httpd state=latest'\n# \u200b\u5b89\u88c5\u200b\nansible all -m yum -a 'name=httpd state=precent'\n# \u200b\u5b89\u88c5\u200b\nansible test -m yum -a 'name=http://nginx.org/packages/centos/6/noarch/RPMS/nginx-release-centos-6-0.el6.ngx.noarch.rpm state=present'\n# \u200b\u5378\u8f7d\u200b\nansible all -m yum -a 'name=httpd state=absent'\n</code></pre></p>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#service","title":"service","text":"<p>service\u200b\u6a21\u5757\u200b\u9009\u9879\u200b\uff1a - argument\uff1a\u200b\u7ed9\u200b\u547d\u4ee4\u884c\u200b\u63d0\u4f9b\u200b\u9009\u9879\u200b - enable\uff1a\u200b\u662f\u5426\u200b\u5f00\u673a\u200b\u542f\u52a8\u200b yes|no - name\uff1a\u200b\u5fc5\u200b\u9009\u9879\u200b\uff0c\u200b\u670d\u52a1\u200b\u540d\u79f0\u200b - pattern\uff1a\u200b\u5b9a\u4e49\u200b\u4e00\u4e2a\u200b\u6a21\u5f0f\u200b\uff0c\u200b\u5982\u679c\u200b\u901a\u8fc7\u200bstatus\u200b\u6307\u4ee4\u200b\u72b6\u6001\u200b\u65f6\u200b\uff0c\u200b\u6ca1\u6709\u54cd\u5e94\u200b\uff0c\u200b\u5c31\u200b\u901a\u8fc7\u200bps\u200b\u6307\u4ee4\u200b\u5728\u200b\u8fdb\u7a0b\u200b\u4e2d\u200b\u6839\u636e\u200b\u8be5\u200b\u6a21\u5f0f\u200b\u8fdb\u884c\u200b\u67e5\u627e\u200b\uff0c\u200b\u5982\u679c\u200b\u5339\u914d\u200b\u5230\u200b\uff0c\u200b\u5219\u200b\u8ba4\u4e3a\u200b\u8be5\u200b\u670d\u52a1\u200b\u4ecd\u200b\u5728\u200b\u8fd0\u884c\u200b - runlevel\uff1a\u200b\u8fd0\u884c\u200b\u7ea7\u522b\u200b - sleep\uff1a\u200b\u5982\u679c\u200b\u6267\u884c\u200b\u4e86\u200brestarted\uff0c\u200b\u5219\u200b\u4f1a\u200b\u5728\u200bstop\u200b\u548c\u200bstart\u200b\u4e4b\u95f4\u200bsleep\u200b\u51e0\u79d2\u200b - state\uff1a\u200b\u5bf9\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u64cd\u4f5c\u200b\uff0cstarted\uff0cstopped\uff0crestarted\uff0creloaded - daemon_reload\uff1a\u200b\u9488\u5bf9\u200bsystemd\u200b\u7684\u200b\u7cfb\u7edf\u200b\uff0c\u200b\u91cd\u8f7d\u200bsystemd\u200b\u914d\u7f6e\u200b\uff0cyes|no <pre><code>ansible all -m service -a 'name=httpd state=started enable=yes'\nansible all -m service -a 'name=network state=restarted args=eth0'\n</code></pre></p>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#yum_1","title":"yum","text":"<p>yum\u200b\u6a21\u5757\u200b\u9009\u9879\u200b\uff1a - backup\uff1a\u200b\u5bf9\u200b\u8fdc\u7a0b\u200b\u4e3b\u673a\u200b\u539f\u5148\u200b\u7684\u200bcron\u200b\u4fee\u6539\u200b\u4e4b\u524d\u200b\u505a\u200b\u5907\u4efd\u200b - cron_file: \u200b\u7528\u8be5\u200b\u6587\u4ef6\u200b\u66ff\u6362\u200b\u76ee\u6807\u200b\u4e3b\u673a\u200b\u7684\u200bcron\u200b\u5217\u8868\u200b - day\uff1a\u200b\u65e5\u200b\uff081-31\uff09 - hour\uff1a\u200b\u5c0f\u65f6\u200b\uff080-23\uff09 - minute\uff1a\u200b\u5206\u949f\u200b\uff080-59\uff09 - month: \u200b\u6708\u200b(1-12) - weekday\uff1a\u200b\u5468\u200b\uff080-7, *) - job\uff1a\u200b\u8981\u200b\u6267\u884c\u200b\u7684\u200b\u4efb\u52a1\u200b\uff0c\u200b\u4f9d\u8d56\u4e8e\u200b<code>state=precent</code> - name\uff1a\u200b\u5bf9\u200b\u4efb\u52a1\u200b\u7684\u200b\u63cf\u8ff0\u200b - special_time\uff1a\u200b\u6307\u5b9a\u200b\u4ec0\u4e48\u200b\u65f6\u5019\u200b\u8fd0\u884c\u200b\uff0c\u200b\u53c2\u6570\u200b\uff1areboot/yearly/annually/monthly/weekly/daily/hourly - state\uff1a\u200b\u521b\u5efa\u200b\u8fd8\u662f\u200b\u5220\u9664\u200b\u4efb\u52a1\u200b - user\uff1a\u200b\u4ee5\u200b\u54ea\u4e2a\u200b\u7528\u6237\u200b\u8eab\u4efd\u200b\u6267\u884c\u200b</p> <pre><code># \u200b\u6dfb\u52a0\u200b\u4e00\u4e2a\u200b\u91cd\u542f\u200b\u65f6\u5019\u200b\u6267\u884c\u200b\u7684\u200b\u5b9a\u65f6\u200b\u4efb\u52a1\u200b\nansible all -m cron -a 'name=\"a job for reboot\" special_time=reboot job=\"/home/ansible/hello-world.sh\"'\n# \u200b\u5220\u9664\u200b\u4e0a\u9762\u200b\u7684\u200b\u5b9a\u65f6\u200b\u4efb\u52a1\u200b\nansible all -m cron -a 'name=\"a job for reboot\" special_time=reboot state=absent'\n# \u200b\u6bcf\u4e2a\u200b\u661f\u671f\u4e8c\u200b\u7684\u200b12\u200b\u70b9\u200b\u6267\u884c\u200byum autoupdate\nansible all -m cron -a 'name=\"yum autoupdate\" weekday=\"2\" minute=0 hour=12 user=root'\nansible all -m cron -a 'backup=True name=test minute=0 hour=\"5,2\" job=\"ls -alsh &gt;/dev/null\"'\nansible all -m cron -a 'cron_file=ansible_yum_autoupdate state=absent'\n</code></pre>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#user-group","title":"user &amp; group","text":"<p>user\u200b\u6a21\u5757\u200b\u8c03\u7528\u200b\u7684\u200b\u662f\u200b<code>useradd</code>\u3001<code>userdel</code>\u3001<code>usermod</code>\u200b\u547d\u4ee4\u200b\uff0cgroup\u200b\u6a21\u5757\u200b\u8c03\u7528\u200b\u7684\u200b\u662f\u200b<code>gropadd</code>\u3001<code>groupdel</code>\u3001<code>groupmod</code>\u200b\u547d\u4ee4\u200b</p>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#user","title":"user","text":"<pre><code># \u200b\u521b\u5efa\u200b\u6309\u200b\u4e00\u4e2a\u200b\u7528\u6237\u200b\uff0c\u200b\u5e76\u200b\u76f4\u63a5\u200b\u6dfb\u52a0\u200b\u5230\u200broot\u200b\u7ec4\u200b\u91cc\u9762\u200b\uff0c\u200b\u5e76\u4e14\u200b\u6307\u5b9a\u200bUID\nansible all -m user -a 'name=\"yanghe\" comment=\"yanghe user\" uid=1002 group=root'\n# \u200b\u5220\u9664\u200b\u4e0a\u9762\u200b\u521b\u5efa\u200b\u7684\u200b\u7528\u6237\u200b\nansible all -m user -a 'name=\"yanghe\" remove=yes state=absent'\n# \u200b\u751f\u6210\u200b\u516c\u94a5\u200b\u548c\u200b\u79c1\u94a5\u200b\u6587\u4ef6\u200b\nansible all -m user -a 'generate_ssh_key=yes ssh_key_bits=2048 ssh_key_file=.ssh/id_rsa'\n</code></pre> <p>\u200b\u6307\u5b9a\u200b<code>password</code>\u200b\u7684\u200b\u9009\u9879\u200b\u65f6\u5019\u200b\u4e0d\u80fd\u200b\u4f7f\u7528\u200b\u660e\u6587\u200b\u5bc6\u7801\u200b\uff0c\u200b\u9700\u8981\u200b\u5148\u200b\u8fdb\u884c\u200b\u52a0\u5bc6\u200b\uff0c\u200b\u7136\u540e\u200b\u628a\u200b\u52a0\u5bc6\u200b\u7684\u200b\u5b57\u7b26\u4e32\u200b\u653e\u5230\u200b<code>password</code>\u200b\u53c2\u6570\u200b\u3002 <pre><code>echo \"123456\" | openssl passwd -1 -salt $(&lt; /dev/urandom tr -dc '[:alnum:]' | head -c 32) -stdin\n\n# \u200b\u7528\u200b\u4e0a\u9762\u200b\u7684\u200b\u52a0\u5bc6\u200b\u5b57\u7b26\u200b\u6765\u200b\u521b\u5efa\u200b\u7528\u6237\u200b\nansible all -m user -a 'name=foo password=\"afadfafa\"'\n</code></pre></p> <p>\u200b\u4e0d\u540c\u200b\u7684\u200b\u53d1\u884c\u7248\u200b\u9ed8\u8ba4\u200b\u4f7f\u7528\u200b\u7684\u200b\u52a0\u5bc6\u200b\u65b9\u5f0f\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u6709\u200b\u533a\u522b\u200b\uff0c\u200b\u5177\u4f53\u200b\u53ef\u4ee5\u200b\u67e5\u770b\u200b/etc/login.defs\u200b\u6587\u4ef6\u200b\u786e\u8ba4\u200b\uff0ccentos 6.5\u200b\u7248\u672c\u200b\u4f7f\u7528\u200b\u7684\u200b\u662f\u200bSHA512\u200b\u52a0\u5bc6\u7b97\u6cd5\u200b</p>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#group","title":"group","text":"<pre><code>group\uff1a name=somegroup state=precent\n</code></pre>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#synchronize","title":"synchronize","text":"<p>sysnc\u200b\u540c\u6b65\u200b\u6a21\u5757\u200b</p>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#filesystem","title":"filesystem\u200b\u6a21\u5757","text":"<p>\u200b\u5728\u200b\u5757\u200b\u8bbe\u5907\u200b\u4e0a\u200b\u521b\u5efa\u200b\u6587\u4ef6\u7cfb\u7edf\u200b\uff0c\u200b\u9009\u9879\u200b\uff1a - dev\uff1a\u200b\u76ee\u6807\u200b\u5757\u200b\u8bbe\u5907\u200b - force\uff1a\u200b\u5728\u200b\u4e00\u4e2a\u200b\u5df2\u6709\u200b\u6587\u4ef6\u7cfb\u7edf\u200b\u7684\u200b\u8bbe\u5907\u200b\u4e0a\u200b\u5f3a\u5236\u200b\u521b\u5efa\u200b - fstype: \u200b\u6587\u4ef6\u7cfb\u7edf\u200b\u7684\u200b\u7c7b\u578b\u200b - opts\uff1a\u200b\u4f20\u9012\u200b\u7ed9\u200bmkfs\u200b\u547d\u4ee4\u200b\u7684\u200b\u9009\u9879\u200b</p> <pre><code>ansible all -m filesystem -a 'fstype=ext2 dev=/dev/sdb1 force=yes'\nansible all -m filesystem -a 'fstype=ext4 dev=/dev/sdb1 opts=\"-cc\"'\n</code></pre>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#mount","title":"mount \u200b\u6a21\u5757","text":"<p>\u200b\u6302\u8f7d\u200b\u8bbe\u5907\u200b\u6a21\u5757\u200b\uff0c\u200b\u76f8\u5173\u200b\u9009\u9879\u200b\uff1a - dump - fstype: \u200b\u5fc5\u200b\u9009\u9879\u200b\uff0c\u200b\u6302\u8f7d\u200b\u6587\u4ef6\u200b\u7684\u200b\u7c7b\u578b\u200b - name\uff1a\u200b\u5fc5\u200b\u9009\u9879\u200b\uff0c\u200b\u6302\u8f7d\u200b\u70b9\u200b - opts\uff1a\u200b\u4f20\u9012\u200b\u7ed9\u200bmount\u200b\u547d\u4ee4\u200b\u7684\u200b\u53c2\u6570\u200b - src\uff1a\u200b\u5fc5\u200b\u9009\u9879\u200b\uff0c\u200b\u8981\u200b\u6302\u8f7d\u200b\u7684\u200b\u6587\u4ef6\u200b - state\uff1a\u200b\u5fc5\u200b\u9009\u9879\u200b     - present\uff1a\u200b\u53ea\u200b\u5904\u7406\u200bfstab\u200b\u4e2d\u200b\u7684\u200b\u914d\u7f6e\u200b     - absent: \u200b\u5220\u9664\u200b\u6302\u8f7d\u200b\u70b9\u200b     - mounted\uff1a\u200b\u81ea\u52a8\u200b\u521b\u5efa\u200b\u6302\u8f7d\u200b\u70b9\u200b\u8fdb\u884c\u200b\u6302\u8f7d\u200b     - umounted\uff1a\u200b\u5378\u8f7d\u200b <pre><code>name=/mnt/dvd src=/dev/sr0 fstype=iso9660 opts=ro state=present\nname=/srv/disk src='LABEL=SOME_LABEL' state=present\nname=/home src='UUID=b3e48f45-f933-4c8e-a700-22a159ec9077' opts=noatime state=present\n\nansible test -a 'dd if=/dev/zero of=/disk.img bs=4k count=1024'\nansible test -a 'losetup /dev/loop0 /disk.img'\nansible test -m filesystem 'fstype=ext4 force=yes opts=-F dev=/dev/loop0'\nansible test -m mount 'name=/mnt src=/dev/loop0 fstype=ext4 state=mounted opts=rw'\n</code></pre></p>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#get_url","title":"get_url","text":"<p>\u200b\u8be5\u200b\u6a21\u5757\u200b\u4e3b\u8981\u200b\u4ece\u200bhttp\u3001ftp\u3001https\u200b\u670d\u52a1\u5668\u200b\u4e0a\u200b\u4e0b\u8f7d\u200b\u6587\u4ef6\u200b\uff0c\u200b\u9009\u9879\u200b\u5982\u4e0b\u200b\uff1a - sha256sum\uff1a\u200b\u4e0b\u8f7d\u200b\u5b8c\u6210\u200b\u540e\u200b\u8fdb\u884c\u200bsha256\u200b\u6821\u9a8c\u200b - timeout\uff1a\u200b\u4e0b\u8f7d\u200b\u8d85\u65f6\u200b\uff0c\u200b\u9ed8\u8ba4\u200b\u4e3a\u200b10\u200b\u79d2\u200b - url\uff1a\u200b\u4e0b\u8f7d\u200b\u7684\u200burl - url_password\u3001url_username\uff1a\u200b\u4e3b\u8981\u200b\u7528\u4e8e\u200b\u6821\u9a8c\u200b\u7528\u6237\u540d\u200b\u5bc6\u7801\u200b\u6821\u9a8c\u200b - user_proxy\uff1a\u200b\u662f\u5426\u200b\u4f7f\u7528\u200b\u4ee3\u7406\u200b\uff0c\u200b\u4ee3\u7406\u200b\u9700\u8981\u200b\u5728\u200b\u73af\u5883\u200b\u4e2d\u200b\u5b9a\u4e49\u200b</p> <p>\u200b\u793a\u4f8b\u200b\uff1a <pre><code>ansible all -m get_url -a 'url=https://repo.huaweicloud.com/python/3.10.12/Python-3.10.12.tar.xz dest=/home/ansible'\nget_url: url=http://example.com/path/file.conf dest=/etc/foo.conf mode=0440\nget_url: url=http://example.com/path/file.conf dest=/etc/foo.conf sha256sum=b5bb9d8014a0f9b1d61e21e796d78dccdf1352f23cd32812f4850b878ae4944c\n</code></pre></p>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#unarchive","title":"unarchive","text":"<p>\u200b\u7528\u4e8e\u200b\u89e3\u538b\u200b\u6587\u4ef6\u200b\uff0c\u200b\u6a21\u5757\u200b\u9009\u9879\u200b\u5982\u4e0b\u200b\uff1a - copy\uff1a\u200b\u5728\u200b\u89e3\u538b\u200b\u6587\u4ef6\u200b\u4e4b\u524d\u200b\uff0c\u200b\u662f\u5426\u200b\u5148\u200b\u5c06\u200b\u6587\u4ef6\u200b\u590d\u5236\u5230\u200b\u8fdc\u7a0b\u200b\u4e3b\u673a\u200b\uff0cyes/no\uff0c\u200b\u9ed8\u8ba4\u200b\u4e3a\u200byes\uff0c\u200b\u82e5\u200b\u4e3a\u200bno\uff0c\u200b\u5219\u200b\u8981\u6c42\u200b\u76ee\u6807\u200b\u4e3b\u673a\u200b\u5fc5\u987b\u200b\u6709\u200b\u8be5\u200b\u538b\u7f29\u6587\u4ef6\u200b - creates\uff1a\u200b\u6307\u5b9a\u200b\u4e00\u4e2a\u200b\u6587\u4ef6\u540d\u200b\uff0c\u200b\u5f53\u8be5\u200b\u6587\u4ef6\u200b\u5b58\u5728\u200b\u65f6\u200b\uff0c\u200b\u5219\u200b\u89e3\u538b\u200b\u6307\u4ee4\u200b\u4e0d\u200b\u6267\u884c\u200b - dest\uff1a\u200b\u8fdc\u7a0b\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u89e3\u538b\u200b\u8def\u5f84\u200b - group\uff1a\u200b\u89e3\u538b\u200b\u5b8c\u540e\u200b\u6587\u4ef6\u76ee\u5f55\u200b\u7684\u200b\u5c5e\u4e3b\u200b - list_files\uff1a\u200b\u82e5\u200b\u4e3a\u200byes\uff0c\u200b\u5219\u200b\u4f1a\u200b\u5217\u51fa\u200b\u538b\u7f29\u5305\u200b\u91cc\u200b\u7684\u200b\u6587\u4ef6\u200b\uff0c\u200b\u9ed8\u8ba4\u200b\u4e3a\u200bno - mode\uff1a\u200b\u6307\u5b9a\u200b\u8d4b\u4e88\u200b\u6587\u4ef6\u200b\u6743\u9650\u200b\u7801\u200b - owner\uff1a\u200b\u89e3\u538b\u200b\u540e\u200b\u6587\u4ef6\u200b\u7684\u200b\u76ee\u5f55\u200b\u5c5e\u4e3b\u200b <pre><code># \u200b\u4ece\u200burl\u200b\u4e0b\u8f7d\u200b\u5e76\u200b\u89e3\u538b\u200b\uff0c\u200b\u4e3b\u8981\u200b\u662f\u200bremote_src\u200b\u4e3a\u200byes\u200b\u9009\u9879\u200b\nansible all -m unarchive -a 'src=https://repo.huaweicloud.com/python/3.10.12/Python-3.10.12.tar.xz dest=/home/ansible list_files=yes remote_src=yes'\n# \u200b\u4ece\u200b\u672c\u5730\u200b\u590d\u5236\u5230\u200b\u8fdc\u7a0b\u200b\u4e3b\u673a\u200b\u89e3\u538b\u200b\nansible all -m unarchive -a 'src=foo.tgz dest=/var/lib/foo'\n# \u200b\u4ece\u200b\u8fdc\u7a0b\u200b\u4e3b\u673a\u200b\u89e3\u538b\u200b\u5230\u200b\u6307\u5b9a\u200b\u76ee\u5f55\u200b\nansible all -m unarchive -a 'src=/tmp/foo.zip dest=/usr/local/bin copy=no'\n</code></pre></p>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#debug","title":"debug","text":"<p>\u200b\u7528\u4e8e\u200b\u8c03\u8bd5\u200b\uff0c\u200b\u6a21\u5757\u200b\u9009\u9879\u200b\u5982\u4e0b\u200b\uff1a - msg\uff1a\u200b\u53ef\u4ee5\u200b\u8f93\u51fa\u200b\u5b57\u7b26\u4e32\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u8f93\u51fa\u200b\u53d8\u91cf\u503c\u200b\uff0c\u200b\u53d8\u91cf\u200b\u8c03\u7528\u200b\u9700\u8981\u200b\u52a0\u200b\u201c\u201d - var\uff1a\u200b\u53ea\u80fd\u200b\u8f93\u51fa\u200b\u53d8\u91cf\u200b\u7684\u200b\u503c\u200b\uff0c\u200b\u53d8\u91cf\u200b\u8c03\u7528\u200b\u4e0d\u7528\u200b\u52a0\u200b\u4efb\u4f55\u200b\u4e1c\u897f\u200b\uff0c\u200b\u53ea\u200b\u9700\u200b\u53d8\u91cf\u200b\u540d\u79f0\u200b</p> <pre><code>ansible localhost -e 'str=world' -m debug -a 'msg=\"hello {{str}}\"'\n\nansible localhost -e 'str=\"hello world\"' -m debug -a 'var=str'\n</code></pre>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#lineinfile","title":"lineinfile","text":"<p>\u200b\u5bf9\u200b\u6587\u4ef6\u200b\u884c\u505a\u200b\u5404\u79cd\u200b\u64cd\u4f5c\u200b</p>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#_6","title":"\u4fee\u6539\u200b\u5339\u914d\u200b\u884c","text":"<pre><code> ansible all -m lineinfile -a 'path=/etc/selinux/config regex=\"^SELINUX=\" line=\"SELINUX=disabled\"'\n</code></pre>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#_7","title":"\u5728\u200b\u5339\u914d\u200b\u884c\u524d\u200b&amp;\u200b\u540e\u200b\u6dfb\u52a0\u200b\u5185\u5bb9","text":"<pre><code># \u200b\u5339\u914d\u200b\u524d\u200b\nlineinfile dest=/home/ansible/node-conn-network.sh insertbefore=\"^ansible\" line=\"Test1\"\n# \u200b\u5339\u914d\u200b\u540e\u200b\nlineinfile dest=/home/ansible/node-conn-network.sh insertafter=\"^ansible\" line=\"Test2\"\n</code></pre> <p>result: <pre><code>192.168.56.105 | CHANGED | rc=0 &gt;&gt;\nTest1\nansible all -m shell -a 'dhclient enp0s3'\nTest2\n192.168.56.106 | CHANGED | rc=0 &gt;&gt;\nTest1\nansible all -m shell -a 'dhclient enp0s3'\nTest2\n</code></pre></p>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#_8","title":"\u4fee\u6539\u200b\u6587\u4ef6\u200b\u5185\u5bb9\u200b\u53ca\u200b\u6743\u9650","text":"<p><pre><code>lineinfile dest=/home/ansible/hosts regex='^127\\.0\\.0\\.1' line='127.0.0.1 localhost' owner=ansible group=ansible mode=0644\n</code></pre> result: <pre><code>192.168.56.106 | CHANGED | rc=0 &gt;&gt;\n127.0.0.1 localhost\n::1         localhost localhost.localdomain localhost6 localhost6.localdomain6\n192.168.56.105 | CHANGED | rc=0 &gt;&gt;\n127.0.0.1 localhost\n::1         localhost localhost.localdomain localhost6 localhost6.localdomain6\n</code></pre></p>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#_9","title":"\u5220\u9664\u200b\u884c\u200b\u5185\u5bb9","text":"<p><code>regexp</code>\u200b\u7ed3\u5408\u200b<code>state=absent</code>\uff0c\u200b\u4ee3\u8868\u200b\u5220\u9664\u200b\u884c\u200b\u3002</p> <pre><code>lineinfile dest=/home/ansible/hosts regex='^1\\.1\\.1\\.1' state=absent\n</code></pre>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#_10","title":"\u6587\u4ef6\u200b\u5b58\u5728\u200b\u5219\u200b\u6dfb\u52a0\u200b\u4e00\u884c","text":"<p>\u200b\u518d\u6b21\u200b\u6267\u884c\u200b\u4e0d\u4f1a\u200b\u518d\u6b21\u200b\u8ffd\u52a0\u200b\u6b64\u884c\u200b\uff0c\u200b\u56e0\u4e3a\u200blineinfile\u200b\u6a21\u5757\u200b\u7684\u200bstate\u200b\u9ed8\u8ba4\u200b\u53c2\u6570\u200b\u4e3a\u200bprecent\uff0c\u200b\u4f1a\u200b\u4fdd\u8bc1\u200b\u5e42\u200b\u7b49\u200b\u6027\u200b\uff0c\u200b\u5f53\u8981\u200b\u63d2\u5165\u200b\u7684\u200b\u884c\u200b\u5df2\u7ecf\u200b\u5b58\u5728\u200b\u5219\u200b\u4e0d\u4f1a\u200b\u518d\u200b\u63d2\u5165\u200b\u3002 <pre><code>lineinfile dest=/home/ansible/hosts line='1.1.1.1 www.google.com'\n</code></pre></p>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#_11","title":"\u6709\u200b\u5339\u914d\u200b\u5219\u200b\u4fee\u6539\u200b\uff0c\u200b\u4e0d\u200b\u5339\u914d\u200b\u5219\u200b\u6dfb\u52a0","text":"<p>\u200b\u7528\u200b\u4ee5\u4e0b\u200b\u6307\u4ee4\u200b\u5c06\u200b\u4ee5\u200b127\u200b\u5f00\u5934\u200b\u7684\u200b\u884c\u200b\u8fdb\u884c\u200b\u6ce8\u91ca\u200b: <pre><code>lineinfile dest=/home/ansible/hosts regex='^127' line='#127.0.0.1 localhost'\n</code></pre></p> <pre><code>ansible@all (2)[f:5]# cat hosts\n192.168.56.105 | CHANGED | rc=0 &gt;&gt;\n#127.0.0.1 localhost\n::1         localhost localhost.localdomain localhost6 localhost6.localdomain6\n127.0.0.1 localhost\n192.168.56.106 | CHANGED | rc=0 &gt;&gt;\n#127.0.0.1 localhost\n::1         localhost localhost.localdomain localhost6 localhost6.localdomain6\n127.0.0.1 localhost\n</code></pre> <p>\u200b\u518d\u200b\u8fdb\u884c\u200b\u6dfb\u52a0\u200b\uff0c\u200b\u5339\u914d\u200b\u672a\u200b\u6210\u529f\u200b\uff0c\u200b\u5c06\u200b\u6307\u5b9a\u200b\u7684\u200b\u884c\u200b\u6dfb\u52a0\u200b\u5230\u200b\u672b\u5c3e\u200b\u3002 <pre><code>lineinfile dest=/home/ansible/hosts regex='^127' line='127.0.0.1 localhost'\n</code></pre></p> <pre><code>ansible@all (2)[f:5]# cat hosts\n192.168.56.105 | CHANGED | rc=0 &gt;&gt;\n#127.0.0.1 localhost\n::1         localhost localhost.localdomain localhost6 localhost6.localdomain6\n127.0.0.1 localhost\n192.168.56.106 | CHANGED | rc=0 &gt;&gt;\n#127.0.0.1 localhost\n::1         localhost localhost.localdomain localhost6 localhost6.localdomain6\n127.0.0.1 localhost\n</code></pre>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#backrefsbackups","title":"\u53c2\u6570\u200bbackrefs\uff0cbackups","text":"<ul> <li>backup\uff1a\u200b\u662f\u5426\u200b\u5907\u4efd\u200b\u539f\u6587\u4ef6\u200b\uff0c\u200b\u9ed8\u8ba4\u200b\u672a\u200bno</li> <li>backrefs\uff1a<ul> <li>no\uff1a\u200b\u5982\u679c\u200bregex\u200b\u6ca1\u6709\u200b\u5339\u914d\u200b\u5230\u200b\uff0c\u200b\u5219\u200b\u6dfb\u52a0\u200b\uff0c\u200b\u5339\u914d\u200b\u5230\u200b\uff0c\u200b\u5219\u200b\u4fee\u6539\u200b\uff08\u200b\u9ed8\u8ba4\u200b\uff09</li> <li>yes\uff1a\u200b\u5982\u679c\u200bregex\u200b\u6ca1\u6709\u200b\u5339\u914d\u200b\u5230\u200b\uff0c\u200b\u4fdd\u6301\u200b\u539f\u6587\u4ef6\u200b\u4e0d\u53d8\u200b\uff0c\u200b\u5982\u679c\u200bregex\u200b\u5339\u914d\u200b\u5230\u200b\uff0c\u200b\u5219\u200b\u4fee\u6539\u200b</li> </ul> </li> </ul> <pre><code>lineinfile dest=/home/ansible/hosts regex='^127' line='foo' backrefs=no\n192.168.56.105 | SUCCESS =&gt; {\n    \"backup\": \"\",\n    \"changed\": false,\n    \"msg\": \"\"\n}\n192.168.56.106 | SUCCESS =&gt; {\n    \"backup\": \"\",\n    \"changed\": false,\n    \"msg\": \"\"\n}\n</code></pre>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#validate","title":"\u4f7f\u7528\u200bvalidate\u200b\u9a8c\u8bc1\u200b\u6587\u4ef6\u200b\u662f\u5426\u200b\u88ab\u200b\u6b63\u786e\u200b\u4fee\u6539","text":"<p>\u200b\u9a8c\u8bc1\u200b\u6587\u4ef6\u200b\u662f\u5426\u200b\u6b63\u5e38\u200b\u4fee\u6539\u200b\u662f\u200b\u4e3a\u4e86\u200b\u4fdd\u969c\u200b\u670d\u52a1\u200b\u6b63\u5e38\u200b\u8fd0\u884c\u200b\uff0c\u200b\u5982\u679c\u200b\u4e0d\u200b\u52a0\u200b\u9a8c\u8bc1\u200b\uff0c\u200b\u90a3\u4e48\u200b\u8fd9\u4e2a\u200b\u670d\u52a1\u200b\u5c31\u200b\u4f1a\u200b\u542f\u52a8\u200b\u5931\u8d25\u200b <pre><code>ansible all -m lineinfile -a 'dest=/etc/sudoers line=\"ansible ALL=(ALL) NOPASSWD: ALL\" validate=\"visudo -cf %s\" state=present\n</code></pre></p>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#regexpinsertxxx","title":"regexp\u200b\u548c\u200binsertxxx\u200b\u7ed3\u5408","text":"<p>\u200b\u7528\u200bregexp\u200b\u6765\u200b\u8fdb\u884c\u200b\u5339\u914d\u200b\uff0c\u200b\u5339\u914d\u200b\u5931\u8d25\u200b\u624d\u200b\u8fdb\u884c\u200b\u63d2\u5165\u200b\uff0c\u200b\u5339\u914d\u200b\u6210\u529f\u200b\u4e0d\u200b\u8fdb\u884c\u200b\u63d2\u5165\u200b\uff0c\u200b\u4ee5\u4fbf\u200b\u5b9e\u73b0\u200b\u5e42\u200b\u7b49\u200b\u6027\u200b <pre><code>lineinfile dest=/home/ansible/hosts regex='^hello' line='hello line' insertbefore=\"foo\"\n</code></pre></p>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#playbook","title":"playbook","text":""},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#when","title":"when \u200b\u5173\u952e\u5b57","text":""},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#_12","title":"\u6bd4\u8f83\u200b\u8fd0\u7b97\u7b26","text":"<ul> <li><code>==</code>: \u200b\u6bd4\u8f83\u200b\u4e24\u4e2a\u200b\u5bf9\u8c61\u200b\u662f\u5426\u200b\u76f8\u7b49\u200b\uff0c\u200b\u76f8\u7b49\u200b\u8fd4\u56de\u200btrue</li> <li><code>!=</code>\uff1a\u200b\u6bd4\u8f83\u200b\u4e24\u4e2a\u200b\u5bf9\u8c61\u200b\u662f\u5426\u200b\u4e0d\u200b\u7b49\u200b\uff0c\u200b\u4e0d\u200b\u7b49\u200b\u8fd4\u56de\u200btrue</li> <li><code>&gt;</code>\uff1a\u200b\u5de6\u8fb9\u200b\u5927\u4e8e\u200b\u53f3\u8fb9\u200b\uff0c\u200b\u5927\u4e8e\u200b\u8fd4\u56de\u200btrue</li> <li><code>&lt;</code> \uff1a\u200b\u5de6\u8fb9\u200b\u5c0f\u4e8e\u200b\u53f3\u8fb9\u200b\uff0c\u200b\u5c0f\u4e8e\u200b\u8fd4\u56de\u200btrue</li> <li><code>&gt;=</code>\uff1a\u200b\u5927\u4e8e\u200b\u7b49\u4e8e\u200b\u7b26\u53f7\u200b\uff0c\u200b\u8fd4\u56de\u200btrue</li> <li><code>&lt;=</code>\uff1a\u200b\u5c0f\u4e8e\u200b\u7b49\u4e8e\u200b\u7b26\u53f7\u200b\uff0c\u200b\u8fd4\u56de\u200btrue</li> </ul> <pre><code>---\n- name: Install vim\n  hosts: all\n  gather_facts: yes\n  tasks:\n    - name: Install vim via yum\n      yum:\n        name: vim-enhanced\n        state: installed\n      when: ansible_os_family == \"RedHat\"\n    - name: Install vim via apt\n      apt:\n        name: vim\n        state: installed\n      when: ansible_os_family == \"Debian\"\n    - name: Unexpect OS family\n      debug: msg=\"OS family {{ ansible_os_family }} is not supported\"\n      when: not ansible_os_family in (\"RedHat\", \"Debian\")\n</code></pre> <pre><code>- name: restart httpd is postfix is running\n  hosts: all\n  gather_facts: no\n  tasks:\n    - name: get postfix server status\n      command: /usr/bin/systemctl is-active postfix\n      ignore_errors: yes\n      register: result\n    - name: restart apache httpd based on postfix status\n      service:\n        name: httpd\n        state: restarted\n      when: result.rc == 0\n</code></pre>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#_13","title":"\u903b\u8f91\u200b\u8fd0\u7b97\u7b26","text":"<ul> <li><code>and</code>\uff1a\u200b\u903b\u8f91\u200b\u4e0e\u200b</li> <li><code>or</code>\uff1a\u200b\u903b\u8f91\u200b\u6216\u200b</li> <li><code>not</code>\uff1a\u200b\u903b\u8f91\u200b\u6216\u200b</li> <li><code>()</code>\uff1a\u200b\u591a\u4e2a\u200b\u8868\u8fbe\u5f0f\u200b\u7ec4\u5408\u200b\u5728\u200b\u4e00\u8d77\u200b <pre><code># \u200b\u7ec4\u5408\u200b\nwhen: =&gt;\n  ( ansible_distribution == \"RedHat\" and ansible_distribution_major_version == \"7\" )\n  or\n  ( ansible_distribution == \"Fedora\" and ansible_distribution_major_version == \"28\")\n</code></pre></li> </ul>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#tests","title":"\u6761\u4ef6\u200b\u5224\u65ad\u200b\u4e0e\u200btests","text":"<p>\u200b\u5728\u200bshell\u200b\u4e2d\u200b\uff0c\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u7528\u200btest\u200b\u547d\u4ee4\u200b\u8fdb\u884c\u200b\u4e00\u4e9b\u200b\u5e38\u7528\u200b\u7684\u200b\u5224\u65ad\u200b\u64cd\u4f5c\u200b\uff1a <pre><code>test -e /test\ntest -d /testdir\n</code></pre></p> <p>ansible\u200b\u4e5f\u200b\u6709\u200b\u7c7b\u4f3c\u200b\u7684\u200b\u8bed\u6cd5\u200b\uff0cansible\u200b\u6ca1\u6709\u200blinux test\u200b\u547d\u4ee4\u200b\uff0c\u200b\u7528\u200b\u7684\u200b\u662f\u200bjinja2\u200b\u6a21\u677f\u200b\u7684\u200btests</p>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#_14","title":"\u5224\u65ad\u200b\u53d8\u91cf","text":"<ul> <li><code>defined</code>\uff1a\u200b\u5224\u65ad\u200b\u53d8\u91cf\u200b\u662f\u5426\u200b\u5df2\u7ecf\u200b\u5b9a\u4e49\u200b\uff0c\u200b\u8fd4\u56de\u200btrue</li> <li><code>undefined</code>\uff1a\u200b\u5224\u65ad\u200b\u53d8\u91cf\u200b\u662f\u5426\u200b\u672a\u5b9a\u4e49\u200b\uff0c\u200b\u8fd4\u56de\u200btrue</li> <li><code>none</code>\uff1a\u200b\u5224\u65ad\u200b\u53d8\u91cf\u200b\u7684\u200b\u503c\u200b\u662f\u5426\u200b\u4e3a\u7a7a\u200b\uff0c\u200b\u8fd4\u56de\u200btrue</li> </ul> <pre><code>- name: \u200b\u5224\u65ad\u200b\u53d8\u91cf\u200b\n  hosts: localhost\n  gather_facts: no\n  vars:\n    testvar: \"\"\n    testvar1:\n  tasks:\n    - debug:\n        msg: \"testvar is defined\" \n      when: testdir is defined\n    - debug:\n        msg: \"testvar2 is undefined\"\n      when: testvar2 is undefined\n    - debug:\n        msg: \"testvar1 is none\"\n      when: testvar1 is none\n</code></pre>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#_15","title":"\u5224\u65ad\u200b\u6267\u884c\u200b\u7ed3\u679c","text":"<p>\u200b\u901a\u8fc7\u200b\u4efb\u52a1\u200b\u8fd4\u56de\u200b\u7684\u200b\u7ed3\u679c\u200b\u4fe1\u606f\u200b\u6765\u200b\u5224\u65ad\u200b\u8be5\u200b\u4efb\u52a1\u200b\u7684\u200b\u6267\u884c\u200b\u72b6\u6001\u200b - <code>success</code> <code>successed</code>\uff1a\u200b\u4efb\u52a1\u200b\u6267\u884c\u200b\u6210\u529f\u200b - <code>failure</code> <code>failed</code>\uff1a \u200b\u4efb\u52a1\u200b\u6267\u884c\u200b\u5931\u8d25\u200b - <code>change</code> <code>changed</code>\uff1a\u200b\u4efb\u52a1\u200b\u6267\u884c\u200bchagne\u200b\u72b6\u6001\u200b - <code>skip</code> <code>skipped</code>\uff1a\u200b\u4efb\u52a1\u200b\u88ab\u200b\u8df3\u200b\u8fc7\u200b <pre><code>- name: \u200b\u5224\u65ad\u200b\u6267\u884c\u200b\u7ed3\u679c\u200b\n  hosts: localhost\n  gather_facts: no\n  vars:\n    doshell: true\n  tasks:\n    - shell: 'cat /testdir/aaa'\n      when: doshell\n      register: result\n      ignore_errors: true\n\n    - debug:\n        msg: \"success\"\n      when: result is success\n\n    - debug:\n        msg: \"failed\"\n      when: result is failure\n\n    - debug:\n        msg: \"changed\"\n      when: result is change\n\n    - debug:\n        msg: \"skip\"\n      when: result is skip\n</code></pre></p>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#_16","title":"\u5224\u65ad\u200b\u4e3b\u63a7\u200b\u7aef\u200b\u8def\u5f84","text":"<ul> <li><code>file</code>\uff1a\u200b\u5224\u65ad\u200b\u662f\u5426\u200b\u4e3a\u200b\u6587\u4ef6\u200b</li> <li><code>directory</code>\uff1a\u200b\u5224\u65ad\u200b\u8def\u5f84\u200b\u662f\u5426\u200b\u4e3a\u200b\u76ee\u5f55\u200b</li> <li><code>link</code>\uff1a\u200b\u5224\u65ad\u200b\u8def\u5f84\u200b\u662f\u5426\u200b\u4e3a\u200b\u6302\u8f7d\u200b\u70b9\u200b</li> <li><code>exists</code>\uff1a\u200b\u5224\u65ad\u200b\u8def\u5f84\u200b\u662f\u5426\u200b\u5b58\u5728\u200b</li> </ul> <pre><code>- name: \u200b\u5224\u65ad\u200b\u4e3b\u63a7\u200b\u7aef\u200b\u8def\u5f84\u200b\n  hosts: localhost\n  gather_facts: no\n  vars:\n    testpath1: /root/ansible_data/play_books/loop.yml\n    testpath2: /tmp/facts_cache\n  tasks:\n    - debug:\n        msg: \"{{ testpath1 }} is file\"\n      when: testpath1 is file\n    - debug:\n        msg: \"{{ testpath2 }} is directory\"\n      when: testpath2 is directory\n</code></pre>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#_17","title":"\u5224\u65ad\u200b\u5b57\u7b26\u4e32\u200b\u5927\u5c0f\u5199","text":"<ul> <li><code>lower</code>\uff1a \u200b\u5224\u65ad\u200b\u5b57\u7b26\u4e32\u200b\u662f\u5426\u200b\u90fd\u200b\u662f\u200b\u5c0f\u5199\u200b</li> <li><code>upper</code>\uff1a\u200b\u5224\u65ad\u200b\u5b57\u7b26\u4e32\u200b\u662f\u5426\u200b\u90fd\u200b\u662f\u200b\u5927\u5199\u200b</li> </ul> <pre><code>- name: \u200b\u5224\u65ad\u200b\u5b57\u7b26\u4e32\u200b\u5927\u5c0f\u5199\u200b\n  hosts: localhost\n  gather_facts: no\n  vars:\n    str1: \"abc\"\n    str2: \"ABC\"\n  tasks:\n    - debug:\n        msg: \"str1 is all lowercase\"\n      when: str1 is lower\n    - debug:\n        msg: \"str2 is all uppercase\"\n      when: str2 is upper\n</code></pre>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#_18","title":"\u5224\u65ad\u200b\u662f\u5426\u200b\u4e3a\u200b\u5076\u6570\u200b\u5947\u6570\u200b\uff0c\u200b\u80fd\u5426\u200b\u6574\u9664","text":"<ul> <li><code>even</code>: \u200b\u5224\u65ad\u200b\u6570\u503c\u200b\u662f\u5426\u200b\u4e3a\u200b\u5076\u6570\u200b</li> <li><code>odd</code>\uff1a\u200b\u5224\u65ad\u200b\u6570\u503c\u200b\u662f\u5426\u200b\u4e3a\u200b\u5947\u6570\u200b</li> <li><code>divisibleby(num)</code>\uff1a\u200b\u5224\u65ad\u200b\u662f\u5426\u200b\u53ef\u4ee5\u200b\u6574\u9664\u200b\u6307\u5b9a\u200b\u7684\u200b\u6570\u503c\u200b</li> </ul> <pre><code>- name: \u200b\u5224\u65ad\u200b\u662f\u5426\u200b\u4e3a\u200b\u5076\u6570\u200b\u5947\u6570\u200b\uff0c\u200b\u80fd\u5426\u200b\u6574\u9664\u200b\n  hosts: localhost\n  gather_facts: no\n  vars:\n    num1: 6\n    num2: 3\n    num3: 15\n  tasks:\n    - debug:\n        msg: \"num1 is an even number\"\n      when: num1 is even\n    - debug:\n        msg: \"num2 is an odd number\"\n      when: num2 is odd\n    - debug:\n        msg: \"num3 can be divided exactly by\"\n      when: num3 is divisibleby(3)  \n</code></pre>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#version","title":"\u6bd4\u8f83\u200bversion","text":"<pre><code>- name: \u200b\u6bd4\u8f83\u200bversion\n  hosts: localhost\n  gather_facts: no\n  vars:\n    ver1: 1.2\n    ver2: 1.3\n  tasks:\n    - debug: \n        msg: \"{{ ver1 }} is greater than {{ ver2 }}\"\n      when: ver1 is version(ver2,\"&gt;\")\n    - debug:\n        msg: \"system version {{ ansible_distribution_version }} greater then 7.1\"\n      when: ansible_distribution_version is version(\"7.1\",\"gt\")\n</code></pre> <p>version\u200b\u53ef\u200b\u4f7f\u7528\u200b\u7684\u200b\u6bd4\u8f83\u200b\u8fd0\u7b97\u7b26\u200b\uff1a - \u200b\u5927\u4e8e\u200b\uff1a &gt; , gt - \u200b\u5927\u4e8e\u200b\u7b49\u4e8e\u200b\uff1a&gt;=\uff0cge - \u200b\u5c0f\u4e8e\u200b\uff1a&lt;, lt - \u200b\u5c0f\u4e8e\u200b\u7b49\u4e8e\u200b\uff1a&lt;=, le - \u200b\u7b49\u4e8e\u200b\uff1a=\uff0c\\=\\=, eq - \u200b\u4e0d\u200b\u7b49\u4e8e\u200b\uff1a!=\uff0c&lt;&gt;, ne</p>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#_19","title":"\u5224\u65ad\u200b\u7236\u5b50\u200b\u96c6","text":"<pre><code>- name:\u200b\u5224\u65ad\u200b\u7236\u5b50\u200b\u96c6\u200b\n  hosts: localhost\n  gather_facts: no\n  vars:\n    a:\n      - 2\n      - 5\n    b: [1,2,3,4,5]\n  tasks:\n    - debug:\n        msg: \"A is a subset of B\"\n      when: a is subset(b)\n    - debug:\n        msg: \"B is a parent set of A\"\n      when: b is superset(a)\n</code></pre>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#_20","title":"\u5224\u65ad\u200b\u4e00\u4e2a\u200b\u5bf9\u8c61\u200b\u662f\u5426\u200b\u5728\u200b\u6307\u5b9a\u200b\u7684\u200b\u5bf9\u8c61\u200b\u4e2d","text":"<pre><code>- name: \u200b\u5224\u65ad\u200b\u4e00\u4e2a\u200b\u5bf9\u8c61\u200b\u662f\u5426\u200b\u5728\u200b\u6307\u5b9a\u200b\u7684\u200b\u5bf9\u8c61\u200b\u4e2d\u200b\n  hosts: localhost\n  gather_facts: no\n  vars:\n    supported_distros:\n      - RedHat\n      - CentOS\n    tasks:\n      - debug:\n          msg: \"{{ ansible_distribution }} is supported_distros\"\n        when: ansible_distribution in supported_distros\n</code></pre>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#_21","title":"\u5224\u65ad\u200b\u662f\u5426\u200b\u4e3a\u200b\u4e00\u4e2a\u200b\u5b57\u7b26\u4e32\u200b\u548c\u200b\u6570\u5b57","text":"<pre><code>- name: \u200b\u5224\u65ad\u200b\u662f\u5426\u200b\u4e3a\u200b\u4e00\u4e2a\u200b\u5b57\u7b26\u4e32\u200b\u548c\u200b\u6570\u5b57\u200b\n  hosts: localhost\n  gather_facts: no\n    vars:\n      var1: 1\n      var2: \"1\"\n      var3: a\n  tasks:\n    - debug:\n        msg: var1 is a number\n      when: var1 is number\n    - debug:\n        msg: var2 is string\n      when: var2 is string\n    - debug:\n        msg: var3 is string\n      when: var3 is string\n</code></pre>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#block","title":"\u6761\u4ef6\u200b\u5224\u65ad\u200b\u4e0e\u200bblock","text":""},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#block_1","title":"block","text":"<pre><code>- name: test block\n  hosts: localhost\n  gather_facts: no\n  tasks:\n    - debug:\n        msg: task1 not in block\n    - block:\n        - debug:\n            msg: test2 in block1\n            msg: test3 in block1\n      when: 2 &gt; 1\n</code></pre>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#rescue","title":"rescue","text":"<p>\u200b\u53ea\u6709\u200b\u4efb\u52a1\u200b\u6267\u884c\u200b\u5931\u8d25\u200b\u624d\u200b\u4f1a\u200b\u6267\u884c\u200b<code>rescue</code>\u200b\u5173\u952e\u5b57\u200b\u7684\u200b\u4efb\u52a1\u200b <pre><code>- name: rescue\n  hosts: localhost\n  gather_facts: no\n  tasks:\n    - block:\n        - shell: 'ls /testdir'\n      rescue:\n        - debug:\n            msg: '/testdir not exists'\n</code></pre></p>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#always","title":"always","text":"<p>\u200b\u4e0d\u7ba1\u200b\u4efb\u52a1\u200b\u6267\u884c\u200b\u5931\u8d25\u200b\u8fd8\u662f\u200b\u6210\u529f\u200b\u90fd\u200b\u4f1a\u200b\u6267\u884c\u200b<code>always</code>\u200b\u5173\u952e\u5b57\u200b\u7684\u200b\u4efb\u52a1\u200b <pre><code>- name: always test\n  hosts: localhost\n  gather_facts: no\n  tasks:\n    - block:\n        - shell: 'ls /testdir'\n      rescue:\n        - debug:\n            msg: '/testdir is not exists'\n      always:\n        - debug:\n            msg: 'This task always executes'\n</code></pre></p>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#_22","title":"\u6761\u4ef6\u200b\u5224\u65ad\u200b\u4e0e\u200b\u9519\u8bef\u5904\u7406","text":""},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#fail","title":"fail","text":"<p>fail\u200b\u6a21\u5757\u200b\u7528\u4e8e\u200b\u7ec8\u6b62\u200bplaybook\u200b\u7684\u200b\u6267\u884c\u200b\uff0c\u200b\u901a\u5e38\u200b\u4e0e\u200b\u6761\u4ef6\u200b\u8bed\u53e5\u200b\u7ec4\u5408\u200b\u4f7f\u7528\u200b\uff0c\u200b\u5f53\u200b\u6761\u4ef6\u200b\u6ee1\u8db3\u200b\u65f6\u200b\uff0c\u200b\u7ec8\u6b62\u200b\u5f53\u524d\u200bplaybook\u200b\u8fd0\u884c\u200b <pre><code>- name: fail test\n  hosts: localhost\n  gather_facts: no\n  tasks:\n    - shell: echo \"Just a test--error\"\n      register: result\n    - fail:\n        msg: \"Conditions established, Interrupt running playbook\"\n      when: 'error' in result.stdout\n    - debug:\n        msg: \"Inever execute, Because the playbook has stopped\"\n</code></pre></p>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#failed_when","title":"failed_when","text":"<p>fail\u200b\u548c\u200bwhen\u200b\u7ed3\u5408\u200b\u4f7f\u7528\u200b\u65f6\u5019\u200b\uff0cfailed_when\u200b\u662f\u200b\u4e00\u79cd\u200b\u66f4\u200b\u7b80\u5355\u200b\u7684\u200b\u5199\u6cd5\u200b\uff0c\u200b\u5f53\u200b\u6ee1\u8db3\u200b\u67d0\u4e2a\u200b\u6761\u4ef6\u200b\u81ea\u52a8\u200b\u89e6\u53d1\u200b\u5931\u8d25\u200b\u9000\u51fa\u200b <pre><code>- name: failed_when test\n  hosts: localhost\n  gather_facts: no\n  tasks:\n    - name: this command prints FAILED when it fails\n      command: /usr/bin/example-command -x -y -z\n      register: command_result\n      failed_when: 'FAILED' in command_result.stderr\n</code></pre></p>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#changed_when","title":"changed_when","text":"<pre><code>- name: changed_when test\n  hosts: localhost\n  gather_facts: no\n  tasks:\n    - shell: echo hello world\n      register: cmd_result\n      changed_when: cmd_result.rc != 2\n    - debug:\n        var: cmd_result.rc\n    - shell: wall beep\n      register: cmd_result\n      changed_when: False\n    - debug:\n        var: cmd_result.rc\n</code></pre>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#assert","title":"assert","text":"<pre><code>- name: assert test\n  hosts: localhost\n  gather_facts: no\n  tasks:\n    - assert:\n        that:\n          - 100 &gt; 200\n          - 200 &gt; 200\n        fail_msg: \"oh, not me\"\n        success_msg: \"oh, it's me\"\n</code></pre>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#any_errors_fatal","title":"any_errors_fatal","text":"<p>\u200b\u5c06\u200b<code>any_error_fatal</code>\u200b\u8bbe\u7f6e\u200b\u4e3a\u200btrue\u200b\u540e\u200b\uff0c\u200b\u7b2c\u4e00\u4e2a\u200b\u8282\u70b9\u200b\u5f00\u59cb\u200b\u6267\u884c\u200bfail\u200b\u4efb\u52a1\u200b\uff0c\u200b\u6574\u4e2a\u200bplaybook\u200b\u540e\u7eed\u200b\u90fd\u200b\u4e0d\u4f1a\u200b\u6267\u884c\u200b\uff0c\u200b\u5176\u5b83\u200bplay\u200b\u4e5f\u200b\u662f\u200b\u4e00\u6837\u200b\u4e0d\u200b\u6267\u884c\u200b <pre><code>- name: any_errors_fatal test\n  gather_facts: no\n  any_errors_fatal: yes\n  hosts: localhost\n  tasks:\n    - fail:\n        msg: oh, not me\n      when: inventory_hostname == group['nginx'][ ]\n    - debug:\n        msg: \"hello\"\n- name: next play\n  hosts: localhost\n  gather_facts: no\n  tasks:\n    - debug:\n        msg: HELLO WORLD\n</code></pre></p>"},{"location":"Linux/%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7/ansible/#when_1","title":"\u5728\u200b\u5faa\u73af\u200b\u8bed\u53e5\u200b\u4e2d\u200b\u4f7f\u7528\u200bwhen","text":"<pre><code>- name: \u200b\u53ea\u200b\u6253\u5370\u200b\u5927\u4e8e\u200b5\u200b\u7684\u200b\u503c\u200b\n  hosts: localhost\n  gather_facts: no\n  tasks:\n    - command: echo {{ item }}\n      loop: [0,2,4,6,8,10]\n      when: item &gt; 5\n</code></pre>"},{"location":"Win/%E6%88%91%E7%9A%84Win%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/","title":"\u6211\u200b\u7684\u200bWin\u200b\u547d\u4ee4\u200b\u5e2e\u52a9\u200b\u624b\u518c","text":""},{"location":"Win/%E6%88%91%E7%9A%84Win%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#bvssh","title":"Bvssh","text":"<pre><code>BvSsh.exe -profile=\"D:\\\u200b\u5907\u4efd\u200b\u8d44\u6599\u200b\\bitvise profile\\192.168.12.12.tlp\" -start=login -openTerm -exitOnLogout -noRegistry=y -autoLogout -hide=main -term=xterm-256color\n</code></pre>"},{"location":"Win/%E6%88%91%E7%9A%84Win%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#vboxmanage","title":"VBoxManage","text":""},{"location":"Win/%E6%88%91%E7%9A%84Win%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#_1","title":"\u5217\u51fa\u200b\u5168\u90e8\u200b\u865a\u62df\u673a","text":"<pre><code>VBoxManage.exe host vms\n</code></pre>"},{"location":"Win/%E6%88%91%E7%9A%84Win%E5%91%BD%E4%BB%A4%E5%B8%AE%E5%8A%A9%E6%89%8B%E5%86%8C/#_2","title":"\u5f00\u542f\u200b\u865a\u62df\u673a\u200b\u865a\u62df\u5316","text":"<pre><code>\"D:\\Program Files\\Oracle\\VirtualBox\\VBoxManage.exe\" modifyvm \"centos7\" --nested-hw-virt on\n</code></pre>"},{"location":"mkdocs/mkdocs%E5%8F%82%E8%80%83%E7%AB%99/","title":"Mkdocs\u200b\u53c2\u8003\u200b\u7ad9","text":"<ul> <li>https://wcowin.work/index.html</li> <li>https://oneko.zone/</li> <li>https://www.jinhuaiyao.com/posts/personal-wiki-setup/</li> <li>https://herointene.github.io/tech/mkdocsbuild/#_1</li> <li>\u200b\u642d\u5efa\u200b</li> <li>ci https://github.com/squidfunk/mkdocs-material/blob/master/docs/publishing-your-site.md</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/0.%20%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%A6%82%E5%BF%B5/","title":"0. \u200b\u6570\u636e\u5e93\u200b\u7684\u200b\u6982\u5ff5","text":"<ul> <li>\u200b\u6570\u636e\u5e93\u200b\u7684\u200b\u6982\u5ff5\u200b</li> </ul> <pre><code>\"\"\"\n\u200b\u672c\u8d28\u200b\u5c31\u662f\u200b\u4e00\u6b3e\u200b\u57fa\u4e8e\u200b\u7f51\u7edc\u901a\u4fe1\u200b\u7684\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\n\n\u200b\u4e5f\u200b\u5c31\u200b\u610f\u5473\u7740\u200b\u6570\u636e\u5e93\u200b\u8f6f\u4ef6\u200b\u4f60\u200b\u53ef\u4ee5\u200b\u81ea\u5df1\u200b\u5f00\u53d1\u200b\n\u200b\u8fd8\u200b\u610f\u5473\u7740\u200b\u5e02\u9762\u4e0a\u200b\u7684\u200b\u6570\u636e\u5e93\u200b\u8f6f\u4ef6\u200b\u5f88\u591a\u200b\n\"\"\"\n\u200b\u5173\u7cfb\u200b\u578b\u200b\uff1a\n    MySQL\u3001oracle\u3001access\u3001SQL server\u3001sqllite\n    \u200b\u7279\u70b9\u200b\uff1a\n        \u200b\u6570\u636e\u200b\u5f7c\u6b64\u4e4b\u95f4\u200b\u6709\u200b\u7ea6\u675f\u200b\u6216\u8005\u200b\u5173\u7cfb\u200b\n        \u200b\u6570\u636e\u200b\u6570\u636e\u200b\u4e00\u822c\u200b\u90fd\u200b\u662f\u200b\u4ee5\u200b\u8868\u683c\u200b\u7684\u200b\u5f62\u5f0f\u200b\n\u200b\u975e\u200b\u5173\u7cfb\u200b\u578b\u200b\uff1a\n    redis\u3001mongodb\uff08\u200b\u6700\u50cf\u200b\u5173\u7cfb\u200b\u578b\u200b\u6570\u636e\u5e93\u200b\u7684\u200b\u975e\u200b\u5173\u7cfb\u200b\u578b\u200b\u6570\u636e\u5e93\u200b\uff09\u3001memcache\n    \u200b\u7279\u70b9\u200b\uff1a\n        \u200b\u901a\u8fc7\u200bk\uff0cv\u200b\u952e\u503c\u200b\u5bf9\u200b\u7684\u200b\u5f62\u5f0f\u200b\u5b58\u50a8\u200b\n</code></pre> <ul> <li>MySQL</li> </ul> <pre><code>\"\"\"\n\u200b\u672c\u8d28\u200b\u5c31\u662f\u200b\u4e00\u6b3e\u200b\u57fa\u4e8e\u200b\u7f51\u7edc\u901a\u4fe1\u200b\u7684\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\nMySQL\u200b\u5f00\u6e90\u200b\u514d\u8d39\u200b\n\u200b\u4f01\u4e1a\u200b\u4f7f\u7528\u7387\u200b\u8f83\u5e7f\u200b\n\u200b\u4f7f\u7528\u65b9\u4fbf\u200b\u597d\u5b66\u200b\n\"\"\"\n</code></pre> <ul> <li>SQL\u200b\u8bed\u53e5\u200b</li> </ul> <pre><code>\"\"\"\n\u200b\u5ba2\u6237\u7aef\u200b\n\u200b\u670d\u52a1\u7aef\u200b\n\nMySQL \u200b\u652f\u6301\u200b\u591a\u79cd\u7c7b\u578b\u200b\u7684\u200b\u5ba2\u6237\u7aef\u200b\n    1. \u200b\u81ea\u5df1\u200b\u5199\u200b\u7684\u200b\u5ba2\u6237\u7aef\u200b\n    2. \u200b\u5176\u4ed6\u200b\u7f16\u7a0b\u8bed\u8a00\u200b\u5199\u200b\u7684\u200b\uff08python\u3001java\u3001php\u3002\u3002\u3002\uff09\n\n\u200b\u5982\u4f55\u200b\u517c\u5bb9\u200b\n    1. \u200b\u672c\u4eba\u200b\u725b\u200b\u903c\u200b \u200b\u81ea\u52a8\u200b\u533a\u5206\u200b\u5bf9\u5e94\u200b\u7684\u200b\u8bed\u8a00\u200b\n    2. \u200b\u7edf\u4e00\u6807\u51c6\u200b\uff08*****\uff09\n\"\"\"\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/1.%20mysql%E7%9A%84%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/","title":"1. mysql\u200b\u7684\u200b\u76f8\u5173\u200b\u914d\u7f6e","text":"<p>\u200b\u8865\u5145\u200b\uff1a</p> <pre><code>\"\"\"\n1. \u200b\u5982\u4f55\u200b\u67e5\u770b\u200b\u5f53\u524d\u200b\u5177\u4f53\u200b\u8fdb\u7a0b\u200b\n    tasklist\n    tasklist | findstr mysqld\n2. \u200b\u5982\u4f55\u200b\u6740\u6b7b\u200b\u5177\u4f53\u200b\u8fdb\u7a0b\u200b\uff08\u200b\u53ea\u6709\u200b\u5728\u200b\u7ba1\u7406\u5458\u200bcmd\u200b\u4e0b\u200b\u624d\u80fd\u200b\u6210\u529f\u200b\uff09\n    taskkill /F /PID PID\u200b\u53f7\u200b\n\"\"\"\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/1.%20mysql%E7%9A%84%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/#_1","title":"\u5f00\u542f\u200b\u81ea\u542f\u52a8","text":"<ol> <li> <p>\u200b\u5c06\u200bmysql\u200b\u6587\u4ef6\u200b\u4e0b\u200b\u7684\u200bbin\u200b\u76ee\u5f55\u200b\u6dfb\u52a0\u200b\u5230\u200b\u73af\u5883\u53d8\u91cf\u200bpath\u200b\u4e0b\u200b</p> </li> <li> <p>\u200b\u5c06\u200bmysql\u200b\u670d\u52a1\u7aef\u200b\u5236\u4f5c\u200b\u6210\u200b\u7cfb\u7edf\u200b\u670d\u52a1\u200b\uff08\u200b\u5f00\u673a\u200b\u81ea\u542f\u52a8\u200b\uff09</p> </li> </ol> <pre><code>\"\"\"\n\u200b\u67e5\u770b\u200b\u5f53\u524d\u200b\u8ba1\u7b97\u673a\u200b\u7684\u200b\u8fd0\u884c\u200b\u8fdb\u7a0b\u200b\u6570\u200b\n    \u200b\u8fd0\u884c\u200b\u8f93\u5165\u200bservice.msc \u200b\u6216\u8005\u200b \u200b\u6253\u5f00\u200b\u4efb\u52a1\u200b\u7ba1\u7406\u5668\u200b\u9009\u9879\u5361\u200b\u670d\u52a1\u200b\n\u200b\u5c06\u200bmysql\u200b\u5236\u4f5c\u200b\u6210\u200b\u7cfb\u7edf\u200b\u670d\u52a1\u200b\n    mysqld --install\n\u200b\u79fb\u9664\u200bmysql\u200b\u7cfb\u7edf\u200b\u670d\u52a1\u200b\n    mysqld --remove\n\u200b\u542f\u52a8\u200b\u7c7b\u578b\u200b\n    \u200b\u6539\u4e3a\u200b\u81ea\u52a8\u200b\u542f\u52a8\u200b\n\"\"\"\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/1.%20mysql%E7%9A%84%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/#_2","title":"\u8bbe\u7f6e\u200b\u5bc6\u7801","text":"<pre><code>\"\"\"\nmysqladmin -uroot -p\u200b\u539f\u200b\u5bc6\u7801\u200b password \u200b\u65b0\u5bc6\u7801\u200b\nmysqladmin -uroot -p123 password 123456\n\"\"\"\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/1.%20mysql%E7%9A%84%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/#_3","title":"\u5fd8\u8bb0\u200b\u5bc6\u7801","text":"<pre><code># 1. \u200b\u5148\u200b\u5173\u95ed\u200b\u5f53\u524d\u200bmysql\u200b\u670d\u52a1\u7aef\u200b\n    \u200b\u547d\u4ee4\u884c\u200b\u7684\u200b\u65b9\u5f0f\u200b\u542f\u52a8\u200b\uff08\u200b\u8ba9\u200bmysql\u200b\u8df3\u8fc7\u200b\u7528\u6237\u540d\u200b\u5bc6\u7801\u200b\u9a8c\u8bc1\u200b\u529f\u80fd\u200b\uff09\n    mysqld --skip-grant-tables\n# 2. \u200b\u76f4\u63a5\u200b\u4ee5\u200b\u65e0\u200b\u5bc6\u7801\u200b\u7684\u200b\u65b9\u5f0f\u200b\u8fde\u63a5\u200b\n    mysql -uroot -p\n# 3. \u200b\u4fee\u6539\u200b\u5f53\u524d\u200b\u7528\u6237\u200b\u7684\u200b\u5bc6\u7801\u200b\n    update mysql.user set password=password(123456) where user='root' and host='localhost';\n\"\"\"\n\u200b\u771f\u6b63\u200b\u5b58\u50a8\u7528\u6237\u200b\u8868\u200b\u7684\u200b\u5bc6\u7801\u200b\u5b57\u200b\u6bb5\u200b \u200b\u5b58\u50a8\u200b\u7684\u200b\u80af\u5b9a\u200b\u662f\u200b\u5bc6\u6587\u200b\n\u200b\u53ea\u6709\u200b\u7528\u6237\u200b\u81ea\u5df1\u200b\u77e5\u9053\u200b\u660e\u6587\u200b\u662f\u200b\u4ec0\u4e48\u200b \u200b\u5176\u4ed6\u4eba\u200b\u90fd\u200b\u4e0d\u200b\u77e5\u9053\u200b \u200b\u8fd9\u6837\u200b\u66f4\u52a0\u200b\u7684\u200b\u5b89\u5168\u200b\n\u200b\u5bc6\u6587\u200b\u4e5f\u200b\u5bf9\u200b\u53ea\u80fd\u200b\u5bf9\u6bd4\u200b\u5bc6\u6587\u200b\n\"\"\"\n# 4. \u200b\u7acb\u523b\u200b\u4fee\u6539\u200b\u6570\u636e\u200b\u5237\u5230\u200b\u786c\u76d8\u200b\nflush privileges;\n# 5. \u200b\u5173\u95ed\u200b\u5f53\u524d\u200b\u670d\u52a1\u7aef\u200b\uff0c\u200b\u7136\u540e\u200b\u6b63\u5e38\u200b\u6821\u9a8c\u200b\u6388\u6743\u200b\u8868\u200b\u7684\u200b\u5f62\u5f0f\u200b\u542f\u52a8\u200b\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/1.%20mysql%E7%9A%84%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE/#mysql","title":"mysql\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u7684\u200b\u76f8\u5173\u200b\u4fee\u6539","text":"<pre><code>\"\"\"\nmy-default.ini\n\u200b\u4ee5\u200bini\u200b\u7ed3\u5c3e\u200b\u7684\u200b\u4e00\u822c\u200b\u90fd\u200b\u662f\u200b\u914d\u7f6e\u6587\u4ef6\u200b\n\u200b\u7a0b\u5e8f\u200b\u4f1a\u5148\u200b\u52a0\u8f7d\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u4e2d\u200b\u7684\u200b\u914d\u7f6e\u200b\u4e4b\u540e\u200b\u624d\u200b\u771f\u6b63\u200b\u7684\u200b\u542f\u52a8\u200b\n\"\"\"\n[mysqld]    #\u200b\u4e00\u65e6\u200b\u670d\u52a1\u7aef\u200b\u542f\u52a8\u200b\u7acb\u523b\u200b\u52a0\u8f7d\u200b\u4e0b\u9762\u200b\u7684\u200b\u914d\u7f6e\u200b\n...\n[mysql]     # \u200b\u4e00\u65e6\u200b\u5ba2\u6237\u7aef\u200b\u542f\u52a8\u200b\u7acb\u523b\u200b\u52a0\u8f7d\u200b\u4e0b\u9762\u200b\u7684\u200b\u914d\u7f6e\u200b\n...\n[client]    # \u200b\u5176\u4ed6\u200b\u5ba2\u6237\u7aef\u200b\n\n# \u200b\u81ea\u5df1\u200b\u65b0\u5efa\u200b\u4e00\u4e2a\u200bmy.ini\u200b\u7684\u200b\u914d\u7f6e\u6587\u4ef6\u200b\uff0c\u200b\u4e0d\u8981\u200b\u518d\u6e90\u200b\u914d\u7f6e\u6587\u4ef6\u200b\u4e0a\u200b\u505a\u200b\u4fee\u6539\u200b\n[mysqld]\n;\u200b\u4fee\u6539\u200b\u670d\u52a1\u7aef\u200b\u5b57\u7b26\u96c6\u200b\u7f16\u7801\u200b\ncharacter-set-server=utf8\ncollation-server=utf8_general_ci\n[client]\n;\u200b\u4fee\u6539\u200b\u5176\u4ed6\u200b\u5ba2\u6237\u7aef\u200b\u5b57\u7b26\u96c6\u200b\u7f16\u7801\u200b\ndefault-character-set=utf8\n[mysql]\n;\u200b\u6307\u5b9a\u200b\u8fde\u63a5\u200b\u7528\u6237\u540d\u200b\u548c\u200b\u5bc6\u7801\u200b\uff0c\u200b\u76f4\u63a5\u200b\u6572\u200bmysql\u200b\u5c31\u200b\u53ef\u200b\u8fdb\u5165\u200b\nuser=root\npassword=123456\n;\u200b\u4fee\u6539\u200bmysql\u200b\u5ba2\u6237\u7aef\u200b\u5b57\u7b26\u96c6\u200b\u7f16\u7801\u200b\ndefault-character-set=utf8\n\n# \u200b\u4fee\u6539\u200b\u5b8c\u540e\u200b\u91cd\u542f\u200b\u670d\u52a1\u200b\nnet stop mysql\nnet start mysql\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/11.%20group%20by%E5%88%86%E7%BB%84/","title":"group by \u200b\u5206\u7ec4","text":"<pre><code>\"\"\"\n# \u200b\u5206\u7ec4\u200b\u5b9e\u9645\u200b\u5e94\u7528\u200b\u573a\u666f\u200b \u200b\u5206\u7ec4\u200b\u5e94\u7528\u200b\u573a\u666f\u200b\u975e\u5e38\u200b\u591a\u200b\n    \u200b\u7537\u5973\u200b\u6bd4\u5217\u200b\n    \u200b\u90e8\u95e8\u200b\u5e73\u5747\u200b\u85aa\u8d44\u200b\n    \u200b\u90e8\u95e8\u200b\u79c3\u5934\u200b\u7387\u200b\n    \u200b\u56fd\u5bb6\u200b\u4e4b\u95f4\u200b\u6570\u636e\u200b\u7edf\u8ba1\u200b\n\"\"\"\n\n# 1. \u200b\u6309\u200b\u90e8\u95e8\u200b\u5206\u7ec4\u200b\nselect * from emp group by post:\n# \u200b\u5206\u7ec4\u200b\u4e4b\u540e\u200b\uff0c\u200b\u6700\u5c0f\u200b\u53ef\u200b\u64cd\u4f5c\u200b\u5355\u4f4d\u200b\u5e94\u8be5\u200b\u662f\u200b\u7ec4\u200b\uff0c\u200b\u4e0d\u518d\u200b\u662f\u200b\u7ec4\u5185\u200b\u5355\u4e2a\u200b\u6570\u636e\u200b\n# \u200b\u5982\u679c\u200b\u8bbe\u7f6e\u200b\u4e86\u200b\u4e25\u683c\u200b\u6a21\u5f0f\u200b\uff0c\u200b\u90a3\u4e48\u200b\u4e0a\u8ff0\u200b\u547d\u4ee4\u200b\u76f4\u63a5\u200b\u62a5\u9519\u200b\n# \u200b\u5206\u7ec4\u200b\u4e4b\u540e\u200b\u53ea\u80fd\u200b\u76f4\u63a5\u200b\u83b7\u53d6\u200b\u5206\u7ec4\u200b\u4f9d\u636e\u200b\uff0c\u200b\u5176\u4ed6\u200b\u5b57\u6bb5\u200b\u90fd\u200b\u65e0\u6cd5\u200b\u76f4\u63a5\u200b\u83b7\u53d6\u200b\nset global sql_mode='strict_trans_tables,only_full_group_by';\n\n# \u200b\u8bbe\u7f6e\u200b\u4e86\u200b\u4e25\u683c\u200b\u6a21\u5f0f\u200b\u4e4b\u540e\u200b \u200b\u5206\u7ec4\u200b\u9ed8\u8ba4\u200b\u53ea\u80fd\u200b\u62ff\u5230\u200b\u5206\u7ec4\u200b\u7684\u200b\u4f9d\u636e\u200b\nselect post from emp group by post;\n# \u200b\u6309\u7167\u200b\u4ec0\u4e48\u200b\u5206\u7ec4\u200b\u65e7\u200b\u53ea\u80fd\u200b\u62ff\u200b\u5012\u200b\u5206\u7ec4\u200b\uff0c\u200b\u5176\u4ed6\u200b\u5b57\u200b\u6bb5\u200b\u4e0d\u80fd\u200b\u76f4\u63a5\u200b\u83b7\u53d6\u200b\uff0c\u200b\u9700\u8981\u200b\u501f\u52a9\u200b\u4e00\u4e9b\u200b\u65b9\u6cd5\u200b\n\n\"\"\"\n\u200b\u4ec0\u4e48\u200b\u65f6\u5019\u200b\u9700\u8981\u200b\u5206\u7ec4\u200b\uff1a\n    \u200b\u5173\u952e\u5b57\u200b\n        \u200b\u6bcf\u4e2a\u200b \u200b\u5e73\u5747\u200b \u200b\u6700\u9ad8\u200b \u200b\u6700\u4f4e\u200b\n\"\"\"\n# 1. \u200b\u83b7\u53d6\u200b\u6bcf\u4e2a\u200b\u90e8\u95e8\u200b\u7684\u200b\u6700\u9ad8\u200b\u85aa\u8d44\u200b\nselect post,max(salary) from emp group by post;\nselect post as '\u200b\u90e8\u95e8\u200b',max(salary) as '\u200b\u6700\u9ad8\u200b\u85aa\u8d44\u200b' from emp group by post;\nselect post '\u200b\u90e8\u95e8\u200b',max(salary) '\u200b\u6700\u9ad8\u200b\u85aa\u8d44\u200b' from emp group by post;\n# as \u200b\u53ef\u4ee5\u200b\u7701\u7565\u200b\uff0c\u200b\u4f46\u662f\u200b\u4e0d\u200b\u63a8\u8350\u200b\uff0c\u200b\u8bed\u4e49\u200b\u4e0d\u200b\u660e\u786e\u200b\n\n# 2. \u200b\u83b7\u53d6\u200b\u6bcf\u4e2a\u200b\u90e8\u95e8\u200b\u7684\u200b\u6700\u4f4e\u200b\u85aa\u8d44\u200b\nselect post,min(salary) from emp group by post;\n\n# 3. \u200b\u83b7\u53d6\u200b\u6bcf\u4e2a\u200b\u90e8\u95e8\u200b\u7684\u200b\u5e73\u5747\u200b\u85aa\u8d44\u200b\nselect post,avg(salary) from emp group by post;\n\n# 4. \u200b\u83b7\u53d6\u200b\u6bcf\u4e2a\u200b\u90e8\u95e8\u200b\u7684\u200b\u5de5\u8d44\u200b\u603b\u548c\u200b\nselect post,sum(salary) from emp group by post;\n\n# 5. \u200b\u83b7\u53d6\u200b\u6bcf\u4e2a\u200b\u90e8\u95e8\u200b\u7684\u200b\u4eba\u6570\u200b\nselect post,count(id) from emp group by post;\nselect post,count(salary) from emp group by post;\nselect post,count(age) from emp group by post;\nselect post,count(post_comment) frpm emp group by post; #null \u200b\u4e0d\u884c\u200b\n\n# 6. \u200b\u67e5\u8be2\u200b\u5206\u7ec4\u200b\u4e4b\u540e\u200b\u7684\u200b\u90e8\u95e8\u200b\u540d\u79f0\u200b\u548c\u200b\u6bcf\u4e2a\u200b\u90e8\u95e8\u200b\u4e0b\u200b\u6240\u6709\u200b\u7684\u200b\u5458\u5de5\u200b\u59d3\u540d\u200b\n# group_concat \u200b\u4e0d\u200b\u5355\u5355\u200b\u53ef\u4ee5\u200b\u652f\u6301\u200b\u4f60\u200b\u83b7\u53d6\u200b\u5206\u7ec4\u200b\u4e4b\u540e\u200b\u7684\u200b\u5176\u4ed6\u200b\u5b57\u200b\u6bb5\u200b\uff0c\u200b\u8fd8\u200b\u652f\u6301\u200b\u62fc\u63a5\u200b\u64cd\u4f5c\u200b\nselect post,group_concar(name) from emp group by post;\nselect post,group_concat(name,'_DSB') from emp group by post;\nselect post,group_concat(name,':',salary) from emp group by post;\n# concat\u200b\u4e0d\u200b\u5206\u7ec4\u200b\u7684\u200b\u65f6\u5019\u200b\u7528\u200b\nselect concat('NAME:',name),concat('SAL:',salary) from emp;\n# concat_ws \u200b\u5982\u679c\u200b\u4e1c\u54e5\u200b\u5b57\u200b\u6bb5\u200b\u4e4b\u95f4\u200b\u7684\u200b\u8fde\u63a5\u200b\u670d\u52a1\u200b\u53f7\u200b\u662f\u200b\u76f8\u540c\u200b\u7684\u200b\u60c5\u51b5\u200b\u4e0b\u200b \u200b\u53ef\u4ee5\u200b\u76f4\u63a5\u200b\u4f7f\u7528\u200bconcat_ws\u200b\u6765\u200b\u5b8c\u6210\u200b\nselect concat_ws(':',name,age,sex) \n\n# \u200b\u8865\u5145\u200b as\u200b\u8bed\u6cd5\u200b\u4e0d\u200b\u5355\u5355\u200b\u53ef\u4ee5\u200b\u7ed9\u200b\u5b57\u200b\u6bb5\u200b\u8d77\u200b\u522b\u540d\u200b\uff0c\u200b\u8fd8\u200b\u53ef\u4ee5\u200b\u7ed9\u8868\u8d77\u200b\u522b\u540d\u200b\nselect emp.id,emp.name from emp;\nselect emp.id,emp.name from emp as t1;  # \u200b\u62a5\u9519\u200b\nselect t1.id,t1.name from emp as t1;\n\n# \u200b\u67e5\u8be2\u200b\u6bcf\u4e2a\u200b\u4eba\u200b\u7684\u200b\u5e74\u85aa\u200b 12\u200b\u85aa\u200b\nselect name,salary*12 from emp;\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/11.%20group%20by%E5%88%86%E7%BB%84/#_1","title":"\u5206\u7ec4\u200b\u8865\u5145","text":"<p>```python</p>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/11.%20group%20by%E5%88%86%E7%BB%84/#wheregroup-by-group-bywhere","title":"\u5173\u952e\u5b57\u200bwhere\u200b\u548c\u200bgroup by \u200b\u540c\u65f6\u200b\u51fa\u73b0\u200b\u7684\u200b\u65f6\u5019\u200bgroup by\u200b\u5fc5\u987b\u200b\u5728\u200bwhere\u200b\u7684\u200b\u540e\u9762","text":"<p>where \u200b\u5148\u5bf9\u200b\u6574\u4f53\u200b\u6570\u636e\u200b\u8fdb\u884c\u200b\u8fc7\u6ee4\u200b\u4e4b\u540e\u200b\u518d\u200b\u5206\u7ec4\u200b\u64cd\u4f5c\u200b where \u200b\u7b5b\u9009\u200b\u6761\u4ef6\u200b\u4e0d\u80fd\u200b\u4f7f\u7528\u200b\u805a\u5408\u200b\u51fd\u6570\u200b select id,name,age from emp where max(salary) &gt; 3000; select max(salary) from emp; # \u200b\u4e0d\u200b\u5206\u7ec4\u200b\uff0c\u200b\u9ed8\u8ba4\u200b\u6574\u4f53\u200b\u5c31\u662f\u200b\u4e00\u7ec4\u200b</p>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/11.%20group%20by%E5%88%86%E7%BB%84/#30","title":"\u7edf\u8ba1\u200b\u5404\u200b\u90e8\u95e8\u200b\u5e74\u9f84\u200b\u518d\u200b30\u200b\u5c81\u200b\u4ee5\u4e0a\u200b\u7684\u200b\u5458\u5de5\u200b\u5e73\u5747\u200b\u85aa\u8d44","text":"<pre><code>1. \u200b\u5148\u6c42\u200b\u6240\u6709\u200b\u5e74\u9f84\u200b\u5927\u4e8e\u200b30\u200b\u7684\u200b\u5458\u5de5\u200b\n    select * from emp where age&gt;30;\n2. \u200b\u518d\u200b\u5bf9\u200b\u7ed3\u679c\u200b\u8fdb\u884c\u200b\u5206\u7ec4\u200b\n    select * from emp where age&gt;30 group by post;\nselect post,avg(salary) from emp age&gt;30 group by post;\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/12.%20having%E5%88%86%E7%BB%84%E4%B9%8B%E5%90%8E%E7%9A%84%E7%AD%9B%E9%80%89%E6%9D%A1%E4%BB%B6/","title":"having \u200b\u5206\u7ec4\u200b\u4e4b\u540e\u200b\u7684\u200b\u6761\u4ef6\u200b\u7b5b\u9009","text":"<p>```python \"\"\" having\u200b\u7684\u200b\u8bed\u6cd5\u200b\u548c\u200bwhere\u200b\u662f\u200b\u4e00\u81f4\u200b\u7684\u200b \u200b\u53ea\u4e0d\u8fc7\u200bhaving\u200b\u662f\u200b\u518d\u200b\u5206\u7ec4\u200b\u4e4b\u540e\u200b\u8fdb\u884c\u200b\u7684\u200b\u8fc7\u6ee4\u200b\u64cd\u4f5c\u200b \u200b\u5373\u200bhaving\u200b\u662f\u200b\u53ef\u4ee5\u200b\u76f4\u63a5\u200b\u4f7f\u7528\u200b\u805a\u5408\u200b\u51fd\u6570\u200b\u7684\u200b \"\"\"</p>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/12.%20having%E5%88%86%E7%BB%84%E4%B9%8B%E5%90%8E%E7%9A%84%E7%AD%9B%E9%80%89%E6%9D%A1%E4%BB%B6/#3010000","title":"\u7edf\u8ba1\u200b\u5404\u200b\u90e8\u95e8\u200b\u5e74\u9f84\u200b\u5728\u200b30\u200b\u5c81\u200b\u4ee5\u4e0a\u200b\u7684\u200b\u5458\u5de5\u200b\u5e73\u5747\u5de5\u8d44\u200b\u5e76\u4e14\u200b\u4fdd\u7559\u200b\u5e73\u5747\u5de5\u8d44\u200b\u5927\u4e8e\u200b10000\u200b\u7684\u200b\u90e8\u95e8","text":"<p>select post,avg(salary) from emp         where age &gt; 30         group by post         having avg(salary) &gt;10000         ;</p>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/13.%20distinct%E5%8E%BB%E9%87%8D/","title":"distincat \u200b\u53bb\u200b\u91cd","text":"<p>```python \"\"\" \u200b\u4e00\u5b9a\u200b\u8981\u200b\u6ce8\u610f\u200b\uff0c\u200b\u5fc5\u987b\u200b\u662f\u200b\u5b8c\u5168\u200b\u4e00\u6837\u200b\u7684\u200b\u6570\u636e\u200b\u624d\u200b\u53ef\u4ee5\u200b\u53bb\u200b\u91cd\u200b \u200b\u4e00\u5b9a\u200b\u4e0d\u8981\u200b\u5c06\u200b\u4e3b\u952e\u200b\u5ffd\u89c6\u200b\u4e86\u200b\uff0c\u200b\u6709\u200b\u4e3b\u952e\u200b\u5b58\u5728\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c\u200b\u662f\u200b\u4e0d\u200b\u53ef\u80fd\u200b\u53bb\u200b\u91cd\u200b\u7684\u200b \"\"\" select distinct id,age from emp; select distinct age from emp;</p>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/14.%20order%20by%E6%8E%92%E5%BA%8F/","title":"order by \u200b\u6392\u5e8f","text":"<pre><code>select * from order by salary;\nselect * from order by salary asc;\nselect * from order by salsary desc;\n\n\"\"\"\n\u200b\u9ed8\u8ba4\u200b\u662f\u200b\u5347\u5e8f\u200b\nasc \u200b\u5347\u5e8f\u200b\ndesc \u200b\u964d\u5e8f\u200b\n\"\"\"\nselect * from emp order by age desc salary asc\n# \u200b\u5148\u200b\u6309\u7167\u200bage\u200b\u964d\u5e8f\u200b\u6392\u200b \u200b\u5982\u679c\u200b\u78b0\u5230\u200bage\u200b\u76f8\u540c\u200b \u200b\u5219\u200b\u6309\u7167\u200bsalary\u200b\u5347\u5e8f\u200b\u6392\u200b\n\n# \u200b\u7edf\u8ba1\u200b\u5404\u200b\u90e8\u95e8\u200b\u5e74\u9f84\u200b\u518d\u200b10\u200b\u5c81\u200b\u4ee5\u4e0a\u200b\u7684\u200b\u5458\u5de5\u200b\u5e73\u5747\u5de5\u8d44\u200b\u5e76\u4e14\u200b\u4fdd\u7559\u200b\u5e73\u5747\u200b\u85aa\u8d44\u200b\u5927\u4e8e\u200b1000\u200b\u7684\u200b\u90e8\u95e8\u200b\uff0c\u200b\u7136\u540e\u200b\u5bf9\u200b\u5e73\u5747\u5de5\u8d44\u200b\u8fdb\u884c\u200b\u964d\u5e8f\u200b\u6392\u5e8f\u200b\nselect post,avg(salary) from emp\n    where age&gt;10\n    group by post\n    having avg(salary) &gt; 1000\n    order by avg(salary) desc;\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/15.%20limit%20%E9%99%90%E5%88%B6%E5%B1%95%E7%A4%BA%E6%9D%A1%E6%95%B0/","title":"limit\u200b\u9650\u5236\u200b\u5c55\u793a\u200b\u6761\u6570","text":"<pre><code>select * from emp limit 3;\nselect * from emp limit 0,5;\nselect * from emp limit 5,5;\n# \u200b\u7b2c\u4e00\u4e2a\u200b\u662f\u200b\u8d77\u59cb\u200b\u4f4d\u7f6e\u200b\n# \u200b\u7b2c\u4e8c\u4e2a\u200b\u662f\u200b\u5c55\u793a\u200b\u6761\u6570\u200b\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/16.%20%E6%AD%A3%E5%88%99/","title":"\u6b63\u5219","text":"<pre><code>select * from emp where name regxp '^j.*(n|y)$';\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/17.%E8%BF%9E%E8%A1%A8%E6%93%8D%E4%BD%9C/","title":"17.\u200b\u8fde\u8868\u200b\u64cd\u4f5c","text":"<p>\u200b\u524d\u671f\u200b\u8868\u200b\u51c6\u5907\u200b <pre><code># \u200b\u5efa\u8868\u200b\ncreate table dep(\n    id int,\n    name varchar(20)\n);\n\ncreate table emp(\n    id int primeay key auto_increment,\n    name varchar(20),\n    sex enum('male','female') not null default 'male',\n    age int,\n    dep_id int\n);\n\n# \u200b\u63d2\u5165\u200b\u6570\u636e\u200b\ninsert into dep values\n(200,'\u200b\u6280\u672f\u200b'),\n(201,'\u200b\u4eba\u529b\u8d44\u6e90\u200b'),\n(202,'\u200b\u9500\u552e\u200b'),\n(203,'\u200b\u8fd0\u8425\u200b');\n\ninsert into emp(name,sex,age,dep_id) values\n('jason','male',18,200),\n('egon','female',48,201),\n('kevin','male',18,201),\n('nick','male',28,202),\n('owen','male',18,203),\n('jarry','female',28,204);\n</code></pre></p>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/17.%E8%BF%9E%E8%A1%A8%E6%93%8D%E4%BD%9C/#_1","title":"\u67e5\u8be2","text":"<pre><code>select * from dep,emp;  # \u200b\u7ed3\u679c\u200b \u200b\u7b1b\u5361\u5c14\u200b\u79ef\u200b\nselect * from emp,dep where emp.dep_id = dep.dep_id;\n\"\"\"\n\u200b\u62fc\u8868\u200b\u64cd\u4f5c\u200b\u7684\u200b\u5bf9\u5e94\u200b\u65b9\u6cd5\u200b\uff1a\n    inner join \u200b\u5185\u200b\u8fde\u63a5\u200b\n    left join \u200b\u5de6\u200b\u8fde\u63a5\u200b\n    right join \u200b\u53f3\u200b\u8fde\u63a5\u200b\n    union   \u200b\u5168\u200b\u8fde\u63a5\u200b\n\"\"\"\n# inner join \u200b\u5185\u200b\u8fde\u63a5\u200b\nselec * from emp inner join dep on emp.dep_id = dep.id;\n# \u200b\u53ea\u200b\u62fc\u63a5\u200b\u4e24\u5f20\u200b\u8868\u200b\u4e2d\u5171\u200b\u6709\u200b\u7684\u200b\u6570\u636e\u200b\u90e8\u5206\u200b\n\n# left join \u200b\u5de6\u200b\u8fde\u63a5\u200b\nselect * from emp left join dep on emp.dep_id = dep.id;\n# \u200b\u5de6\u8868\u200b\u6240\u6709\u200b\u7684\u200b\u6570\u636e\u200b\u90fd\u200b\u5c55\u793a\u200b\u51fa\u6765\u200b \u200b\u6ca1\u6709\u200b\u7684\u200b\u5bf9\u5e94\u200b\u7684\u200b\u9879\u200b\u5c31\u200b\u7528\u200bnull\n\n# right join \u200b\u53f3\u200b\u8fde\u63a5\u200b\nselect * from emp right dep on emp.dep_id = dep.id;\n\n# union \u200b\u5168\u200b\u8fde\u63a5\u200b \u200b\u5de6\u53f3\u4e24\u200b\u8868\u200b\u6240\u6709\u200b\u7684\u200b\u6570\u636e\u200b\u90fd\u200b\u5c55\u793a\u200b\u51fa\u6765\u200b\nselect * from emp left join dep on emp.dep_id = dep.id\nunion\nselect * from emp right join dep on emp.dep_id = dep.id;\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/18.%20%E5%AD%90%E6%9F%A5%E8%AF%A2/","title":"18. \u200b\u5b50\u200b\u67e5\u8be2","text":"<pre><code>\"\"\"\n\u200b\u5b50\u200b\u67e5\u8be2\u200b\u5c31\u662f\u200b\u5e73\u65f6\u200b\u6211\u4eec\u200b\u89e3\u51b3\u95ee\u9898\u200b\u7684\u200b\u601d\u8def\u200b\n    \u200b\u5206\u6b65\u200b\u89e3\u51b3\u95ee\u9898\u200b\n        \u200b\u7b2c\u4e00\u6b65\u200b\n        \u200b\u7b2c\u4e8c\u6b65\u200b\n        \u3002\u3002\n\u200b\u5c06\u200b\u4e00\u4e2a\u200b\u67e5\u8be2\u200b\u8bed\u53e5\u200b\u7684\u200b\u7ed3\u679c\u200b\u5f53\u4f5c\u200b\u53e6\u5916\u200b\u4e00\u4e2a\u200b\u67e5\u8be2\u200b\u8bed\u53e5\u200b\u7684\u200b\u6761\u4ef6\u200b\u53bb\u200b\u7528\u200b\n\"\"\"\n# \u200b\u67e5\u8be2\u200b\u90e8\u95e8\u200b\u662f\u200b\u6280\u672f\u200b\u6216\u8005\u200b\u4eba\u529b\u8d44\u6e90\u200b\u7684\u200b\u5458\u5de5\u200b\u4fe1\u606f\u200b\nselect id from dep where name = '\u200b\u6280\u672f\u200b' or name = '\u200b\u4eba\u529b\u8d44\u6e90\u200b';\nselect name from emp where dep_id in (200,201);\nselect * from emp where dep_id in (select id from dep where name='\u200b\u6280\u672f\u200b' or name='\u200b\u4eba\u529b\u8d44\u6e90\u200b');\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/18.%20%E5%AD%90%E6%9F%A5%E8%AF%A2/#_1","title":"\u603b\u7ed3","text":"<pre><code>\u200b\u8868\u200b\u7684\u200b\u67e5\u8be2\u200b\u7ed3\u679c\u200b\u53ef\u4ee5\u200b\u4f5c\u4e3a\u200b\u5176\u4ed6\u200b\u8868\u200b\u7684\u200b\u67e5\u8be2\u200b\u6761\u4ef6\u200b\n\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u8d77\u200b\u522b\u540d\u200b\u7684\u200b\u65b9\u5f0f\u200b\u4f5c\u4e3a\u200b\u4e00\u5f20\u200b\u865a\u62df\u200b\u8868\u200b\u548c\u200b\u5176\u4ed6\u200b\u8868\u200b\u5173\u8054\u200b\n\n\"\"\"\n\u200b\u591a\u8868\u200b\u67e5\u8be2\u200b\u7684\u200b\u4e24\u79cd\u200b\u65b9\u5f0f\u200b\n    1. \u200b\u5148\u200b\u62fc\u63a5\u200b\u518d\u200b\u67e5\u8be2\u200b\n    2. \u200b\u5b50\u200b\u67e5\u8be2\u200b\u4e00\u6b65\u200b\u4e00\u6b65\u200b\u6765\u200b\n\"\"\"\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/18.%20%E5%AD%90%E6%9F%A5%E8%AF%A2/#exits","title":"exits \u200b\u5173\u952e\u5b57","text":""},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/19.%E8%A7%86%E5%9B%BE/","title":"\u89c6\u56fe","text":"<ul> <li>\u200b\u4ec0\u4e48\u200b\u662f\u200b\u89c6\u56fe\u200b <pre><code>\"\"\"\n\u200b\u89c6\u56fe\u200b\u5c31\u662f\u200b\u901a\u8fc7\u200b\u67e5\u8be2\u200b\u5f97\u5230\u200b\u4e00\u5f20\u200b\u865a\u62df\u200b\u8868\u200b\uff0c\u200b\u7136\u540e\u200b\u4fdd\u5b58\u200b\u4e0b\u6765\u200b\uff0c\u200b\u4e0b\u6b21\u200b\u53ef\u4ee5\u200b\u76f4\u63a5\u200b\u4f7f\u7528\u200b\n\"\"\"\n</code></pre></li> <li>\u200b\u4e3a\u4ec0\u4e48\u200b\u8981\u200b\u7528\u200b\u89c6\u56fe\u200b <pre><code>\"\"\"\n\u200b\u5982\u679c\u200b\u8981\u200b\u9891\u7e41\u200b\u7684\u200b\u64cd\u4f5c\u200b\u4e00\u5f20\u200b\u865a\u62df\u200b\u8868\u200b\uff08\u200b\u62fc\u8868\u200b\u7ec4\u6210\u200b\u7684\u200b\uff09\uff0c\u200b\u4f60\u200b\u53ef\u4ee5\u200b\u5236\u4f5c\u200b\u6210\u200b\u89c6\u56fe\u200b\uff0c\u200b\u540e\u7eed\u200b\u76f4\u63a5\u200b\u64cd\u4f5c\u200b\n\"\"\"\n</code></pre></li> <li>\u200b\u5982\u4f55\u200b\u64cd\u4f5c\u200b <pre><code># \u200b\u56fa\u5b9a\u200b\u8bed\u6cd5\u200b\ncreate view \u200b\u8868\u540d\u200b as \u200b\u865a\u62df\u200b\u8868\u200b\u7684\u200b\u67e5\u8be2\u200bsql\u200b\u8bed\u53e5\u200b\n\n# \u200b\u5177\u4f53\u64cd\u4f5c\u200b\ncreate view teacher2course as\nselect * from teacher inner join course\non teacher.tid = course.teacher_id\n;\n</code></pre></li> <li>\u200b\u6ce8\u610f\u200b <pre><code>\"\"\"\n1. \u200b\u521b\u5efa\u200b\u89c6\u56fe\u200b\u5728\u200b\u786c\u76d8\u200b\u4e0a\u200b\u53ea\u4f1a\u200b\u6709\u8868\u200b\u7ed3\u6784\u200b\uff08\u200b\u6570\u636e\u200b\u8fd8\u662f\u200b\u6765\u81ea\u200b\u4e8e\u200b\u4e4b\u524d\u200b\u7684\u200b\u8868\u200b\uff09\n2. \u200b\u89c6\u56fe\u200b\u4e00\u822c\u200b\u53ea\u200b\u7528\u6765\u200b\u67e5\u8be2\u200b\uff0c\u200b\u91cc\u9762\u200b\u7684\u200b\u6570\u636e\u200b\u4e0d\u8981\u200b\u7ee7\u7eed\u200b\u4fee\u6539\u200b\uff0c\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u5f71\u54cd\u200b\u771f\u6b63\u200b\u7684\u200b\u8868\u200b\n\"\"\"\n</code></pre></li> <li>\u200b\u89c6\u56fe\u200b\u5230\u5e95\u200b\u4f7f\u7528\u200b\u9891\u7387\u200b\u9ad8\u4e0d\u9ad8\u200b\uff1f ```python \"\"\" \u200b\u4e0d\u9ad8\u200b \u200b\u5f53\u200b\u4f60\u200b\u521b\u5efa\u200b\u4e86\u200b\u5f88\u591a\u200b\u7684\u200b\u89c6\u56fe\u200b\u4e4b\u540e\u200b\uff0c\u200b\u4f1a\u200b\u9020\u6210\u200b\u8868\u200b\u7684\u200b\u4e0d\u597d\u200b\u7ef4\u62a4\u200b</li> </ul> <p>\"\"\"</p>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/2.%20%E5%BA%93%E3%80%81%E8%A1%A8%E3%80%81%E6%95%B0%E6%8D%AE%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5/","title":"2. \u200b\u5e93\u200b\u3001\u200b\u8868\u200b\u3001\u200b\u6570\u636e\u200b\u7684\u200b\u589e\u5220\u200b\u6539\u67e5","text":""},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/2.%20%E5%BA%93%E3%80%81%E8%A1%A8%E3%80%81%E6%95%B0%E6%8D%AE%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5/#_1","title":"\u9488\u5bf9\u200b\u5e93\u200b\u7684\u200b\u589e\u5220\u200b\u67e5\u6539\u200b\uff08\u200b\u6587\u4ef6\u5939\u200b\uff09","text":"<pre><code># \u200b\u589e\u200b\ncreate database db1;\ncreate database db2 charset='gbk';\n# \u200b\u67e5\u200b\nshow databases; # \u200b\u67e5\u200b\u6240\u6709\u200b\nshow create database db1;   # \u200b\u67e5\u200b\u5355\u4e2a\u200b\n# test     | CREATE DATABASE `test` /*!40100 DEFAULT CHARACTER SET latin1 */\n# \u200b\u6539\u200b\nalter database db2 charset='utf-8';\n# \u200b\u5220\u200b\ndrop database db2;\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/2.%20%E5%BA%93%E3%80%81%E8%A1%A8%E3%80%81%E6%95%B0%E6%8D%AE%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5/#_2","title":"\u9488\u5bf9\u200b\u8868\u200b\u7684\u200b\u589e\u5220\u200b\u67e5\u6539\u200b\uff08\u200b\u6587\u4ef6\u200b\uff09","text":"<pre><code># \u200b\u67e5\u770b\u200b\u5f53\u524d\u200b\u6240\u5728\u200b\u5e93\u200b\u7684\u200b\u540d\u5b57\u200b\nselect database();\n# \u200b\u5207\u6362\u200b\u5e93\u200b\nuse db1;\n\n# \u200b\u589e\u200b\ncreate table t1(id int,name char(4));\ncreate table db2.t2(id int,name char(4)); # \u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u7528\u200b\u7edd\u5bf9\u8def\u5f84\u200b\u7684\u200b\u6a21\u5f0f\u200b\n# \u200b\u67e5\u200b\nshow tables;\nshow create table t1;   # \u200b\u67e5\u770b\u200b\u5177\u4f53\u200b\u7684\u200b\u5efa\u8868\u200b\u4fe1\u606f\u200b\ndescribe t1; # \u200b\u67e5\u770b\u200b\u8868\u5b57\u200b\u6bb5\u200b\uff0c\u200b\u652f\u6301\u200b\u7b80\u5199\u200bdesc t1;\n# \u200b\u6539\u200b\nalter table t1 modify name char(16);\n# \u200b\u5220\u200b\ndrop table t1;\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/2.%20%E5%BA%93%E3%80%81%E8%A1%A8%E3%80%81%E6%95%B0%E6%8D%AE%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5/#_3","title":"\u9488\u5bf9\u200b\u6570\u636e\u200b\u7684\u200b\u589e\u5220\u200b\u6539\u67e5\u200b\uff08\u200b\u4e00\u884c\u200b\u4e00\u884c\u200b\u7684\u200b\u6570\u636e\u200b\uff09","text":"<pre><code># \u200b\u589e\u200b\ninsert into t1 values(1,'jason');\ninsert into t1 values(1,'jason'),(2,'egon'),(3,'tank');\n# \u200b\u67e5\u200b\nselect * from t1;\nselect name form t1;\n# \u200b\u6539\u200b\nupdate t1 set name='bsd' where id &gt; 1;\n# \u200b\u5220\u200b\ndelete form t1 where id &gt; 1;\ndelete form t1 where name='json';\n# \u200b\u5c06\u8868\u200b\u6240\u6709\u200b\u7684\u200b\u6570\u636e\u200b\u6e05\u7a7a\u200b\ndelete from t1;\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/20.%20%E8%A7%A6%E5%8F%91%E5%99%A8/","title":"\u89e6\u53d1\u5668","text":"<p>\u200b\u5728\u200b\u6ee1\u8db3\u200b\u5bf9\u6807\u200b\u6570\u636e\u200b\u8fdb\u884c\u200b\u589e\u5220\u200b\u6539\u200b\u7684\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c\u200b\u4f1a\u200b\u81ea\u52a8\u200b\u89e6\u53d1\u200b\u7684\u200b\u529f\u80fd\u200b \u200b\u4f7f\u7528\u200b\u89e6\u53d1\u5668\u200b\u53ef\u4ee5\u200b\u5e2e\u52a9\u200b\u6211\u4eec\u200b\u5b9e\u73b0\u200b\u76d1\u63a7\u200b\uff0c\u200b\u65e5\u5fd7\u200b\u3002\u3002 \u200b\u89e6\u53d1\u5668\u200b\u53ef\u4ee5\u200b\u5728\u200b\u516d\u79cd\u200b\u60c5\u51b5\u200b\u4e0b\u200b\u81ea\u52a8\u200b\u89e6\u53d1\u200b\uff0c\u200b\u589e\u524d\u200b\u589e\u540e\u200b\uff0c\u200b\u5220\u524d\u200b\u5220\u540e\u200b\uff0c\u200b\u6539\u524d\u200b\u6539\u540e\u200b</p> <p>```python create trigger \u200b\u89e6\u53d1\u5668\u200b\u7684\u200b\u540d\u5b57\u200b before/after insert/after insert/update/delete \u200b\u8868\u540d\u200b  for each row begin     sql \u200b\u8bed\u53e5\u200b end</p>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/20.%20%E8%A7%A6%E5%8F%91%E5%99%A8/#_2","title":"\u5177\u4f53\u200b\u4f7f\u7528\u200b\uff0c\u200b\u9488\u5bf9\u200b\u89e6\u53d1\u5668\u200b\u7684\u200b\u540d\u5b57\u200b \u200b\u6211\u4eec\u200b\u901a\u5e38\u200b\u9700\u8981\u200b\u505a\u5230\u200b\u89c1\u540d\u200b\u77e5\u610f","text":""},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/20.%20%E8%A7%A6%E5%8F%91%E5%99%A8/#_3","title":"\u9488\u5bf9\u200b\u589e","text":"<p>create trigger tri_before_insert_t1 before insert on t1 for each row begin     sql end create tigger tri_after_insert_t1 after insert on t1 for each row begin     sql end</p>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/20.%20%E8%A7%A6%E5%8F%91%E5%99%A8/#_4","title":"\u9488\u5bf9\u200b\u5220\u9664\u200b\u548c\u200b\u4fee\u6539\u200b\uff0c\u200b\u4e66\u5199\u200b\u683c\u5f0f\u200b\u4e00\u81f4","text":"<p>ps\uff1a \u200b\u4fee\u6539\u200bMySQL\u200b\u9ed8\u8ba4\u200b\u8bed\u53e5\u200b\u7ed3\u675f\u7b26\u200b\uff0c\u200b\u53ea\u200b\u4f5c\u7528\u57df\u200b\u5f53\u524d\u200b\u7a97\u53e3\u200b     delimiter $$ \u200b\u5c06\u200b\u9ed8\u8ba4\u200b\u7684\u200b\u7ed3\u675f\u200b\u7b26\u53f7\u200b\u6539\u4e3a\u200b$$     delimiter ;</p>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/20.%20%E8%A7%A6%E5%8F%91%E5%99%A8/#_5","title":"\u6848\u5217","text":"<p>create table cmd(     id int primary key auto_increment,     user char(32),     priv char(10),     cmd char(64),     sub_time datetime,  # \u200b\u63d0\u4ea4\u200b\u65f6\u95f4\u200b     success enum ('yes','no')   # no\u200b\u4ee3\u8868\u200b\u5931\u8d25\u200b );</p> <p>create table errlog(     id int primary key auto_increment,     err_cmd char(64),     err_time datetime ); \"\"\" \u200b\u5f53\u200bcmd\u200b\u8868\u4e2d\u200b\u7684\u200bsuccess\u200b\u5b57\u6bb5\u200b\u662f\u200bno\u200b\u90a3\u4e48\u200b\u51fa\u53d1\u200b\u89e6\u53d1\u5668\u200b\u7684\u200b\u6267\u884c\u200b\u53bb\u200berrlog\u200b\u8868\u4e2d\u200b\u63d2\u5165\u200b\u6570\u636e\u200b new\u200b\u6307\u4ee3\u200b\u7684\u200b\u6570\u636e\u200b\u5c31\u662f\u200b\u4e00\u6761\u6761\u200b\u6570\u636e\u200b\u5bf9\u8c61\u200b \"\"\" delimiter $$ create trigger tri_after_insert_cmd after insert on cmd for each row begin     if NEW.cuccess = 'no' then         insert into errlog(err_cmd,err_time) values(NEW.cmd,NEW.sub_time);     end if; end $$ delimiter ;</p>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/20.%20%E8%A7%A6%E5%8F%91%E5%99%A8/#cmd","title":"\u671d\u200bcmd\u200b\u8868\u200b\u63d2\u5165\u200b\u6570\u636e","text":"<p>insert int cmd(     user,     priv,     cmd,     sub_time,     success ) values     ('jason','0755','ls -l /etc',NOW(),'yes'),     ('jason','0755','cat /etc/passwd',NOW(),'no'),     ('jason','0755','useradd xxxx',NOW(),'no'),     ('jason','0755','ps aux',NOW(),'yes');</p>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/21.%20%E4%BA%8B%E5%8A%A1/","title":"21. \u200b\u4e8b\u52a1","text":"<ul> <li>\u200b\u4ec0\u4e48\u200b\u662f\u200b\u4e8b\u52a1\u200b\u3001 <pre><code>\"\"\"\n\u200b\u5f00\u542f\u200b\u4e00\u4e2a\u200b\u4e8b\u52a1\u200b\u53ef\u4ee5\u200b\u5305\u542b\u200b\u591a\u6761\u200bsql\u200b\u8bed\u53e5\u200b\uff0c\u200b\u8fd9\u4e9b\u200bsql\u200b\u8bed\u53e5\u200b\u8981\u4e48\u200b\u540c\u65f6\u200b\u6210\u529f\u200b\uff0c\u200b\u8981\u4e48\u200b\u4e00\u4e2a\u200b\u90fd\u200b\u522b\u200b\u6210\u529f\u200b\u3002\u200b\u79f0\u4e3a\u200b\u4e8b\u52a1\u200b\u7684\u200b\u539f\u5b50\u200b\u6027\u200b\n\"\"\"\n</code></pre></li> <li>\u200b\u4e8b\u52a1\u200b\u7684\u200b\u4f5c\u7528\u200b <pre><code>\"\"\"\n\u200b\u4fdd\u8bc1\u200b\u4e86\u200b\u6570\u636e\u200b\u7684\u200b\u5b89\u5168\u6027\u200b\n\"\"\"\n</code></pre></li> <li>\u200b\u4e8b\u52a1\u200b\u7684\u200b\u56db\u5927\u200b\u7279\u6027\u200b <pre><code>\"\"\"\nACID\nA:\u200b\u539f\u5b50\u200b\u6027\u200b\n    \u200b\u4e00\u4e2a\u200b\u4e8b\u52a1\u200b\u662f\u200b\u4e0d\u53ef\u5206\u5272\u200b\u7684\u200b\u5355\u4f4d\u200b\uff0c\u200b\u4e8b\u52a1\u200b\u4e2d\u200b\u5305\u542b\u200b\u7684\u200b\u8bf8\u591a\u200b\u64cd\u4f5c\u200b\n    \u200b\u8981\u4e48\u200b\u540c\u65f6\u200b\u6210\u529f\u200b\u8981\u4e48\u200b\u540c\u65f6\u200b\u5931\u8d25\u200b\nC: \u200b\u4e00\u81f4\u6027\u200b\n    \u200b\u4e8b\u52a1\u200b\u5fc5\u987b\u200b\u662f\u4ece\u200b\u6570\u636e\u5e93\u200b\u4e00\u4e2a\u200b\u4e00\u81f4\u6027\u200b\u7684\u200b\u72b6\u6001\u200b\u53d8\u200b\u5230\u200b\u53e6\u5916\u200b\u4e00\u4e2a\u200b\u4e00\u81f4\u6027\u200b\u7684\u200b\u72b6\u6001\u200b\n    \u200b\u4e00\u81f4\u6027\u200b\u8ddf\u200b\u539f\u5b50\u200b\u6027\u662f\u200b\u5bc6\u5207\u76f8\u5173\u200b\u7684\u200b\nI: \u200b\u9694\u79bb\u200b\u6027\u200b\n    \u200b\u4e00\u4e2a\u200b\u4e8b\u52a1\u200b\u7684\u200b\u6267\u884c\u200b\u4e0d\u80fd\u200b\u88ab\u200b\u5176\u4ed6\u200b\u4e8b\u52a1\u200b\u5e72\u6270\u200b\n    \uff08 \u200b\u5373\u200b\u4e00\u4e2a\u200b\u4e8b\u52a1\u200b\u5185\u90e8\u200b\u7684\u200b\u64cd\u4f5c\u200b\u53ca\u200b\u4f7f\u7528\u200b\u5230\u200b\u7684\u200b\u6570\u636e\u200b\u5bf9\u200b\u5e76\u53d1\u200b\u7684\u200b\u5176\u4ed6\u200b\u4e8b\u52a1\u200b\u662f\u200b\u9694\u79bb\u200b\u7684\u200b\uff0c\u200b\u5e76\u53d1\u200b\u6267\u884c\u200b\u7684\u200b\u4e8b\u52a1\u200b\u4e4b\u95f4\u200b\u4e5f\u200b\u662f\u200b\u4e92\u76f8\u200b\u4e0d\u200b\u5e72\u6270\u200b\u7684\u200b\uff09\n    \u200b\u4e5f\u200b\u53eb\u200b\u201c\u200b\u6c38\u4e45\u6027\u200b\u201d\nD\uff1a\u200b\u6301\u4e45\u6027\u200b\n    \u200b\u4e5f\u200b\u53eb\u200b\u201c\u200b\u6c38\u4e45\u6027\u200b\u201d\n    \u200b\u4e00\u4e2a\u200b\u4e8b\u52a1\u200b\u4e00\u65e6\u200b\u63d0\u4ea4\u200b\u6210\u529f\u200b\u6267\u884c\u200b\u6210\u529f\u200b\uff0c\u200b\u90a3\u4e48\u200b\u4ed6\u200b\u5bf9\u200b\u6570\u636e\u5e93\u200b\u4e2d\u200b\u7684\u200b\u6570\u636e\u200b\u7684\u200b\u4fee\u6539\u200b\u5e94\u8be5\u200b\u662f\u200b\u6c38\u4e45\u200b\u7684\u200b\n    \u200b\u63a5\u4e0b\u6765\u200b\u7684\u200b\u5176\u4ed6\u200b\u64cd\u4f5c\u200b\u6216\u8005\u200b\u6545\u969c\u200b\u4e0d\u200b\u5e94\u8be5\u200b\u5bf9\u200b\u5176\u200b\u6709\u200b\u4efb\u4f55\u200b\u5f71\u54cd\u200b\n\"\"\"\n</code></pre></li> <li>\u200b\u5982\u4f55\u200b\u4f7f\u7528\u200b\u4e8b\u52a1\u200b ```python</li> </ul>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/21.%20%E4%BA%8B%E5%8A%A1/#_1","title":"\u4e8b\u52a1\u200b\u76f8\u5173\u200b\u7684\u200b\u5173\u952e\u5b57","text":""},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/21.%20%E4%BA%8B%E5%8A%A1/#1","title":"1. \u200b\u5f00\u542f\u200b\u4e8b\u52a1","text":"<p>start transaction;</p>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/21.%20%E4%BA%8B%E5%8A%A1/#2","title":"2. \u200b\u56de\u6eda\u200b\uff08\u200b\u56de\u6eda\u200b\u5230\u200b\u5341\u4e94\u200b\u4e4b\u524d\u200b\u7684\u200b\u72b6\u6001\u200b\uff09","text":"<p>rollback;</p>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/21.%20%E4%BA%8B%E5%8A%A1/#3","title":"3. \u200b\u786e\u8ba4","text":"<p>commit;</p>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/22.%20%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B/","title":"22. \u200b\u5b58\u50a8\u200b\u8fc7\u7a0b","text":"<p>\u200b\u5b58\u50a8\u200b\u8fc7\u7a0b\u200b\u5c31\u200b\u7c7b\u4f3c\u200bpython\u200b\u4e2d\u200b\u7684\u200b\u81ea\u5b9a\u4e49\u200b\u51fd\u6570\u200b</p> <pre><code>create procedure \u200b\u5b58\u50a8\u200b\u8fc7\u7a0b\u200b\u7684\u200b\u540d\u5b57\u200b(\u200b\u5f62\u53c2\u200b1\uff0c\u200b\u5f62\u53c2\u200b2...)\nbegin\n    sql\nend\n# \u200b\u8c03\u7528\u200b\ncall \u200b\u5b58\u50a8\u200b\u8fc7\u7a0b\u200b\u7684\u200b\u540d\u5b57\u200b();\n\n# \u200b\u6848\u5217\u200b\ndelimiter $$\ncreate procedure p1(\n    in m int,\n    in n int,\n    out res int\n)\nbegin\n    select tname from teacher where tid&gt;m and tid &lt;n;\n    set res = 666;  # \u200b\u5c06\u200bres\u200b\u53d8\u91cf\u200b\u4fee\u6539\u200b\uff0c\u200b\u7528\u6765\u200b\u6807\u8bc6\u200b\u5f53\u524d\u200b\u5b58\u50a8\u200b\u8fc7\u7a0b\u200b\u4ee3\u7801\u200b\u786e\u5b9e\u200b\u6267\u884c\u200b\u4e86\u200b\nend $$\n\n# \u200b\u9488\u5bf9\u200b\u5f62\u53c2\u200bres \u200b\u4e0d\u80fd\u200b\u76f4\u63a5\u200b\u4f20\u200b\u6570\u636e\u200b\uff0c\u200b\u5e94\u8be5\u200b\u7a7f\u200b\u4e00\u4e2a\u200b\u53d8\u91cf\u540d\u200b\n# \u200b\u5b9a\u4e49\u200b\u53d8\u91cf\u200b\nset @ret = 10;\nselect @ret;\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/23%20%E5%87%BD%E6%95%B0/","title":"23 \u200b\u51fd\u6570","text":"<p>\u200b\u8ddf\u200b\u5b58\u50a8\u200b\u8fc7\u7a0b\u200b\u662f\u200b\u6709\u200b\u533a\u522b\u200b\u7684\u200b\uff0c\u200b\u5b58\u50a8\u200b\u8fc7\u7a0b\u200b\u662f\u200b\u81ea\u5b9a\u4e49\u200b\u51fd\u6570\u200b\uff0c\u200b\u51fd\u6570\u200b\u5c31\u200b\u5c5e\u4e8e\u200b\u5185\u7f6e\u200b\u51fd\u6570\u200b ```python ('jaosn','0755','ls -l /etc',NOW(),'yes')</p> <p>create table blog(     id int primary key auto_increment,     name char(32),     sub_time datetime );</p> <p>insert into blog(name,sub_time) values     ('\u200b\u7b2c\u200b1\u200b\u7bc7\u200b','2015-03-01 11:11:11'),     ('\u200b\u7b2c\u200b2\u200b\u7bc7\u200b','2015-03-11 11:11:11'),     ('\u200b\u7b2c\u200b3\u200b\u7bc7\u200b','2016-05-01 11:11:11'),     ('\u200b\u7b2c\u200b4\u200b\u7bc7\u200b','2016-05-11 11:11:11'),     ('\u200b\u7b2c\u200b5\u200b\u7bc7\u200b','2017-03-01 11:11:11'),     ('\u200b\u7b2c\u200b6\u200b\u7bc7\u200b','2015-03-11 11:11:11'),     ('\u200b\u7b2c\u200b7\u200b\u7bc7\u200b','2018-08-11 11:11:11'),     ('\u200b\u7b2c\u200b8\u200b\u7bc7\u200b','2018-08-01 11:11:11');</p> <p>select date_format(sub_time,'%Y-%m'),count(id) from blog group by date_format(sub_time,'%Y-%m');</p>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/24.%20%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/","title":"24. \u200b\u6d41\u7a0b\u200b\u63a7\u5236","text":"<p>```python</p>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/24.%20%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/#if","title":"if \u200b\u5224\u65ad","text":"<p>delimiter // create procedure proc_if () begin     declare i in default 0     if i = 1 then         select 1;     elseif i = 2 then         select 2;     else         select 7;     end if; end // delimiter ;</p>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/24.%20%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/#while","title":"while \u200b\u5faa\u73af","text":"<p>delimiter // create procedure proc_while() begin     declare num int;     set num = 0;     while num &lt; 10 do         select num;         set num = num + 1;     end while; end // delimiter;</p>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/25.%20%E7%B4%A2%E5%BC%95/","title":"\u7d22\u5f15","text":"<p>\u200b\u7d22\u5f15\u200b \u200b\u5728\u200bmysql\u200b\u4e2d\u200b\u4e5f\u200b\u53eb\u200b \u200b\u952e\u200b \uff0c\u200b\u662f\u200b\u5b58\u50a8\u200b\u5f15\u64ce\u200b\u7528\u4e8e\u200b\u5feb\u901f\u200b\u67e5\u627e\u200b\u8bb0\u5f55\u200b\u7684\u200b\u4e00\u79cd\u200b\u6570\u636e\u7ed3\u6784\u200b * primary key * unique key * index key \u200b\u6ce8\u610f\u200bforeign key\u200b\u4e0d\u662f\u200b\u7528\u6765\u200b\u52a0\u901f\u200b\u67e5\u8be2\u200b\u7684\u200b\uff0c\u200b\u4e0d\u200b\u5728\u200b\u6211\u4eec\u200b\u7684\u200b\u7814\u7a76\u200b\u8303\u56f4\u200b\u4e4b\u5185\u200b \u200b\u4e0a\u9762\u200b\u4e09\u79cd\u200bkey\uff0c\u200b\u524d\u9762\u200b\u4e24\u79cd\u200b\u53ef\u4ee5\u200b\u589e\u52a0\u200b\u67e5\u8be2\u200b\u901f\u5ea6\u200b\u4e4b\u5916\u200b\u5404\u81ea\u200b\u8fd8\u200b\u5177\u6709\u200b\u7ea6\u675f\u6761\u4ef6\u200b\uff0c\u200b\u800c\u200b\u6700\u540e\u200b\u4e00\u79cd\u200bindex key \u200b\u6ca1\u6709\u200b\u4efb\u4f55\u200b\u7684\u200b\u7ea6\u675f\u6761\u4ef6\u200b\uff0c\u200b\u53ea\u662f\u200b\u7528\u6765\u200b\u5e2e\u52a9\u200b\u4f60\u200b\u5feb\u901f\u200b\u67e5\u8be2\u200b\u6570\u636e\u200b</p> <p>\u200b\u4e00\u5f20\u200b\u8868\u4e2d\u200b\u53ef\u4ee5\u200b\u6709\u200b\u591a\u4e2a\u200b\u7d22\u5f15\u200b\uff08\u200b\u591a\u4e2a\u200b\u76ee\u5f55\u200b\uff09 \u200b\u7d22\u5f15\u200b\u867d\u7136\u200b\u80fd\u591f\u200b\u5e2e\u52a9\u200b\u52a0\u5feb\u200b\u67e5\u8be2\u200b\u901f\u5ea6\u200b\u4f46\u662f\u200b\u4e5f\u200b\u6709\u200b\u7f3a\u70b9\u200b <pre><code>\"\"\"\n1. \u200b\u5f53\u8868\u4e2d\u200b\u6709\u200b\u5927\u91cf\u200b\u6570\u636e\u200b\u5b58\u5728\u200b\u7684\u200b\u524d\u63d0\u200b\u4e0b\u200b\uff0c\u200b\u521b\u5efa\u200b\u7d22\u5f15\u200b\u7684\u200b\u901f\u5ea6\u200b\u4f1a\u200b\u53d8\u6162\u200b\n2. \u200b\u5f53\u200b\u7d22\u5f15\u200b\u521b\u5efa\u200b\u5b8c\u6bd5\u200b\u4e4b\u540e\u200b\uff0c\u200b\u5bf9\u8868\u200b\u7684\u200b\u67e5\u8be2\u200b\u6027\u80fd\u200b\u4f1a\u200b\u5927\u5e45\u5ea6\u200b\u7684\u200b\u63d0\u5347\u200b\uff0c\u200b\u4f46\u662f\u200b\u5199\u200b\u7684\u200b\u6027\u80fd\u200b\u4e5f\u200b\u4f1a\u200b\u5927\u5e45\u5ea6\u200b\u4e0b\u964d\u200b\n\"\"\"\n\u200b\u7d22\u5f15\u200b\u4e0d\u8981\u200b\u4e71\u200b\u521b\u5efa\u200b\n</code></pre></p>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/25.%20%E7%B4%A2%E5%BC%95/#b","title":"b+\u200b\u6811","text":"<p>\u200b\u7565\u200b</p>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/25.%20%E7%B4%A2%E5%BC%95/#primary-key","title":"\u805a\u96c6\u200b\u7d22\u5f15\u200b\uff08primary key\uff09","text":"<pre><code>\"\"\"\n\u200b\u805a\u96c6\u200b\u7d22\u5f15\u200b\u5c31\u662f\u200b\u4e3b\u952e\u200b\nInnodb \u200b\u53ea\u6709\u200b\u4e24\u4e2a\u200b\u6587\u4ef6\u200b\uff0c\u200b\u76f4\u63a5\u200b\u5c06\u200b\u4e3b\u952e\u200b\u653e\u5728\u200b\u4e86\u200bidb\u200b\u8868\u4e2d\u200b\nMyIsam \u200b\u4e09\u4e2a\u200b\u6587\u4ef6\u200b\uff0c\u200b\u5355\u72ec\u200b\u5c06\u200b\u7d22\u5f15\u200b\u5b58\u653e\u200b\u5728\u200b\u4e00\u4e2a\u200b\u6587\u4ef6\u200b\n\"\"\"\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/25.%20%E7%B4%A2%E5%BC%95/#uniqueindex","title":"\u8f85\u52a9\u200b\u7d22\u5f15\u200b\uff08unique\uff0cindex\uff09","text":"<p>\u200b\u67e5\u8be2\u200b\u6570\u636e\u200b\u7684\u200b\u65f6\u5019\u200b\u4e0d\u80fd\u200b\u4e00\u76f4\u200b\u4f7f\u7528\u200b\u5230\u200b\u4e3b\u952e\u200b\uff0c\u200b\u4e5f\u200b\u6709\u200b\u53ef\u80fd\u200b\u7528\u5230\u200bname\uff0cpassword\u200b\u7b49\u200b\u5176\u4ed6\u200b\u5b57\u200b\u6bb5\u200b\uff0c\u200b\u90a3\u4e48\u200b\u8fd9\u4e2a\u200b\u65f6\u5019\u200b\u662f\u200b\u6ca1\u200b\u529e\u6cd5\u200b\u5229\u7528\u200b\u805a\u96c6\u200b\u7d22\u5f15\u200b\u3002\u200b\u8fd9\u4e2a\u200b\u65f6\u5019\u200b\u4f60\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u6839\u636e\u200b\u60c5\u51b5\u200b\u7ed9\u200b\u5176\u4ed6\u200b\u5b57\u200b\u6bb5\u200b\u8bbe\u7f6e\u200b\u8f85\u52a9\u200b\u7d22\u5f15\u200b\uff08\u200b\u4e5f\u200b\u662f\u200b\u4e00\u4e2a\u200bb+\u200b\u6811\u200b\uff09 <pre><code>\"\"\"\n\u200b\u53f6\u5b50\u200b\u8282\u70b9\u200b\u5b58\u653e\u200b\u7684\u200b\u662f\u200b\u6570\u636e\u200b\u5bf9\u5e94\u200b\u7684\u200b\u4e3b\u200b\u952e\u503c\u200b\n    \u200b\u5148\u200b\u6309\u7167\u200b\u8f85\u52a9\u200b\u7d22\u5f15\u200b\u62ff\u200b\u5012\u200b\u6570\u636e\u200b\u7684\u200b\u4e3b\u200b\u952e\u503c\u200b\n    \u200b\u4e4b\u540e\u200b\u8fd8\u662f\u200b\u9700\u8981\u200b\u53bb\u200b\u4e3b\u952e\u200b\u7684\u200b\u805a\u96c6\u200b\u7d22\u5f15\u200b\u91cc\u9762\u200b\u67e5\u8be2\u200b\u6570\u636e\u200b\n\"\"\"\n</code></pre></p>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/25.%20%E7%B4%A2%E5%BC%95/#_2","title":"\u8986\u76d6\u200b\u7d22\u5f15","text":"<p>\u200b\u5728\u200b\u8f85\u52a9\u200b\u7d22\u5f15\u200b\u7684\u200b\u53f6\u5b50\u200b\u8282\u70b9\u200b\u5c31\u200b\u5df2\u7ecf\u200b\u62ff\u5230\u200b\u4e86\u200b\u9700\u8981\u200b\u7684\u200b\u6570\u636e\u200b ```python</p>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/25.%20%E7%B4%A2%E5%BC%95/#name","title":"\u7ed9\u200bname\u200b\u8bbe\u7f6e\u200b\u8f85\u52a9\u200b\u7d22\u5f15","text":"<p>select name from user where name='jason';</p>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/25.%20%E7%B4%A2%E5%BC%95/#_3","title":"\u975e\u200b\u8986\u76d6\u200b\u7d22\u5f15","text":"<p>select age from User where name='jason';</p>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/3.%20%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/","title":"\u5b58\u50a8\u200b\u5f15\u64ce","text":"<p>\u200b\u9488\u5bf9\u200b\u4e0d\u540c\u200b\u7684\u200b\u6570\u636e\u200b\u5e94\u8be5\u200b\u6709\u200b\u5bf9\u5e94\u200b\u7684\u200b\u4e0d\u540c\u200b\u7684\u200b\u5904\u7406\u200b\u673a\u5236\u200b\u6765\u200b\u5b58\u50a8\u200b</p> <p>\u200b\u5b58\u50a8\u200b\u5f15\u64ce\u200b\u5c31\u662f\u200b\u4e0d\u540c\u200b\u7684\u200b\u5904\u7406\u200b\u673a\u5236\u200b</p>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/3.%20%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/#mysql","title":"mysql \u200b\u4e3b\u8981\u200b\u5b58\u50a8\u200b\u5f15\u64ce","text":"<ul> <li>lnnodb</li> </ul> <p>\u200b\u662f\u200bMySQL5.5\u200b\u7248\u672c\u200b\u53ca\u200b\u4e4b\u540e\u200b\u9ed8\u8ba4\u200b\u7684\u200b\u5b58\u50a8\u200b\u5f15\u64ce\u200b</p> <p>\u200b\u5b58\u50a8\u200b\u6570\u636e\u200b\u66f4\u52a0\u200b\u5b89\u5168\u200b</p> <ul> <li>myisam</li> </ul> <p>\u200b\u662f\u200bMySQL5.5\u200b\u7248\u672c\u200b\u4e4b\u524d\u200b\u9ed8\u8ba4\u200b\u7684\u200b\u5b58\u50a8\u200b\u5f15\u64ce\u200b</p> <p>\u200b\u901f\u5ea6\u200b\u8981\u200b\u6bd4\u200blnnodb\u200b\u66f4\u200b\u5feb\u200b\uff0c\u200b\u4f46\u662f\u200b\u6211\u4eec\u200b\u66f4\u52a0\u200b\u6ce8\u91cd\u200b\u6570\u636e\u5b89\u5168\u200b</p> <ul> <li>memory</li> </ul> <p>\u200b\u5185\u5b58\u200b\u5f15\u64ce\u200b\uff08\u200b\u6570\u636e\u200b\u5168\u90e8\u200b\u653e\u5728\u200b\u5185\u5b58\u200b\u4e2d\u200b\uff09\u200b\u65ad\u7535\u200b\u6570\u636e\u200b\u4e22\u5931\u200b</p> <ul> <li>blackhole</li> </ul> <p>\u200b\u65e0\u8bba\u200b\u5b58\u200b\u4ec0\u4e48\u200b\uff0c\u200b\u90fd\u200b\u7acb\u523b\u200b\u6d88\u5931\u200b(\u200b\u9ed1\u6d1e\u200b)</p> <pre><code>\"\"\"\n# \u200b\u67e5\u770b\u200b\u6240\u6709\u200b\u7684\u200b\u5b58\u50a8\u200b\u5f15\u64ce\u200b\nshow engines;\n# \u200b\u5728\u200b\u4e0d\u540c\u200b\u7684\u200b\u5b58\u50a8\u200b\u5f15\u64ce\u200b\u5728\u200b\u5b58\u50a8\u200b\u8868\u200b\u7684\u200b\u65f6\u5019\u200b\u5f02\u540c\u200b\u70b9\u200b\ncreate table t1(id int) engine=innodb;\ncreate table t2(id int) engine=myisam;\ncreate table (id int) engine=memory;\ncreate table(id int) engine=blcakhole;\n\"\"\"\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/4.%20%E5%88%9B%E5%BB%BA%E8%A1%A8%E7%9A%84%E5%AE%8C%E6%95%B4%E8%AF%AD%E6%B3%95/","title":"\u521b\u5efa\u200b\u8868\u200b\u7684\u200b\u5b8c\u6574\u200b\u8bed\u6cd5","text":"<pre><code># \u200b\u8bed\u6cd5\u200b\ncreate table \u200b\u8868\u540d\u200b(\n    \u200b\u5b57\u6bb5\u540d\u200b1 \u200b\u7c7b\u578b\u200b\uff08\u200b\u5bbd\u5ea6\u200b\uff09 \u200b\u7ea6\u675f\u6761\u4ef6\u200b,\n    \u200b\u5b57\u6bb5\u540d\u200b2 \u200b\u7c7b\u578b\u200b\uff08\u200b\u5bbd\u5ea6\u200b\uff09 \u200b\u7ea6\u675f\u6761\u4ef6\u200b,\n    \u200b\u5b57\u6bb5\u540d\u200b3 \u200b\u7c7b\u578b\u200b\uff08\u200b\u5bbd\u5ea6\u200b\uff09 \u200b\u7ea6\u675f\u6761\u4ef6\u200b\n)\n\n# \u200b\u6ce8\u610f\u200b\n1\u3001\u200b\u5728\u200b\u540c\u200b\u4e00\u5f20\u200b\u8868\u200b\u5b57\u6bb5\u540d\u200b\u4e0d\u80fd\u200b\u91cd\u590d\u200b\n2\u3001\u200b\u5bbd\u5ea6\u200b\u548c\u200b\u7ea6\u675f\u6761\u4ef6\u200b\u662f\u200b\u53ef\u9009\u200b\u7684\u200b\uff08\u200b\u53ef\u200b\u5199\u200b\u53ef\u4e0d\u200b\u5199\u200b\uff09\u200b\u800c\u200b\u5b57\u6bb5\u540d\u200b\u548c\u200b\u5b57\u200b\u6bb5\u200b\u7c7b\u578b\u200b\u662f\u200b\u5fc5\u987b\u200b\u7684\u200b\uff0c\n    \u200b\u7ea6\u675f\u6761\u4ef6\u200b\u5199\u200b\u7684\u200b\u82b1\u200b\uff0c\u200b\u652f\u6301\u200b\u5199\u200b\u591a\u4e2a\u200b\n    \u200b\u5b57\u6bb5\u540d\u200b \u200b\u7c7b\u578b\u200b\uff08\u200b\u5bbd\u5ea6\u200b\uff09 \u200b\u7ea6\u675f\u6761\u4ef6\u200b1 \u200b\u7ea6\u675f\u6761\u4ef6\u200b2...\n    create table t5(id); # \u200b\u62a5\u9519\u200b\n3\u3001\u200b\u6700\u540e\u200b\u4e00\u884c\u200b\u4e0d\u80fd\u200b\u6709\u200b\u9017\u53f7\u200b\n    create table t6(\n        id int,\n        name char,\n    );  # \u200b\u62a5\u9519\u200b\n\n\"\"\"\u200b\u8865\u5145\u200b\"\"\"\n# \u200b\u5bbd\u5ea6\u200b\n    \u200b\u4e00\u822c\u200b\u60c5\u51b5\u200b\u4e0b\u6307\u200b\u7684\u200b\u662f\u200b\u5bf9\u200b\u5b58\u50a8\u200b\u6570\u636e\u200b\u7684\u200b\u9650\u5236\u200b\n    create table t7(name char);     # \u200b\u9ed8\u8ba4\u200b\u5bbd\u5ea6\u200b\u4e3a\u200b1\n    insert into t7 values('jason');\n    insert into t7 values(null); # \u200b\u5173\u952e\u5b57\u200bNULL\n    \u200b\u9488\u5bf9\u200b\u4e0d\u540c\u200b\u7684\u200b\u7248\u672c\u200b\u4f1a\u200b\u51fa\u73b0\u200b\u4e0d\u540c\u200b\u7684\u200b\u6548\u679c\u200b\n        5.6 \u200b\u7248\u672c\u200b\u9ed8\u8ba4\u200b\u6ca1\u6709\u200b\u5f00\u542f\u200b\u4e25\u683c\u200b\u6a21\u5f0f\u200b\uff0c\u200b\u89c4\u5b9a\u200b\u53ea\u80fd\u200b\u5b58\u200b\u4e00\u4e2a\u200b\u5b57\u7b26\u200b\u4f60\u200b\u7ed9\u200b\u591a\u4e2a\u200b\u5b57\u7b26\u200b\uff0c\u200b\u4ed6\u4f1a\u200b\u81ea\u52a8\u200b\u622a\u53d6\u200b\n        5.7 \u200b\u7248\u672c\u200b\u53ca\u200b\u4ee5\u4e0a\u200b\u6216\u8005\u200b\u5f00\u542f\u200b\u4e86\u200b\u4e25\u683c\u200b\u6a21\u5f0f\u200b\uff0c\u200b\u90a3\u4e48\u200b\u89c4\u5b9a\u200b\u53ea\u80fd\u200b\u5b58\u200b\u51e0\u4e2a\u200b\uff0c\u200b\u4e0d\u80fd\u200b\u8d85\u200b\uff0c\u200b\u4e00\u65e6\u200b\u8d85\u51fa\u8303\u56f4\u200b\u7acb\u200b    \u200b\u523b\u200b\u62a5\u9519\u200b\uff08Data too long for\u3002\u3002\u3002\uff09\n\n\"\"\"\u200b\u4e25\u683c\u200b\u6a21\u5f0f\u200b\u5230\u5e95\u200b\u5f00\u4e0d\u5f00\u200b\u5462\u200b\uff1f\"\"\"\nMySQL5.7 \u200b\u4e4b\u540e\u200b\u7684\u200b\u7248\u672c\u200b\u9ed8\u8ba4\u200b\u90fd\u200b\u662f\u200b\u5f00\u542f\u200b\u4e25\u683c\u200b\u6a21\u5f0f\u200b\u7684\u200b\n\u200b\u4f7f\u7528\u200b\u6570\u636e\u5e93\u200b\u7684\u200b\u51c6\u5219\u200b\uff1a\n    \u200b\u80fd\u200b\u5c3d\u91cf\u5c11\u200b\u7684\u200b\u8ba9\u200b\u6570\u636e\u5e93\u200b\u5e72\u6d3b\u200b\u5c31\u200b\u5c11\u200b\uff0c\u200b\u4e0d\u8981\u200b\u7ed9\u200b\u6570\u636e\u5e93\u200b\u589e\u52a0\u200b\u989d\u5916\u200b\u7684\u200b\u538b\u529b\u200b\n\n# \u200b\u7ea6\u675f\u6761\u4ef6\u200b null not null\u200b\u4e0d\u80fd\u200b\u63d2\u5165\u200bnull\ncreate table t8(id int, name char not null);\n\n\"\"\"\n\u200b\u5bbd\u5ea6\u200b\u548c\u200b\u7ea6\u675f\u6761\u4ef6\u200b\u5230\u5e95\u200b\u662f\u200b\u4ec0\u4e48\u200b\u5173\u7cfb\u200b\uff1a\n    \u200b\u5bbd\u5ea6\u200b\u662f\u200b\u7528\u6765\u200b\u9650\u5236\u200b\u6570\u636e\u200b\u7684\u200b\u5b58\u50a8\u200b\n    \u200b\u7ea6\u675f\u6761\u4ef6\u200b\u662f\u200b\u5728\u200b\u5bbd\u5ea6\u200b\u7684\u200b\u57fa\u7840\u200b\u4e4b\u4e0a\u200b\u589e\u52a0\u200b\u7684\u200b\u989d\u5916\u200b\u7684\u200b\u7ea6\u675f\u200b\n\"\"\"\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/6.%20%E7%BA%A6%E6%9D%9F%E6%9D%A1%E4%BB%B6/","title":"\u7ea6\u675f\u6761\u4ef6","text":"<pre><code>\u200b\u7ea6\u675f\u6761\u4ef6\u200b\n    not null\n    zerofill\n    unsigned\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/6.%20%E7%BA%A6%E6%9D%9F%E6%9D%A1%E4%BB%B6/#defualt","title":"defualt \u200b\u9ed8\u8ba4\u503c","text":"<pre><code># \u200b\u8865\u5145\u200b\u77e5\u8bc6\u70b9\u200b \u200b\u63d2\u5165\u200b\u6570\u636e\u200b\u7684\u200b\u65f6\u5019\u200b\u53ef\u4ee5\u200b\u6307\u5b9a\u200b\u5b57\u200b\u6bb5\u200b\ncreate table t1(\n    id int,\n    name char(16)\n)\ninsert into t1(name,id) values('jason',1);\n\ncreate table t2(\n    id int,\n    name char(16),\n    gender enum('male','female','others') default 'male'\n);\ninsert into t2(id,name) values(1,'jason');\ninsert into t2 values(2,'egon','female');\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/6.%20%E7%BA%A6%E6%9D%9F%E6%9D%A1%E4%BB%B6/#unique","title":"unique\u200b\u552f\u4e00","text":"<pre><code>create table t3(\n    id int unique\n    name char(16)\n);\ninsert into t3 values(1,'jason'),(1,'egon');\ninsert into t3 values(1,'jason'),(2,'egon');\n\n#\u200b\u8054\u5408\u200b\u552f\u4e00\u200b\n\"\"\"\nip\u200b\u548c\u200bport\n\u200b\u5355\u4e2a\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u91cd\u590d\u200b \u200b\u4f46\u662f\u200b\u52a0\u5728\u4e00\u8d77\u200b\u5fc5\u987b\u200b\u662f\u200b\u552f\u4e00\u200b\u5f97\u200b\n\"\"\"\ncreate table t4(\n    id int,\n    ip char(16),\n    port int,\n    unique(ip,prot)\n)\ninsert into t4 values(1,'127.0.0.1',8080);\ninsert into t4 values(2,'127.0.0.1',8081);\ninsert into t4 values(3,'127.0.0.2',8080);\ninsert into t4 values(4,'127.0.0.1',8080);  # \u200b\u62a5\u9519\u200b\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/6.%20%E7%BA%A6%E6%9D%9F%E6%9D%A1%E4%BB%B6/#primary-key","title":"primary key \u200b\u4e3b\u952e","text":"<pre><code>\"\"\"\n1.\u200b\u5355\u5355\u200b\u4ece\u200b\u7ea6\u675f\u200b\u6548\u679c\u200b\u4e0a\u200b\u6765\u770b\u200bprimay key\u200b\u7b49\u4ef7\u200b\u4e8e\u200bnot null + unique\n\u200b\u975e\u7a7a\u4e14\u200b\u552f\u4e00\u200b\uff01\uff01\n\"\"\"\ncreate teable t5(id int primay key);\ninsert into t5 values(null);    # \u200b\u62a5\u9519\u200b\ninsert into t5 values(1),(1);   # \u200b\u62a5\u9519\u200b\ninsert into t5 values(1),(2);\n\n\"\"\"\n2. \u200b\u4ed6\u200b\u9664\u4e86\u200b\u6709\u200b\u7ea6\u675f\u200b\u6548\u679c\u200b\u4e4b\u5916\u200b\uff0c\u200b\u4ed6\u200b\u8fd8\u662f\u200bInnodb\u200b\u5b58\u50a8\u200b\u5f15\u64ce\u200b\u7ec4\u7ec7\u200b\u6570\u636e\u200b\u7684\u200b\u4f9d\u636e\u200b\nInnodb\u200b\u5b58\u50a8\u200b\u5f15\u64ce\u200b\u5728\u200b\u521b\u5efa\u200b\u8868\u200b\u7684\u200b\u65f6\u5019\u200b\u5fc5\u987b\u200b\u8981\u200b\u6709\u200bprimary key\n\u200b\u4ee5\u4e3a\u200b\u5b83\u200b\u7c7b\u4f3c\u200b\u4e8e\u4e66\u200b\u7684\u200b\u76ee\u5f55\u200b \u200b\u80fd\u591f\u200b\u5e2e\u52a9\u200b\u63d0\u5347\u200b\u67e5\u8be2\u200b\u6548\u7387\u200b\u5e76\u4e14\u200b\u4e5f\u200b\u662f\u200b\u5efa\u8868\u200b\u7684\u200b\u4f9d\u636e\u200b\n\"\"\"\n# 1. \u200b\u4e00\u5f20\u200b\u8868\u4e2d\u4e14\u200b\u53ea\u6709\u200b\u4e00\u4e2a\u200b\u4e3b\u952e\u200b \u200b\u5982\u679c\u200b\u4f60\u200b\u6ca1\u6709\u200b\u8bbe\u7f6e\u200b\u4e3b\u952e\u200b \u200b\u90a3\u4e48\u200b\u4f1a\u200b\u4ece\u200b\u4e0a\u200b\u5f80\u200b\u4e0b\u200b\u641c\u7d22\u200b\u76f4\u5230\u200b\u9047\u5230\u200b\u4e00\u4e2a\u200b\u975e\u7a7a\u4e14\u200b\u552f\u4e00\u200b\u7684\u200b\u5b57\u200b\u6bb5\u200b\u5c06\u200b\u5b83\u200b\u81ea\u52a8\u200b\u5347\u7ea7\u200b\u4e3a\u4e3b\u200b\u952e\u200b\ncreate table t6(\n    id int,\n    name char(16),\n    age int not null unique,\n    addr char(32)\n)\n\n# 2. \u200b\u5982\u679c\u200b\u8868\u4e2d\u200b\u6ca1\u6709\u200b\u4e3b\u952e\u200b\u4e5f\u200b\u6ca1\u6709\u200b\u5176\u4ed6\u200b\u4efb\u4f55\u200b\u975e\u7a7a\u4e14\u200b\u552f\u4e00\u200b\u5b57\u200b\u6bb5\u200b \u200b\u90a3\u4e48\u200bInnodb\u200b\u4f1a\u200b\u91c7\u7528\u200b\u81ea\u5df1\u200b\u5185\u90e8\u200b\u63d0\u4f9b\u200b\u7684\u200b\u4e00\u4e2a\u200b\u9690\u85cf\u200b\u5b57\u200b\u6bb5\u200b\u4f5c\u4e3a\u200b\u4e3b\u952e\u200b\uff0c\u200b\u9690\u85cf\u200b\u610f\u5473\u7740\u200b\u4f60\u200b\u65e0\u6cd5\u200b\u4f7f\u7528\u200b\u5b83\u200b\uff0c\u200b\u5c31\u200b\u65e0\u6cd5\u200b\u63d0\u5347\u200b\u67e5\u8be2\u200b\u901f\u5ea6\u200b\n\n# 3. \u200b\u4e00\u5f20\u200b\u8868\u4e2d\u200b\u901a\u5e38\u200b\u6709\u200b\u4e00\u4e2a\u200b\u4e3b\u952e\u200b\u5b57\u200b\u6bb5\u200b\uff0c\u200b\u5e76\u4e14\u200b\u5c06\u200bid/uid/sid\u200b\u5b57\u200b\u6bb5\u200b\u4f5c\u4e3a\u200b\u4e3b\u952e\u200b\n# \u200b\u5355\u4e2a\u200b\u5b57\u200b\u6bb5\u200b\u4e3b\u952e\u200b\ncreate table t15(\n    id int primary key,\n    name char(16)\n);\n# \u200b\u4e3b\u952e\u200b\u8054\u5408\u200b\uff08\u200b\u591a\u4e2a\u200b\u5b57\u200b\u6bb5\u200b\u8054\u5408\u200b\u8d77\u6765\u200b\u4f5c\u4e3a\u200b\u8868\u200b\u7684\u200b\u4e3b\u952e\u200b \u200b\u672c\u8d28\u200b\u8fd8\u662f\u200b\u4e00\u4e2a\u200b\u4e3b\u952e\u200b\uff09\ncreate table t7(\n    ip char(16),\n    prot int,\n    primary key(ip,prt)\n);\n\n\"\"\"\n\u200b\u4e5f\u200b\u610f\u5473\u7740\u200b \u200b\u6211\u4eec\u200b\u5728\u200b\u521b\u5efa\u200b\u8868\u200b\u7684\u200b\u65f6\u5019\u200bid\u200b\u5b57\u200b\u6bb5\u200b\u4e00\u5b9a\u200b\u8981\u52a0\u200bprimary key\n\"\"\"\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/6.%20%E7%BA%A6%E6%9D%9F%E6%9D%A1%E4%BB%B6/#auto_increment","title":"auto_increment\u200b\u81ea\u589e","text":"<pre><code># \u200b\u5f53\u200b\u7f16\u53f7\u200b\u7279\u522b\u200b\u591a\u200b\u7684\u200b\u65f6\u5019\u200b \u200b\u4eba\u4e3a\u200b\u7684\u200b\u53bb\u200b\u7ef4\u62a4\u200b\u7684\u200b\u592a\u200b\u9ebb\u70e6\u200b\ncreate table t8(\n    id int primary key atuo_increment,\n    name char(16)\n);\ninsert into t8(name) values('jason'),('egon'),('kevin');\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/6.%20%E7%BA%A6%E6%9D%9F%E6%9D%A1%E4%BB%B6/#_2","title":"\u7ed3\u8bba","text":"<pre><code>\"\"\"\n\u200b\u4ee5\u540e\u200b\u518d\u200b\u521b\u5efa\u200b\u8868\u200b\u7684\u200bid\uff08\u200b\u6570\u636e\u200b\u7684\u200b\u552f\u4e00\u200b\u6807\u8bc6\u200b\uff09\u200b\u5b57\u6bb5\u200b\u7684\u200b\u65f6\u5019\u200b\nid int primary key auto_increment\n\"\"\"\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/6.%20%E7%BA%A6%E6%9D%9F%E6%9D%A1%E4%BB%B6/#_3","title":"\u8865\u5145","text":"<p>```python delete from # \u200b\u5220\u9664\u200b\u8868\u4e2d\u200b\u7684\u200b\u6570\u636e\u200b\u7684\u200b\u65f6\u5019\u200b\uff0c\u200b\u4e3b\u952e\u200b\u7684\u200b\u81ea\u589e\u200b\u4e0d\u4f1a\u200b\u505c\u6b62\u200b truncate t1;    # \u200b\u6e05\u7a7a\u200b\u8868\u200b\u6570\u636e\u200b\u5e76\u4e14\u200b\u91cd\u7f6e\u200b\u4e3b\u952e\u200b</p>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/7.%20%E8%A1%A8%E5%85%B3%E7%B3%BB/","title":"\u8868\u200b\u5173\u7cfb","text":"<pre><code>\"\"\"\n\u200b\u4e00\u200b\u3001\u200b\u8868\u4e0e\u8868\u200b\u4e4b\u95f4\u200b\u6700\u200b\u591a\u200b\u53ea\u6709\u200b\u56db\u79cd\u200b\u5173\u7cfb\u200b\n    1. \u200b\u4e00\u5bf9\u200b\u591a\u200b\u5173\u7cfb\u200b\n        * \u200b\u5728\u200bMysql\u200b\u7684\u200b\u5173\u7cfb\u200b\u4e2d\u200b\u6ca1\u6709\u200b\u591a\u200b\u5bf9\u200b\u4e00\u4e00\u200b\u8bf4\u200b\n        * \u200b\u4e00\u5bf9\u200b\u591a\u200b \u200b\u591a\u200b\u5bf9\u200b\u4e00\u200b \u200b\u90fd\u200b\u53eb\u200b\u4e00\u5bf9\u200b\u591a\u200b\n    2. \u200b\u591a\u200b\u5bf9\u200b\u591a\u200b\u5173\u7cfb\u200b\n    3. \u200b\u4e00\u5bf9\u4e00\u200b\u5173\u7cfb\u200b\n    4. \u200b\u6ca1\u6709\u200b\u5173\u7cfb\u200b\n\"\"\"\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/7.%20%E8%A1%A8%E5%85%B3%E7%B3%BB/#_2","title":"\u4e00\u5bf9\u200b\u591a\u200b\u5173\u7cfb","text":"<pre><code>\"\"\"\n\u200b\u6362\u4f4d\u200b\u601d\u8003\u200b\u5f97\u51fa\u7ed3\u8bba\u200b\n\u200b\u5458\u5de5\u200b\u8868\u200b\u548c\u200b\u90e8\u95e8\u200b\u8868\u200b\n\"\"\"\nforeign key\n    1. \u200b\u4e00\u5bf9\u200b\u591a\u8868\u200b\u5173\u7cfb\u200b \u200b\u5916\u952e\u200b\u5b57\u200b\u6bb5\u200b\u5efa\u200b\u5728\u200b\u591a\u200b\u7684\u200b\u4e00\u65b9\u200b\n    2. \u200b\u5728\u200b\u521b\u5efa\u200b\u8868\u200b\u7684\u200b\u65f6\u5019\u200b \u200b\u4e00\u5b9a\u200b\u8981\u200b\u5148\u5efa\u200b\u88ab\u200b\u5173\u8054\u200b\u8868\u200b\n    3. \u200b\u5728\u200b\u5f55\u5165\u200b\u6570\u636e\u200b\u7684\u200b\u65f6\u5019\u200b \u200b\u4e5f\u200b\u5fc5\u987b\u200b\u5148\u200b\u5f55\u5165\u200b\u88ab\u200b\u5173\u8054\u200b\u7684\u200b\u8868\u200b\n# SQL\u200b\u8bed\u53e5\u200b\u5efa\u7acb\u200b\u8868\u200b\u5173\u7cfb\u200b\ncreate table dep(\n    id int primary key auto_increment,\n    dep_name char(16),\n    dep_desc char(32),\n);\n\ncreate table emp(\n    id int primary key auto_increment,\n    name char(16),\n    gender enum('male','female','others') default 'male',\n    dep_id int,\n    foreign key(dep_id) references dep(id)\n);\ninsert into dep(dep_name,dep_desc) values('\u200b\u6559\u5b66\u90e8\u200b','\u200b\u6559\u4e66\u80b2\u4eba\u200b'),('\u200b\u5916\u4ea4\u90e8\u200b','\u200b\u6c9f\u901a\u200b\u8054\u7cfb\u200b'),('\u200b\u6280\u672f\u90e8\u200b'\uff0c'\u200b\u6280\u672f\u5f00\u53d1\u200b');\ninsert into emp(name,dep_id) values('jason',2),('egon',1),('tank',1),('kevin',3);\n\n# \u200b\u4fee\u6539\u200bdep\u200b\u8868\u200b\u91cc\u9762\u200b\u7684\u200bid\u200b\u5b57\u200b\u6bb5\u200b\nupdate dep set id=200 where id=2;   # \u200b\u4e0d\u884c\u200b\n# \u200b\u5220\u9664\u200bdep\u200b\u8868\u200b\u91cc\u9762\u200b\u7684\u200b\u6570\u636e\u200b\ndelete from dep;    # \u200b\u4e0d\u884c\u200b\n# \u200b\u4e24\u79cd\u200b\u65b9\u6cd5\u200b\uff1a\n# 1\u3001\u200b\u5148\u200b\u5220\u9664\u200b\u6559\u5b66\u90e8\u200b\u5bf9\u5e94\u200b\u7684\u200b\u5458\u5de5\u200b\u6570\u636e\u200b \u200b\u4e4b\u540e\u200b\u518d\u200b\u5220\u9664\u200b\u90e8\u95e8\u200b\n    \u200b\u64cd\u4f5c\u200b\u592a\u8fc7\u200b\u7e41\u7410\u200b\n# 2\u3001\u200b\u771f\u6b63\u200b\u505a\u5230\u200b\u6570\u636e\u200b\u4e4b\u95f4\u200b\u6709\u200b\u5173\u7cfb\u200b\n    \u200b\u66f4\u65b0\u200b\u65e7\u200b\u540c\u6b65\u200b\u66f4\u65b0\u200b\n    \u200b\u5220\u9664\u200b\u65e7\u200b\u540c\u6b65\u200b\u5220\u9664\u200b\n\n\"\"\"\n\u200b\u7ea7\u8054\u200b\u66f4\u65b0\u200b\n\u200b\u7ea7\u8054\u200b\u5220\u9664\u200b\n\"\"\"\ncreate table dep(\n    id int primary key auto_increment,\n    dep_name char(16),\n    dep_desc char(32)\n);\n\ncreate table emp(\n    id int primary key auto_increment,\n    name char(16),\n    gender enum('male','female','others') default 'male',\n    dep_id int,\n    foreign key(dep_id) references dep(id)\n    on update cascade # \u200b\u540c\u6b65\u200b\u66f4\u65b0\u200b\n    on delete cascade # \u200b\u540c\u6b65\u200b\u5220\u9664\u200b\n);\ninsert into dep(dep_name,dep_desc) values('\u200b\u6559\u5b66\u90e8\u200b','\u200b\u6559\u4e66\u80b2\u4eba\u200b'),('\u200b\u5916\u4ea4\u90e8\u200b','\u200b\u6c9f\u901a\u200b\u8054\u7cfb\u200b'),('\u200b\u6280\u672f\u90e8\u200b'\uff0c'\u200b\u6280\u672f\u5f00\u53d1\u200b');\ninsert into emp(name,dep_id) values('jason',2),('egon',1),('tank',1),('kevin',3);\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/7.%20%E8%A1%A8%E5%85%B3%E7%B3%BB/#_3","title":"\u591a\u200b\u5bf9\u200b\u591a","text":"<pre><code>\"\"\"\n\u200b\u56fe\u4e66\u200b\u8868\u200b\u548c\u200b\u4f5c\u8005\u200b\u8868\u200b\n\"\"\"\ncreate table book(\n    id int primary key auto_increment,\n    title varchar(32),\n    price int,\n    author_id int,\n    foreign key(author_id) references author(id)\n    on update cascade   # \u200b\u540c\u6b65\u200b\u66f4\u65b0\u200b\n    on delete cascade   # \u200b\u540c\u6b65\u200b\u5220\u9664\u200b\n);\ncreate table author(\n    id int primary key auto_increment,\n    name varchar(32),\n    age int,\n    book_id int,\n    foreign key(book_id) references book(id)\n    on update cascade # \u200b\u540c\u6b65\u200b\u66f4\u65b0\u200b\n    on delete cascade # \u200b\u540c\u6b65\u200b\u5220\u9664\u200b\n); \n\"\"\"\n\u200b\u4ee5\u200b\u4e0a\u9762\u200b\u7684\u200b\u65b9\u5f0f\u200b\u521b\u5efa\u200b \u200b\u90fd\u200b\u4e0d\u4f1a\u200b\u6210\u529f\u200b\n\u200b\u5176\u5b9e\u200b\u6211\u4eec\u200b\u53ea\u662f\u200b\u8bb0\u5f55\u200b\u4e66\u7c4d\u200b\u548c\u200b\u4f5c\u8005\u200b\u7684\u200b\u5173\u7cfb\u200b\n\u200b\u9488\u5bf9\u200b\u591a\u200b\u5bf9\u200b\u591a\u200b\u5b57\u200b\u6bb5\u8868\u200b\u5173\u7cfb\u200b \u200b\u4e0d\u80fd\u200b\u5728\u200b\u4e24\u5f20\u200b\u539f\u6709\u200b\u7684\u200b\u8868\u4e2d\u200b\u521b\u5efa\u200b\u5916\u952e\u200b\n\u200b\u9700\u8981\u200b\u4f60\u200b\u5355\u72ec\u200b\u518d\u200b\u5f00\u8bbe\u200b\u4e00\u5f20\u200b\u4e13\u95e8\u200b\u6765\u200b\u5b58\u50a8\u200b\u4e24\u5f20\u200b\u8868\u200b\u6570\u636e\u200b\u4e4b\u95f4\u200b\u7684\u200b\u5173\u7cfb\u200b\n\"\"\"\ncreate table book(\n    id int primary key auto_increment,\n    title varchar(32),\n    price int\n);\ncreate table author(\n    id int primary key auto_increment,\n    name varchar(32),\n    age int\n);\ncreate table book2author(\n    id int primary key auto_increment,\n    author_id int,\n    book_id int,\n    foreign key(author_id) references author(id)\n    on update cascade\n    on delete cascade,\n    foreign key(book_id) references book(id)\n    on update cascade\n    on delete cascade\n);\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/7.%20%E8%A1%A8%E5%85%B3%E7%B3%BB/#_4","title":"\u4e00\u5bf9\u4e00","text":"<pre><code>\"\"\"\n\u200b\u5355\u9879\u200b\u7684\u200b\u4e00\u5bf9\u200b\u90fd\u200b\u4e0d\u200b\u6210\u7acb\u200b\uff0c\u200b\u90a3\u4e48\u200b\u4ed6\u4eec\u200b\u7684\u200b\u5173\u7cfb\u200b\u5c31\u662f\u200b\u4e00\u5bf9\u4e00\u200b \u200b\u6216\u8005\u200b\u6ca1\u6709\u200b\u5173\u7cfb\u200b\n\u200b\u5ba2\u6237\u200b\u8868\u200b\u548c\u200b\u5b66\u751f\u200b\u8868\u200b\n\u200b\u5728\u200b\u62a5\u540d\u200b\u4e4b\u524d\u200b\u662f\u200b\u5ba2\u6237\u200b \u200b\u62a5\u540d\u200b\u4e4b\u540e\u200b\u662f\u200b\u5b66\u751f\u200b\n\nqq\u200b\u7528\u6237\u200b\u8868\u200b\n\u200b\u5ba2\u6237\u200b\u4e0e\u200b\u5b66\u751f\u200b\u8868\u200b\n    \u200b\u5f53\u200b\u4f60\u200b\u4e00\u5f20\u200b\u8868\u4e2d\u200b\u7684\u200b\u6570\u636e\u200b\u5e76\u200b\u4e0d\u200b\u90fd\u200b\u662f\u200b\u9700\u8981\u200b\u7528\u5230\u200b\u7684\u200b\u60c5\u51b5\u200b\uff0c\u200b\u4f46\u662f\u200b\u5b57\u6bb5\u200b\u6709\u200b\u7279\u522b\u200b\u7684\u200b\u591a\u200b\uff0c\u200b\u90a3\u4e48\u200b\u8fd9\u4e2a\u200b\u65f6\u5019\u200b\u4f60\u200b\u5c31\u200b\u5e94\u8be5\u200b\u8003\u8651\u200b\u5206\u8868\u200b\uff0c\u200b\u7136\u540e\u200b\u505a\u200b\u4e00\u5bf9\u4e00\u200b\u7684\u200b\u5173\u8054\u200b\n    \u200b\u8282\u7701\u200b\u67e5\u8be2\u200b\u65f6\u95f4\u200b\u548c\u200b\u4f20\u8f93\u200b\u65f6\u95f4\u200b\n\n\"\"\"\n\u200b\u4e00\u5bf9\u4e00\u200b \u200b\u5916\u952e\u200b\u5b57\u200b\u6bb5\u200b\u5efa\u5728\u200b\u4efb\u610f\u200b\u4e00\u65b9\u200b\u90fd\u200b\u53ef\u4ee5\u200b \u200b\u4f46\u662f\u200b\u63a8\u8350\u200b\u4f60\u200b\u5efa\u5728\u200b\u67e5\u8be2\u200b\u9891\u7387\u200b\u6bd4\u8f83\u200b\u9ad8\u200b\u7684\u200b\u8868\u4e2d\u200b\ncreate  table authordetail( # \u200b\u4f5c\u8005\u200b\u8be6\u7ec6\u4fe1\u606f\u200b\n    id int primary key auto_increment,\n    phone int,\n    addr varchar(64)\n);\ncreate table author_(\n    id int primary key auto_increment,\n    name varchar(32),\n    age int,\n    authordetail_id int unique,\n    foreign key(authordetail_id) references authordetail(id)\n    on update cascade\n    on delete cascade\n);\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/8.%20%E4%BF%AE%E6%94%B9%E8%A1%A8/","title":"8. \u200b\u4fee\u6539\u200b\u8868","text":"<pre><code>\"\"\"\n1\u3001\u200b\u4fee\u6539\u200b\u8868\u540d\u200b\n    alter table \u200b\u8868\u540d\u200b rename \u200b\u65b0\u8868\u540d\u200b;\n\n2\u3001\u200b\u589e\u52a0\u200b\u5b57\u200b\u6bb5\u200b\n    alter table \u200b\u8868\u540d\u200b add \u200b\u5b57\u6bb5\u540d\u200b \u200b\u5b57\u200b\u6bb5\u200b\u7c7b\u578b\u200b(\u200b\u5bbd\u5ea6\u200b) \u200b\u7ea6\u675f\u6761\u4ef6\u200b;\n    alter table \u200b\u8868\u540d\u200b add \u200b\u5b57\u6bb5\u540d\u200b \u200b\u5b57\u200b\u6bb5\u200b\u7c7b\u578b\u200b(\u200b\u5bbd\u5ea6\u200b) \u200b\u7ea6\u675f\u6761\u4ef6\u200b first;\n    alter table \u200b\u8868\u540d\u200b add \u200b\u5b57\u6bb5\u540d\u200b \u200b\u5b57\u200b\u6bb5\u200b\u7c7b\u578b\u200b(\u200b\u5bbd\u5ea6\u200b) \u200b\u7ea6\u675f\u6761\u4ef6\u200b after \u200b\u5b57\u6bb5\u540d\u200b;\n\n3\u3001\u200b\u5220\u9664\u200b\u5b57\u200b\u6bb5\u200b\n    alter table \u200b\u8868\u540d\u200b drop \u200b\u5b57\u6bb5\u540d\u200b;\n\n4\u3001\u200b\u4fee\u6539\u200b\u5b57\u200b\u6bb5\u200b\n    alter table \u200b\u8868\u540d\u200b modify \u200b\u5b57\u6bb5\u540d\u200b \u200b\u5b57\u200b\u6bb5\u200b\u7c7b\u578b\u200b(\u200b\u5bbd\u5ea6\u200b) \u200b\u7ea6\u675f\u6761\u4ef6\u200b;\n    alter table \u200b\u8868\u540d\u200b change \u200b\u65e7\u200b\u5b57\u6bb5\u540d\u200b \u200b\u65b0\u200b\u5b57\u6bb5\u540d\u200b(\u200b\u5bbd\u5ea6\u200b) \u200b\u7ea6\u675f\u6761\u4ef6\u200b;\n\n\n\"\"\"\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/9.%20%E5%A4%8D%E5%88%B6%E8%A1%A8/","title":"9. \u200b\u590d\u5236\u200b\u8868","text":"<pre><code>\"\"\"\n\u200b\u6211\u4eec\u200bsql\u200b\u8bed\u53e5\u200b\u67e5\u8be2\u200b\u7684\u200b\u7ed3\u679c\u200b\u5176\u5b9e\u200b\u4e5f\u200b\u662f\u200b\u4e00\u5f20\u200b\u865a\u62df\u200b\u8868\u200b\n\u200b\u4e0d\u80fd\u200b\u590d\u5236\u200b\u4e3b\u952e\u200b\u3001\u200b\u5916\u952e\u200b..\n\"\"\"\ncreate table \u200b\u8868\u540d\u200b select * from \u200b\u65e7\u8868\u200b; \n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/5.%20%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/1.%20%E6%95%B4%E5%BD%A2/","title":"\u6574\u5f62","text":"<ul> <li>\u200b\u5206\u7c7b\u200b</li> </ul> <p>TINYINT SMALLINT MEDUIMINT INT BIGINT</p> <ul> <li>\u200b\u4f5c\u7528\u200b</li> </ul> <p>\u200b\u5b58\u50a8\u200b\u5e74\u9f84\u200b\u3001\u200b\u7b49\u7ea7\u200b\u3001id\u3001\u200b\u53f7\u7801\u200b\u7b49\u200b</p> <pre><code>\"\"\"\n\u200b\u4ee5\u200bTINYINT\n    \u200b\u662f\u5426\u200b\u6709\u200b\u7b26\u53f7\u200b\n        \u200b\u9ed8\u8ba4\u200b\u60c5\u51b5\u200b\u4e0b\u200b\u662f\u200b\u5e26\u7b26\u53f7\u200b\u7684\u200b\n    \u200b\u8d85\u51fa\u200b\u4f1a\u200b\u5982\u4f55\u200b\n        \u200b\u8d85\u51fa\u200b\u9650\u5236\u200b\u53ea\u5b58\u200b\u6700\u5927\u200b\u53ef\u200b\u63a5\u53d7\u200b\u503c\u200b\n\"\"\"\ncreate table t9(id tinyint);\ninsert into t9 values(-129),(256);\n\n# \u200b\u7ea6\u675f\u6761\u4ef6\u200b\u4e4b\u200bunsigned \u200b\u65e0\u200b\u7b26\u53f7\u200b\ncreate table t10(id tinyint unsigned);\n\ncreate table t11(id int);\n# int\u200b\u9ed8\u8ba4\u200b\u4e5f\u200b\u662f\u200b\u5e26\u7b26\u53f7\u200b\u7684\u200b\n# \u200b\u6574\u5f62\u200b\u9ed8\u8ba4\u200b\u60c5\u51b5\u200b\u4e0b\u200b\u90fd\u200b\u662f\u200b\u5e26\u7b26\u53f7\u200b\u7684\u200b\n\n# \u200b\u9488\u5bf9\u200b\u6574\u5f62\u200b \u200b\u62ec\u53f7\u200b\u5185\u200b\u7684\u200b\u5bbd\u5ea6\u200b\u662f\u200b\u5230\u5e95\u200b\u662f\u200b\u5e72\u561b\u200b\u7684\u200b\ncreate table t12(id int(8));\ninsert into t12 values(123456789);\n\n\"\"\"\n\u200b\u7279\u5217\u200b\uff1a\u200b\u53ea\u6709\u200b\u6574\u5f62\u200b\u62ec\u53f7\u200b\u91cc\u9762\u200b\u7684\u200b\u6570\u636e\u200b\u4e0d\u662f\u200b\u8868\u793a\u200b\u9650\u5236\u200b\u4f4d\u6570\u200b\u800c\u662f\u200b\u663e\u793a\u200b\u957f\u5ea6\u200b\nid int(8)\n    \u200b\u5982\u679c\u200b\u6570\u5b57\u200b\u6ca1\u6709\u200b\u8d85\u8fc7\u200b8\u200b\u4f4d\u200b \u200b\u90a3\u4e48\u200b\u9ed8\u8ba4\u200b\u7528\u200b0\u200b\u586b\u5145\u200b\n    \u200b\u5982\u679c\u200b\u6570\u5b57\u200b\u8d85\u8fc7\u200b\u4e86\u200b8\u200b\u4f4d\u200b \u200b\u90a3\u4e48\u200b\u6709\u200b\u51e0\u4f4d\u200b\u5c31\u5b58\u200b\u51e0\u4f4d\u200b\uff08\u200b\u4f46\u200b\u8fd8\u662f\u200b\u8981\u200b\u9075\u5b88\u200b\u6700\u5927\u200b\u8303\u56f4\u200b\uff09\n\"\"\"\n\n#\u200b\u7528\u200b0\u200b\u586b\u5145\u200b\u81f3\u200b8\u200b\u4f4d\u200b\ncreate table t13(id int(8) unsigned zerofill)\n\n# \u200b\u603b\u7ed3\u200b\n    \u200b\u9488\u5bf9\u200b\u6574\u5f62\u200b\u5b57\u200b\u6bb5\u200b\uff0c\u200b\u62ec\u53f7\u200b\u5185\u200b\u65e0\u9700\u200b\u6307\u5b9a\u200b\u5bbd\u5ea6\u200b\uff0c\u200b\u56e0\u4e3a\u200b\u5b83\u200b\u9ed8\u8ba4\u200b\u5bbd\u5ea6\u200b\u8db3\u591f\u200b\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/5.%20%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/2.%20%E4%B8%A5%E6%A0%BC%E6%A8%A1%E5%BC%8F/","title":"\u4e25\u683c\u200b\u6a21\u5f0f","text":"<pre><code># \u200b\u5982\u4f55\u200b\u67e5\u770b\u200b\u4e25\u683c\u200b\u6a21\u5f0f\u200b\nshow variables like \"%mode\";\n\n\u200b\u6a21\u7cca\u200b\u5339\u914d\u200b/\u200b\u67e5\u8be2\u200b\n    \u200b\u5173\u952e\u5b57\u200b like\n        %\uff1a\u200b\u5339\u914d\u200b\u4efb\u610f\u200b\u7684\u200b\u591a\u4e2a\u200b\u5b57\u7b26\u200b\n        _\uff1a\u200b\u5339\u914d\u200b\u4efb\u610f\u200b\u7684\u200b\u5355\u4e2a\u200b\u5b57\u7b26\u200b\n\n# \u200b\u4fee\u6539\u200b\u4e25\u683c\u200b\u6a21\u5f0f\u200b\nset session;    # \u200b\u53ea\u200b\u5728\u200b\u5f53\u524d\u200b\u7a97\u53e3\u200b\u6709\u6548\u200b\nset global;  # \u200b\u5168\u5c40\u200b\u6709\u6548\u200b\nset global sql_mode = 'STRICT_TRANS_TABLES';\n\n# \u200b\u4fee\u6539\u200b\u5b8c\u540e\u200b \u200b\u91cd\u542f\u200b\u670d\u52a1\u7aef\u200b\u5373\u53ef\u200b\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/5.%20%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/3.%20%E6%B5%AE%E7%82%B9%E5%9E%8B/","title":"3. \u200b\u6d6e\u70b9\u200b\u578b","text":"<ul> <li>\u200b\u5206\u7c7b\u200b</li> </ul> <p>FLOAT DOUBLE DECIMAL</p> <ul> <li>\u200b\u4f5c\u7528\u200b</li> </ul> <p>\u200b\u8eab\u9ad8\u200b\u3001\u200b\u4f53\u91cd\u200b\u3001\u200b\u85aa\u8d44\u200b</p> <pre><code># \u200b\u5b58\u50a8\u200b\u9650\u5236\u200b\nfloat(255, 30)  # \u200b\u603b\u5171\u200b255\u200b\u4f4d\u200b \u200b\u5c0f\u6570\u200b\u90e8\u5206\u200b\u5360\u200b30\u200b\u4f4d\u200b\ndouble(255,30)  # \u200b\u603b\u5171\u200b255\u200b\u4f4d\u200b \u200b\u5c0f\u6570\u200b\u90e8\u5206\u200b\u5360\u200b30\u200b\u4f4d\u200b\ndecimal(65,30)  # \u200b\u603b\u5171\u200b65\u200b\u4f4d\u200b \u200b\u5c0f\u6570\u200b\u90e8\u5206\u200b\u5360\u200b30\u200b\u4f4d\u200b\n\n# \u200b\u7cbe\u51c6\u5ea6\u200b\u9a8c\u8bc1\u200b\ncreate table t15(id float(255,30));\ncreate table t16(id double(255,30));\ncreate table t17(id decimal(65,30));\n\ninsert into t15 values(1.1111111111111111111111111111111);\ninsert into t16 values(1.1111111111111111111111111111111);\ninsert into t17 values(1.1111111111111111111111111111111);\n\nfloat &lt; deuble &lt; decimal\n# \u200b\u8981\u200b\u7ed3\u5408\u5b9e\u9645\u200b\u5e94\u7528\u200b\u573a\u666f\u200b \u200b\u4e09\u8005\u200b\u90fd\u200b\u80fd\u200b\u4f7f\u7528\u200b\n\u200b\u6211\u200b\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/5.%20%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/4.%20%E5%AD%97%E7%AC%A6%E7%B1%BB%E5%9E%8B/","title":"4. \u200b\u5b57\u7b26\u200b\u7c7b\u578b","text":""},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/5.%20%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/4.%20%E5%AD%97%E7%AC%A6%E7%B1%BB%E5%9E%8B/#_1","title":"\u5206\u7c7b","text":"<pre><code>\"\"\"\nchar \n    \u200b\u5b9a\u200b\u957f\u200b\n    char(4) \u200b\u6570\u636e\u200b\u8d85\u8fc7\u200b\u56db\u4e2a\u200b\u5b57\u7b26\u200b \u200b\u4e0d\u591f\u200b\u7528\u200b\u56db\u4e2a\u200b\u7a7a\u683c\u200b\u8865\u5168\u200b\nvarchar\n    \u200b\u53d8\u200b\u957f\u200b\n    varchar(4)  \u200b\u6570\u636e\u200b\u8d85\u8fc7\u200b\u56db\u4e2a\u200b\u5b57\u7b26\u200b\u76f4\u63a5\u200b\u62a5\u9519\u200b \u200b\u4e0d\u591f\u200b\u6709\u200b\u51e0\u4e2a\u200b\u5b58\u200b\u51e0\u4e2a\u200b\n\"\"\"\ncreate table t18(name char(4));\ncreate table t18(name varchar(4));\n\ninsert into t18 values('a');\ninsert into t19 values('a');\n\n# \u200b\u6280\u5de7\u200b\uff1a char_length\u200b\u7edf\u8ba1\u200b\u5b57\u200b\u6bb5\u957f\u5ea6\u200b\nselect char_length(name) from t18;\nselect char_length(name) from t19;\n\"\"\"\n\u200b\u9996\u5148\u200b\u53ef\u4ee5\u200b\u80af\u5b9a\u200b\u7684\u200b\u662f\u200bchar\u200b\u786c\u76d8\u200b\u4e0a\u5b58\u200b\u7684\u200b\u662f\u200b\u7edd\u5bf9\u200b\u662f\u200b\u771f\u6b63\u200b\u7684\u200b\u6570\u636e\u200b\uff0c\u200b\u5e26\u6709\u200b\u7a7a\u683c\u200b\u7684\u200b\n\u200b\u4f46\u662f\u200b\u5728\u200b\u663e\u793a\u200b\u7684\u200b\u65f6\u5019\u200bMysql\u200b\u4f1a\u200b\u81ea\u52a8\u200b\u5c06\u200b\u591a\u4f59\u200b\u7684\u200b\u7a7a\u683c\u200b\u5220\u9664\u200b\n\"\"\"\n\n# \u200b\u518d\u6b21\u200b\u4fee\u6539\u200bsql_mode \u200b\u8ba9\u200bMysql\u200b\u4e0d\u8981\u200b\u505a\u200b\u81ea\u52a8\u200b\u5254\u9664\u200b\u64cd\u4f5c\u200b\nset global sql_mode = 'STRICT_TRANS_TABLES,PAD_CHAR_TO_FULL_LENGTH';\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/5.%20%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/4.%20%E5%AD%97%E7%AC%A6%E7%B1%BB%E5%9E%8B/#charvarchar","title":"char\u200b\u4e0e\u200bvarchar\u200b\u7684\u200b\u5bf9\u6bd4","text":"<pre><code>\"\"\"\nchar\n    \u200b\u7f3a\u70b9\u200b\uff1a\u200b\u6d6a\u8d39\u200b\u7a7a\u95f4\u200b\n    \u200b\u4f18\u70b9\u200b\uff1a\u200b\u5b58\u53d6\u200b\u90fd\u200b\u5f88\u200b\u7b80\u5355\u200b\n        \u200b\u76f4\u63a5\u200b\u6309\u7167\u200b\u56fa\u5b9a\u200b\u7684\u200b\u5b57\u7b26\u200b\u5b58\u53d6\u6570\u636e\u200b\u5373\u53ef\u200b\n        \u200b\u5b58\u200b\u6309\u7167\u200b\u4e94\u4e2a\u200b\u5b57\u7b26\u200b\u5b58\u200b\uff0c\u200b\u53d6\u200b\u4e5f\u200b\u76f4\u63a5\u200b\u6309\u7167\u200b\u4e94\u4e2a\u200b\u5b57\u7b26\u200b\u53d6\u200b\nvarchar\n    \u200b\u4f18\u70b9\u200b\uff1a\u200b\u8282\u7701\u200b\u7a7a\u95f4\u200b\n    \u200b\u7f3a\u70b9\u200b\uff1a\u200b\u5b58\u53d6\u200b\u6bd4\u8f83\u200b\u9ebb\u70e6\u200b\n        \u200b\u5b58\u200b\u7684\u200b\u65f6\u5019\u200b\u9700\u8981\u200b\u5236\u4f5c\u200b\u62a5\u5934\u200b\n        \u200b\u53d6\u200b\u7684\u200b\u65f6\u5019\u200b\u4e5f\u200b\u9700\u8981\u200b\u8bfb\u53d6\u200b\u62a5\u5934\u200b\uff0c\u200b\u4e4b\u540e\u200b\u624d\u80fd\u200b\u8bfb\u53d6\u200b\u771f\u5b9e\u200b\u7684\u200b\u6570\u636e\u200b\n\n\u200b\u4ee5\u524d\u200b\u57fa\u672c\u200b\u90fd\u200b\u662f\u200b\u7528\u200b\u7684\u200bchar \u200b\u5176\u5b9e\u200b\u73b0\u5728\u200b\u7528\u200bvarchar\u200b\u4e5f\u200b\u633a\u200b\u591a\u200b\u7684\u200b\n\u200b\u540e\u9762\u200b\u968f\u4fbf\u200b\u4f60\u200b\u7528\u200b\u54ea\u4e2a\u200b \u200b\u5efa\u8bae\u200b\u7528\u200bvarchar\n\"\"\"\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/5.%20%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/5.%20%E6%97%A5%E6%9C%9F%E7%B1%BB%E5%9E%8B/","title":"5. \u200b\u65e5\u671f\u200b\u7c7b\u578b","text":""},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/5.%20%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/5.%20%E6%97%A5%E6%9C%9F%E7%B1%BB%E5%9E%8B/#_1","title":"\u5206\u7c7b","text":"<p>date\uff1a\u200b\u5e74\u6708\u65e5\u200b 2020-5-4 datetime: \u200b\u5e74\u6708\u65e5\u200b\u5206\u79d2\u200b 2020-5-4 11\uff1a11\uff1a11 time: \u200b\u65f6\u5206\u79d2\u200b 11\uff1a11\uff1a11 Year\uff1a2020 ```python create table student(     id int,     name varchar(16),     born_year year,     birth date,     study_time time,     reg_time datetime ) insert into student values(1,'egon','1990','1880-11-11','11:11:11','2020-11-11 11:11:11');</p>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/5.%20%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/6.%20%E6%9E%9A%E4%B8%BE%E5%92%8C%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B/","title":"6. \u200b\u679a\u4e3e\u200b\u548c\u200b\u96c6\u5408\u200b\u7c7b\u578b","text":""},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/5.%20%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/6.%20%E6%9E%9A%E4%B8%BE%E5%92%8C%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B/#_1","title":"\u5206\u7c7b","text":"<pre><code>\"\"\"\n\u200b\u679a\u4e3e\u200b\uff08enum\uff09\u200b\u591a\u9009\u200b\u4e00\u200b\n\u200b\u96c6\u5408\u200b\uff08set\uff09 \u200b\u591a\u9009\u591a\u200b\n\"\"\"\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/5.%20%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/6.%20%E6%9E%9A%E4%B8%BE%E5%92%8C%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B/#_2","title":"\u5177\u4f53\u200b\u8c03\u7528","text":"<pre><code>create table user(\n    id int,\n    name char(16),\n    gender enum('male'),\n    gender enum('male','female','others')\n);\n\ninsert into user values(1,'jason','male');\ninsert into user values(2,'egon','tflaf')\n# \u200b\u679a\u4e3e\u200b\u5b57\u200b\u6bb5\u200b\uff0c\u200b\u540e\u671f\u200b\u5728\u200b\u5b58\u200b\u6570\u636e\u200b\u7684\u200b\u65f6\u5019\u200b\u53ea\u80fd\u200b\u4ece\u200b\u679a\u4e3e\u200b\u91cc\u9762\u200b\u9009\u62e9\u200b\u4e00\u4e2a\u200b\u5b58\u50a8\u200b\n\ncreate table teacher(\n    id int,\n    name char(16),\n    gender enum('male','femle','others'),\n    hobby set('read','DBJ','hecha')\n)\ninsert into teacher values(1,'jason','male','read');\ninsert into teacher values(2,'egon','female','DBJ,hecha');\ninsert into teacher values(3,'egon','female','DBJ,hecha');\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/MySQL/5.%20%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/6.%20%E6%9E%9A%E4%B8%BE%E5%92%8C%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B/#_3","title":"\u603b\u7ed3","text":"<pre><code>\"\"\"\n\u200b\u5b57\u200b\u6bb5\u200b\u7c7b\u578b\u200b\n\u200b\u4e25\u683c\u200b\u6a21\u5f0f\u200b\n\n\u200b\u7ea6\u675f\u6761\u4ef6\u200b\n    not null\n    zerofill\n    unsigned\n\"\"\"\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/SQL%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/SQL%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B_%E7%AC%AC%E4%B8%80%E7%AB%A0/","title":"SQL\u200b\u57fa\u7840\u6559\u7a0b\u200b \u200b\u7b2c\u4e00\u7ae0","text":"<pre><code>-- *\u200b\u7b2c\u4e00\u7ae0\u200b*\n-- \u200b\u521b\u5efa\u200b\u6570\u636e\u5e93\u200b\nCREATE DATABASE shop;\n\n-- \u200b\u521b\u5efa\u200b\u8868\u200b\nCREATE TABLE Product \n(product_id     CHAR(4)         NOT NULL,\n product_name   VARCHAR(100)    NOT NULL,\n product_type   VARCHAR(32)     NOT NULL,\n sale_price     INTEGER         ,\n purchase_price INTEGER         ,\n regist_date    DATE            ,\n PRIMARY KEY (product_id));\n\n -- \u200b\u5220\u9664\u200b\u8868\u200b\n DROP TABLE Product;\n\n --\u200b\u8868\u200b\u5b9a\u4e49\u200b\u7684\u200b\u66f4\u65b0\u200b\nALTER TABLE &lt;\u200b\u8868\u540d\u200b&gt; ADD COLUMN &lt;\u200b\u5217\u200b\u7684\u200b\u5b9a\u4e49\u200b&gt;;     -- \u200b\u6dfb\u52a0\u200b\u5217\u200b\nALTER TABLE Product ADD COLUMN Product_name_pinyin VARCHAR(100);\n\nALTER TABLE &lt;\u200b\u8868\u540d\u200b&gt; DROP COLUMN &lt;\u200b\u5217\u540d\u200b&gt;;  -- \u200b\u5220\u9664\u200b\u5217\u200b\nALTER TABLE Product DROP COLUMN product_name_pinyin;\n\n-- \u200b\u63d2\u5165\u200b\u6570\u636e\u200b\nSTART TRANSACTION;  -- \u200b\u5f00\u59cb\u200b\u63d2\u5165\u200b\u884c\u200b\uff0cOracle\u200b\u548c\u200bDB2\u200b\u4e0d\u200b\u9700\u8981\u200b\nINSERT INTO Product VALUES ('0001', 'T\u200b\u6064\u886b\u200b', '\u200b\u8863\u670d\u200b', 1000, 500, '2009-09-20');\nINSERT INTO Product VALUES ('0002', '\u200b\u6253\u5b54\u5668\u200b', '\u200b\u529e\u516c\u200b\u7528\u5177\u200b', 500, 320, '2009-09-20');\nINSERT INTO Product VALUES ('0003', '\u200b\u8fd0\u52a8\u200bT\u200b\u6064\u886b\u200b', '\u200b\u8863\u670d\u200b', 4000, 2800, NULL);\nINSERT INTO Product VALUES ('0004', '\u200b\u83dc\u5200\u200b', '\u200b\u53a8\u623f\u7528\u5177\u200b', 3000, 2800, '2009-09-20');\nINSERT INTO Product VALUES ('0005', '\u200b\u9ad8\u538b\u9505\u200b', '\u200b\u53a8\u623f\u7528\u5177\u200b', 6800, 5000, '2009-01-15');\nINSERT INTO Product VALUES ('0006', '\u200b\u53c9\u5b50\u200b', '\u200b\u53a8\u623f\u7528\u5177\u200b', 500,  NULL, '2009-09-20' );\nINSERT INTO Product VALUES ('0007', '\u200b\u64e6\u200b\u83dc\u677f\u200b', '\u200b\u53a8\u623f\u7528\u5177\u200b', 880, 790, '2008-04-28');\nINSERT INTO Product VALUES ('0008', '\u200b\u5706\u73e0\u7b14\u200b', '\u200b\u529e\u516c\u200b\u7528\u5177\u200b', 6800, 5000, '2009-01-15');\nCOMMIT; -- \u200b\u786e\u8ba4\u200b\u63d2\u5165\u200b\u884c\u200b\n\n-- \u200b\u6539\u53d8\u200b\u8868\u540d\u200b\nRENAME TABLE Poduct TO Product; -- mysql\nALTER TABLE Poduct RENAME TO Product; -- Oracle\u3001 PostgreSQL\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/SQL%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/SQL%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B_%E7%AC%AC%E4%B8%89%E7%AB%A0/","title":"SQL\u200b\u57fa\u7840\u6559\u7a0b\u200b \u200b\u7b2c\u4e09\u7ae0","text":"<pre><code>-- *\u200b\u7b2c\u4e09\u7ae0\u200b*\n/*\nCOUNT\uff1a \u200b\u8ba1\u7b97\u200b\u8868\u4e2d\u200b\u7684\u200b\u8bb0\u5f55\u200b\u6570\u200b\uff08\u200b\u884c\u200b\u6570\u200b\uff09\nSUM\uff1a \u200b\u8ba1\u7b97\u200b\u8868\u4e2d\u200b\u6570\u503c\u200b\u5217\u4e2d\u200b\u6570\u636e\u200b\u7684\u200b\u5408\u8ba1\u200b\u503c\u200b\nAVG\uff1a \u200b\u8ba1\u7b97\u200b\u8868\u4e2d\u200b\u6570\u503c\u200b\u5217\u4e2d\u200b\u6570\u636e\u200b\u7684\u200b\u5e73\u5747\u503c\u200b\nMAX\uff1a \u200b\u6c42\u51fa\u200b\u8868\u4e2d\u200b\u4efb\u610f\u200b\u5217\u4e2d\u200b\u6570\u636e\u200b\u7684\u200b\u6700\u5927\u503c\u200b\nMIN\uff1a \u200b\u6c42\u51fa\u200b\u8868\u4e2d\u200b\u4efb\u610f\u200b\u5217\u4e2d\u200b\u6570\u636e\u200b\u7684\u200b\u6700\u5c0f\u503c\u200b\n*/\n-- \u200b\u8ba1\u7b97\u200b\u5168\u90e8\u200b\u7684\u200b\u884c\u6570\u200b\nselect\n       count(*)\nfrom\n       Product\n;\n\n-- \u200b\u8ba1\u7b97\u200bNULL\u200b\u4ee5\u5916\u200b\u7684\u200b\u6570\u636e\u200b\u884c\u200b\u6570\u200b\nselect\n       count(purchase_price)\nfrom\n       Product\n;\n\n-- \u200b\u8ba1\u7b97\u200b\u5408\u8ba1\u200b\u503c\u200b\nselect\n       sum(sale_price)\nfrom\n       Product\n;\n\nselect\n       sum(sale_price)\n     , sum(purchase_price)\nfrom\n       Product\n;\n\n-- \u200b\u8ba1\u7b97\u200b\u5e73\u5747\u503c\u200b\nselect\n       avg(sale_price)\nfrom\n       Product\n;\n\n-- \u200b\u8ba1\u7b97\u200b\u6700\u5927\u503c\u200b\u548c\u200b\u6700\u5c0f\u503c\u200b\nselect\n       max(sale_price)\n     , min(purchase_price)\nfrom\n       Product\n;\n\n-- \u200b\u4f7f\u7528\u200b\u805a\u5408\u200b\u51fd\u6570\u200b\u5220\u9664\u200b\u91cd\u590d\u200b\u503c\u200b\uff08\u200b\u5173\u952e\u5b57\u200bDISTINCT\uff09\nselect\n       count(DISTINCT product_type)\nfrom\n       Product\n;\n\n-- \u200b\u5148\u200b\u8ba1\u7b97\u200b\u6570\u636e\u200b\u884c\u6570\u200b\u518d\u200b\u5220\u9664\u200b\u91cd\u590d\u200b\u6570\u636e\u200b\u7684\u200b\u7ed3\u679c\u200b\nselect DISTINCT\n       count(product_type)\nfrom\n       Product\n;\n\n-- GROUP BY \u200b\u5b50\u53e5\u200b\nselect\n         product_type\n       , count(*)\nfrom\n         Product\ngroup by\n         product_type\n;\n\nselect\n         purchase_price\n       , count(*)\nfrom\n         Product\ngroup by\n         purchase_price\n;\n\n-- \u200b\u4f7f\u7528\u200bwhere\u200b\u5b50\u53e5\u200b\u65f6\u200bgroup by\u200b\u7684\u200b\u6267\u884c\u200b\u7ed3\u679c\u200b\nselect\n         purchase_price\n       , count(*)\nfrom\n         Product\nwhere\n         product_type = '\u200b\u8863\u670d\u200b'\ngroup by\n         purchase_price\n;\n\n-- DISTINCT\u200b\u548c\u200bGROUP BY\u200b\u80fd\u591f\u200b\u5b9e\u73b0\u200b\u76f8\u540c\u200b\u7684\u200b\u529f\u80fd\u200b(\u200b\u5e94\u200b\u4f7f\u7528\u200bdistinct)\nselect distinct\n       product_type\nfrom\n       Product\n;\n\nselect\n         product_type\nfrom\n         Product\ngroup by\n         product_type\n;\n\n-- \u200b\u4e3a\u200b\u805a\u5408\u200b\u7ed3\u679c\u200b\u6307\u5b9a\u200b\u6761\u4ef6\u200b\nselect\n         product_type\n       , count(*)\nfrom\n         Product\ngroup by\n         product_type\nhaving\n         count(*) = 2\n;\n\nselect\n         product_type\n       , avg(sale_price)\nfrom\n         Product\ngroup by\n         product_type\nhaving\n         avg(sale_price) &gt;= 2500\n;\n\n-- \u200b\u76f8\u5bf9\u200b\u4e8e\u200bHAVING\u200b\u5b50\u53e5\u200b\uff0c\u200b\u66f4\u200b\u9002\u5408\u200b\u5199\u200b\u5728\u200bWHERE\u200b\u5b50\u53e5\u200b\u4e2d\u200b\u7684\u200b\u6761\u4ef6\u200b\n/*\nWHERE \u200b\u5b50\u53e5\u200b = \u200b\u6307\u5b9a\u200b\u884c\u6240\u200b\u5bf9\u5e94\u200b\u7684\u200b\u6761\u4ef6\u200b\nHAVING \u200b\u5b50\u53e5\u200b = \u200b\u6307\u5b9a\u200b\u7ec4\u6240\u200b\u5bf9\u5e94\u200b\u7684\u200b\u6761\u4ef6\u200b\n\u200b\u805a\u5408\u200b\u952e\u200b\u6240\u200b\u5bf9\u5e94\u200b\u7684\u200b\u6761\u4ef6\u200b\u4e0d\u200b\u5e94\u8be5\u200b\u4e66\u5199\u200b\u5728\u200bHAVING\u200b\u5b50\u53e5\u200b\u5f53\u4e2d\u200b\uff0c\u200b\u800c\u200b\u5e94\u8be5\u200b\u4e66\u5199\u200b\u5728\u200bWHERE\u200b\u5b50\u53e5\u200b\u5f53\u4e2d\u200b\u3002\nWHERE\u200b\u5b50\u53e5\u200b\u548c\u200bHAVING\u200b\u5b50\u53e5\u200b\u7684\u200b\u6267\u884c\u200b\u901f\u5ea6\u200b\u5feb\u200b\u3002\n*/\nselect\n         product_type\n       , count(*)\nfrom\n         Product\ngroup by\n         product_type\nhaving\n         product_type = '\u200b\u8863\u670d\u200b'\n;\n\nselect\n         product_type\n       , count(*)\nfrom\n         Product\nwhere\n         product_type = '\u200b\u8863\u670d\u200b'\ngroup by\n         product_type\n;\n\n-- \u200b\u5bf9\u200b\u67e5\u8be2\u200b\u7ed3\u679c\u200b\u8fdb\u884c\u200b\u6392\u5e8f\u200b\n-- \u200b\u4ece\u200b\u4f4e\u200b\u5230\u200b\u9ad8\u200b\uff08\u200b\u5347\u5e8f\u200b\uff09\u200b\u6392\u5217\u200b\nselect\n         product_id\n       , product_name\n       , sale_price\n       , purchase_price\nfrom\n         Product\norder by\n         sale_price\n;\n\n-- \u200b\u4ece\u200b\u9ad8\u5230\u200b\u4f4e\u200b\uff08\u200b\u964d\u5e8f\u200b\uff09\u200b\u6392\u5217\u200b\nselect\n         product_id\n       , product_name\n       , sale_price\n       , purchase_price\nfrom\n         Product\norder by\n         sale_price desc\n;\n\n--\u200b\u6307\u5b9a\u200b\u591a\u4e2a\u200b\u6392\u5e8f\u200b\u952e\u200b\nselect\n         product_id\n       , product_name\n       , sale_price\n       , purchase_price\nfrom\n         Product\norder by\n         sale_price\n       , product_id\n;\n\n-- NULL\u200b\u7684\u200b\u987a\u5e8f\u200b\n-- \u200b\u6392\u5e8f\u200b\u952e\u4e2d\u200b\u5305\u542b\u200bNULL\u200b\u65f6\u200b\uff0c\u200b\u4f1a\u200b\u5728\u200b\u5f00\u5934\u200b\u6216\u200b\u672b\u5c3e\u200b\u8fdb\u884c\u200b\u6c47\u603b\u200b\u3002\n-- \u200b\u5728\u200b\u6392\u5e8f\u200b\u952e\u4e2d\u200b\u4f7f\u7528\u200b\u663e\u793a\u200b\u7528\u200b\u7684\u200b\u522b\u540d\u200b\nselect\n         product_id as id\n       , product_name\n       , sale_price as sp\n       , purchase_price\nfrom\n         Product\norder by\n         sp\n       , id\n;\n\n--\u200b\u4f7f\u7528\u200bHAVING\u200b\u5b50\u53e5\u200b\u65f6\u200bSELECT\u200b\u8bed\u53e5\u200b\u7684\u200b\u987a\u5e8f\u200b\n-- FROM -&gt; WHERE -&gt; GROUP BY -&gt; HAVING -&gt; SELECT -&gt; ORDER BY\n-- select\u200b\u5b50\u53e5\u200b\u4e2d\u672a\u200b\u5305\u542b\u200b\u7684\u200b\u5217\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u5728\u200bORDER BY\u200b\u5b50\u53e5\u200b\u4e2d\u200b\u4f7f\u7528\u200b\nselect\n         product_name\n       , sale_price\n       , purchase_price\nfrom\n         Product\norder by\n         product_id\n;\n\n-- ORDER BY\u200b\u5b50\u53e5\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u805a\u5408\u200b\u51fd\u6570\u200b\nselect\n         product_type\n       , count(*)\nfrom\n         Product\ngroup by\n         product_type\norder by\n         count(*)\n;\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/SQL%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/SQL%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B_%E7%AC%AC%E4%BA%8C%E7%AB%A0/","title":"SQL\u200b\u57fa\u7840\u6559\u7a0b\u200b \u200b\u7b2c\u4e8c\u7ae0","text":"<pre><code>-- *\u200b\u7b2c\u4e8c\u7ae0\u200b*\n-- \u200b\u67e5\u8be2\u200b\u6307\u5b9a\u200b\u7684\u200b\u5217\u200b\nSELECT product_id, product_name, purchase_price FROM Product;\n\n-- \u200b\u67e5\u8be2\u200b\u6240\u6709\u200b\u7684\u200b\u5217\u200b\nSELECT * FROM Product;\n\n-- \u200b\u4e3a\u5217\u200b\u8bbe\u7f6e\u200b\u522b\u540d\u200b\nselect product_id       as id,\n        product_name    as name,\n        purchase_price  as price\nfrom    Product;\n\n-- \u200b\u8bbe\u7f6e\u200b\u4e2d\u6587\u200b\u522b\u540d\u200b\nselect product_id       as \"\u200b\u5546\u54c1\u7f16\u53f7\u200b\",\n        product_name    as \"\u200b\u5546\u54c1\u540d\u79f0\u200b\",\n        purchase_price  as \"\u200b\u8fdb\u8d27\u5355\u200b\u4ef7\u200b\"\nfrom    Product;\n\n-- \u200b\u5e38\u6570\u200b\u7684\u200b\u67e5\u8be2\u200b\n/*\nSELECT \u200b\u5b50\u53e5\u200b\u4e2d\u200b\u4e0d\u4ec5\u200b\u53ef\u4ee5\u200b\u4e66\u5199\u200b\u5217\u540d\u200b\uff0c\u200b\u8fd8\u200b\u53ef\u4ee5\u200b\u4e66\u5199\u200b\u5e38\u6570\u200b\u3002\u200b\u4ee3\u7801\u200b\u6e05\u5355\u200b 2-6\n\u200b\u4e2d\u200b\u7684\u200b SELECT \u200b\u5b50\u53e5\u200b\u4e2d\u200b\u7684\u200b\u7b2c\u4e00\u5217\u200b'\u200b\u5546\u54c1\u200b' \u200b\u662f\u200b\u5b57\u7b26\u4e32\u200b\u5e38\u6570\u200b\uff0c\u200b\u7b2c\u200b 2 \u200b\u5217\u200b 38 \u200b\u662f\u200b\u6570\u5b57\u200b\n\u200b\u5e38\u6570\u200b\uff0c\u200b\u7b2c\u200b 3 \u200b\u5217\u200b '2009-02-24' \u200b\u662f\u200b\u65e5\u671f\u200b\u5e38\u6570\u200b\uff0c\u200b\u5b83\u4eec\u200b\u5c06\u200b\u4e0e\u200b product_id\n\u200b\u5217\u200b\u548c\u200b product_name \u200b\u5217\u200b\u4e00\u8d77\u200b\u88ab\u200b\u67e5\u8be2\u200b\u51fa\u6765\u200b\u3002\n\n\u25cf\u200b\u5b57\u7b26\u4e32\u200b\u5e38\u6570\u200b\n\u25cf\u200b\u6570\u5b57\u200b\u5e38\u6570\u200b\n\u25cf\u200b\u65e5\u671f\u200b\u5e38\u6570\u200b\n*/\n\nselect '\u200b\u5546\u54c1\u200b' as string, 38 as number, '2009-02-24' as date,\n    product_id, product_name\nfrom Product;\n\n-- \u200b\u4ece\u200b\u7ed3\u679c\u200b\u4e2d\u200b\u5220\u9664\u200b\u91cd\u590d\u200b\u884c\u200b\n-- \u200b\u5728\u200bSELECT\u200b\u8bed\u53e5\u200b\u4e2d\u200b\u4f7f\u7528\u200bDISTINCT\u200b\u53ef\u4ee5\u200b\u5220\u9664\u200b\u91cd\u590d\u200b\u884c\u200b\u3002\nselect DISTINCT purchase_price\nfrom Product;\n\n-- \u200b\u5728\u200b\u591a\u884c\u200b\u4e4b\u524d\u200b\u4f7f\u7528\u200bDISTINCT\nselect DISTINCT product_type,regist_date\nfrom Product;\n\n-- \u200b\u6839\u636e\u200bwhere \u200b\u8bed\u53e5\u200b\u6765\u200b\u9009\u62e9\u200b\u8bb0\u5f55\u200b\nselect product_name, product_type\nfrom Product\nwhere Product_type = '\u200b\u8863\u670d\u200b';\n\n-- \u200b\u6ce8\u91ca\u200b\n-- \u200b\u4e66\u5199\u200b\u5728\u200b\u201c--\u201d\u200b\u4e4b\u540e\u200b\uff0c\u200b\u53ea\u80fd\u200b\u5199\u200b\u5728\u200b\u540c\u4e00\u200b\u884c\u200b\u3002 \n-- \u200b\u4e66\u5199\u200b\u5728\u200b\u201c/*\u201d\u200b\u548c\u200b\u201c*/\u201d\u200b\u4e4b\u95f4\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u8de8\u200b\u591a\u884c\u200b\u3002\n\n-- \u200b\u7b97\u672f\u200b\u8fd0\u7b97\u7b26\u200b(\u200b\u56db\u5219\u8fd0\u7b97\u200b+\u3001-\u3001*\u3001/ \u200b\u7b49\u7b49\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u62ec\u53f7\u200b\u6765\u200b\u63d0\u5347\u200b\u8fd0\u7b97\u200b\u7b49\u7ea7\u200b)\nselect product_name, sale_price, \n        sale_price * 2 as \"sale_price_x2\"\nfrom    Product;\n\n-- \u200b\u53ea\u200b\u5305\u542b\u200bselect\u200b\u5b50\u53e5\u200b\u7684\u200bselect\u200b\u8bed\u53e5\u200b\u3002\nselect (100 + 200) * 3 as calculation;\n\n-- \u200b\u6bd4\u8f83\u200b\u8fd0\u7b97\u7b26\u200b\nselect product_name, product_type\nfrom    Porduct\nwhere   sale_price = 500;\n\nselect product_name, product_type\nfrom    Porduct\nwhere   sale_price &lt;&gt; 500;\n\nselect product_name, product_type, sale_price\nfrom    Product\nwhere   sale_price &gt;= 1000;\n\nselect product_name, product_type, regist_date\nfrom    Product\nwhere   regist_date &lt; '2009-09-27';\n\n-- where\u200b\u5b50\u53e5\u200b\u7684\u200b\u6761\u4ef6\u200b\u8868\u8fbe\u5f0f\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u8ba1\u7b97\u200b\u8868\u8fbe\u5f0f\u200b\u3002\nselect product_name, sale_price, purchase_price\nfrom    Product\nwhere   sale_price - purchase_price &gt;= 500;\n\n-- \u200b\u9009\u53d6\u200bNULL\u200b\u7684\u200b\u8bb0\u5f55\u200b\nselect product_name, purchase_price\nfrom    Product\nwhere   purchase_price IS NULL;\n\n-- \u200b\u9009\u53d6\u200b\u4e0d\u200b\u4e3a\u200bNULL\u200b\u7684\u200b\u8bb0\u5f55\u200b\nselect product_name, purchase_price\nfrom    Product\nwhere   purchase_price IS NOT NULL;\n\n-- NOT \u200b\u8fd0\u7b97\u7b26\u200b\nselect product_name, product_type, sale_price\nfrom    Product\nwhere NOT sale_price &gt;= 1000;\n\nselect product_name, product_type\nfrom    Porduct\nwhere sale_price &lt; 1000; -- \u200b\u4e0e\u200b\u4e0a\u9762\u200b\u7684\u200b\u8bed\u53e5\u200b\u7b49\u4ef7\u200b\n\n-- AND \u200b\u548c\u200b OR\u200b\u8fd0\u7b97\u7b26\u200b\nselect product_name, purchase_price\nfrom    Product\nwhere   product_type = '\u200b\u53a8\u623f\u7528\u5177\u200b'\nand     sale_price &gt;= 3000;\n\nselect product_name, purchase_price\nfrom    Product\nwhere   product_type = '\u200b\u53a8\u623f\u7528\u5177\u200b'\nor      sale_price &gt;= 3000;\n\n-- \u200b\u901a\u8fc7\u200b\u62ec\u53f7\u200b\u5f3a\u5316\u200b\u5904\u7406\u200b\nselect product_name, product_type, regist_date\nfrom    Product\nwhere   product_type = '\u200b\u529e\u516c\u7528\u54c1\u200b'\nand     ( regist_date = '2009-09-11'\n        OR regist_date = '2009-09-20');\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/SQL%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/SQL%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B_%E7%AC%AC%E4%BA%94%E7%AB%A0/","title":"SQL\u200b\u57fa\u7840\u6559\u7a0b\u200b \u200b\u7b2c\u4e94\u7ae0","text":"<pre><code>-- \u200b\u590d\u6742\u200b\u67e5\u8be2\u200b\n\n-- \u200b\u89c6\u56fe\u200b\n-- \u200b\u521b\u5efa\u200b\u89c6\u56fe\u200b\u7684\u200bCREATE VIEW\u200b\u8bed\u53e5\u200b\nCREATE VIEW \u200b\u89c6\u56fe\u200b\u540d\u79f0\u200b (&lt;\u200b\u89c6\u56fe\u200b\u5217\u540d\u200b1&gt;, &lt;\u200b\u89c6\u56fe\u200b\u5217\u540d\u200b2&gt;, ...)\nAS\n&lt;SELECT\u200b\u8bed\u53e5\u200b&gt;\n\n-- ProductSum\u200b\u89c6\u56fe\u200b\nCREATE VIEW ProductSum (product_type, cnt_product)\nAS\nSELECT product_type, COUNT(*)\nFROM ProductSum\nGROUP BY product_type;\n\n-- \u200b\u4f7f\u7528\u200b\u89c6\u56fe\u200b\nSELECT product_type, cnt_product\nFROM ProductSum; -- \u200b\u5728\u200bFROM\u200b\u5b50\u53e5\u200b\u4e2d\u200b\u4f7f\u7528\u200b\u89c6\u56fe\u200b\u6765\u200b\u4ee3\u66ff\u200b\u8868\u200b\n\n-- \u200b\u4ee5\u200b\u89c6\u56fe\u200b\u4e3a\u200b\u57fa\u7840\u200b\u521b\u5efa\u200b\u89c6\u56fe\u200b\nCREATE VIEW ProductSumJim (product_type, cnt_product)\nAS \nSELECT product_type, cnt_product\nFROM ProductSum -- \u200b\u4ee5\u200b\u89c6\u56fe\u200b\u4e3a\u200b\u57fa\u7840\u200b\u521b\u5efa\u200b\u89c6\u56fe\u200b\nWHERE product_type = '\u200b\u529e\u516c\u7528\u54c1\u200b';\n\n/* \u200b\u867d\u7136\u200b\u8bed\u6cd5\u200b\u4e0a\u200b\u6ca1\u6709\u200b\u9519\u8bef\u200b\uff0c\u200b\u4f46\u662f\u200b\u6211\u4eec\u200b\u8fd8\u662f\u200b\u5e94\u8be5\u200b\u5c3d\u91cf\u907f\u514d\u200b\u5728\u200b\u89c6\u56fe\u200b\u7684\u200b\u57fa\u7840\u200b\u4e0a\u521b\u200b\n\u200b\u5efa\u200b\u89c6\u56fe\u200b\u3002\u200b\u8fd9\u200b\u662f\u56e0\u4e3a\u200b\u5bf9\u200b\u591a\u6570\u200b DBMS \u200b\u6765\u8bf4\u200b\uff0c\u200b\u591a\u200b\u91cd\u89c6\u200b\u56fe\u4f1a\u200b\u964d\u4f4e\u200b SQL \u200b\u7684\u200b\u6027\u80fd\u200b\u3002\n\u200b\u5e94\u8be5\u200b\u907f\u514d\u200b\u5728\u200b\u89c6\u56fe\u200b\u7684\u200b\u57fa\u7840\u200b\u4e0a\u200b\u521b\u5efa\u200b\u89c6\u56fe\u200b.\n*/\n\n-- \u200b\u89c6\u56fe\u200b\u9650\u5236\u200b 1 -- \u200b\u5b9a\u4e49\u200b\u89c6\u56fe\u200b\u65f6\u200b\u4e0d\u80fd\u200b\u4f7f\u7528\u200bORDER BY \u200b\u5b50\u53e5\u200b\n-- \u200b\u56e0\u6b64\u200b\u4e0b\u8ff0\u200b\u89c6\u56fe\u200b\u5b9a\u4e49\u200b\u8bed\u53e5\u200b\u65f6\u200b\u9519\u8bef\u200b\u7684\u200b.\n/*\u200b\u4e3a\u4ec0\u4e48\u200b\u4e0d\u80fd\u200b\u4f7f\u7528\u200b ORDER BY \u200b\u5b50\u53e5\u200b\u5462\u200b\uff1f\u200b\u8fd9\u200b\u662f\u56e0\u4e3a\u200b\u89c6\u56fe\u200b\u548c\u8868\u200b\u4e00\u6837\u200b\uff0c \u200b\u6570\u636e\u200b\n\u200b\u884c\u90fd\u200b\u662f\u200b\u6ca1\u6709\u200b\u987a\u5e8f\u200b\u7684\u200b\u3002\u200b\u5b9e\u9645\u4e0a\u200b\uff0c\u200b\u6709\u4e9b\u200b DBMS \u200b\u5728\u200b\u5b9a\u4e49\u200b\u89c6\u56fe\u200b\u7684\u200b\u8bed\u53e5\u200b\u4e2d\u662f\u200b\u53ef\u4ee5\u200b\u4f7f\u200b\n\u200b\u7528\u200b ORDER BY \u200b\u5b50\u53e5\u200b\u7684\u200b A\uff0c\u200b\u4f46\u662f\u200b\u8fd9\u200b\u5e76\u200b\u4e0d\u662f\u200b\u901a\u7528\u200b\u7684\u200b\u8bed\u6cd5\u200b\u3002\u200b\u56e0\u6b64\u200b\uff0c\u200b\u5728\u200b\u5b9a\u4e49\u200b\u89c6\u56fe\u200b\n\u200b\u65f6\u8bf7\u200b\u4e0d\u8981\u200b\u4f7f\u7528\u200b ORDER BY \u200b\u5b50\u53e5\u200b\u3002\n*/\nCREATE VIEW ProductSum (product_type, cnt_product)\nAS\nSELECT product_type, COUNT(*)\nFROM Product\nGROUP BY product_type\nORDER BY product_type;\n\n-- \u200b\u89c6\u56fe\u200b\u7684\u200b\u9650\u5236\u200b 2 -- \u200b\u5bf9\u200b\u89c6\u56fe\u200b\u8fdb\u884c\u200b\u66f4\u65b0\u200b\n/*\u200b\u5b9e\u9645\u4e0a\u200b\uff0c\u200b\u867d\u7136\u200b\u8fd9\u200b\u5176\u4e2d\u200b\u6709\u200b\u5f88\u200b\u4e25\u683c\u200b\u7684\u200b\u9650\u5236\u200b\uff0c\u200b\u4f46\u662f\u200b\u67d0\u4e9b\u200b\u65f6\u5019\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u5bf9\u200b\u89c6\u56fe\u200b\u8fdb\u200b\n\u200b\u884c\u200b\u66f4\u65b0\u200b\u3002\u200b\u6807\u51c6\u200b SQL \u200b\u4e2d\u6709\u200b\u8fd9\u6837\u200b\u7684\u200b\u89c4\u5b9a\u200b\uff1a\u200b\u5982\u679c\u200b\u5b9a\u4e49\u200b\u89c6\u56fe\u200b\u7684\u200b SELECT \u200b\u8bed\u53e5\u200b\u80fd\u591f\u200b\n\u200b\u6ee1\u8db3\u200b\u67d0\u4e9b\u200b\u6761\u4ef6\u200b\uff0c\u200b\u90a3\u4e48\u200b\u8fd9\u4e2a\u200b\u89c6\u56fe\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u88ab\u200b\u66f4\u65b0\u200b\u3002\u200b\u4e0b\u9762\u200b\u5c31\u200b\u7ed9\u200b\u5927\u5bb6\u200b\u5217\u4e3e\u200b\u4e00\u4e9b\u200b\u6bd4\u8f83\u200b\n\u200b\u5177\u6709\u200b\u4ee3\u8868\u6027\u200b\u7684\u200b\u6761\u4ef6\u200b\u3002\n\u2460 SELECT \u200b\u5b50\u53e5\u200b\u4e2d\u672a\u200b\u4f7f\u7528\u200b DISTINCT\n\u2461 FROM \u200b\u5b50\u53e5\u200b\u4e2d\u200b\u53ea\u6709\u200b\u4e00\u5f20\u200b\u8868\u200b\n\u2462 \u200b\u672a\u200b\u4f7f\u7528\u200b GROUP BY \u200b\u5b50\u53e5\u200b\n\u2463 \u200b\u672a\u200b\u4f7f\u7528\u200b HAVING \u200b\u5b50\u53e5\u200b\n\n\u200b\u89c6\u56fe\u200b\u548c\u8868\u200b\u9700\u8981\u200b\u540c\u65f6\u200b\u8fdb\u884c\u200b\u66f4\u65b0\u200b\uff0c\u200b\u56e0\u6b64\u200b\u901a\u8fc7\u200b\u6c47\u603b\u200b\u5f97\u5230\u200b\u7684\u200b\u89c6\u56fe\u200b\u65e0\u6cd5\u200b\u8fdb\u884c\u200b\u66f4\u65b0\u200b\u3002\n*/\n\n-- \u200b\u4e0d\u662f\u200b\u901a\u8fc7\u200b\u6c47\u603b\u200b\u5f97\u5230\u200b\u7684\u200b\u89c6\u56fe\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u8fdb\u884c\u200b\u66f4\u65b0\u200b\u3002\nCREATE VIEW ProductSumJim (product_id, product_name, product_type, sale_price, purchase_price, regist_date)\nAS\nSELECT *\nFROM Product\nWHERE prouduct_type = '\u200b\u529e\u516c\u7528\u54c1\u200b';\n\n-- \u200b\u5411\u200b\u89c6\u56fe\u200b\u4e2d\u200b\u6dfb\u52a0\u200b\u6570\u636e\u200b\u884c\u200b\nINSERT INTO ProductJim VALUES ('0009', '\u200b\u5370\u7ae0\u200b', '\u200b\u529e\u516c\u7528\u54c1\u200b', 95, 10, '2009-11-30');\n\n/*\u200b\u7531\u4e8e\u200bPostgreSQL\u200b\u4e2d\u200b\u7684\u200b\u89c6\u56fe\u200b\u4f1a\u200b\u88ab\u200b\u521d\u59cb\u200b\u8bbe\u5b9a\u200b\u4e3a\u200b\u53ea\u8bfb\u200b\uff0c\u200b\u6240\u4ee5\u200b\u6267\u884c\u200b\u4ee3\u7801\u200b\u6e05\u5355\u200b5-6\u200b\u4e2d\u200b\u7684\u200b\nINSERT\u200b\u8bed\u53e5\u200b\u65f6\u200b\uff0c\u200b\u4f1a\u200b\u53d1\u751f\u200b\u4e0b\u9762\u200b\u8fd9\u6837\u200b\u7684\u200b\u9519\u8bef\u200b\u3002\n\u200b\u6267\u884c\u200b\u7ed3\u679c\u200b\uff08\u200b\u4f7f\u7528\u200bPostgreSQL\uff09\nERROR: \u200b\u4e0d\u80fd\u200b\u5411\u200b\u89c6\u56fe\u200b\u4e2d\u200b\u63d2\u5165\u200b\u6570\u636e\u200b\nHINT: \u200b\u9700\u8981\u200b\u4e00\u4e2a\u200b\u65e0\u6761\u4ef6\u200b\u7684\u200bON INSERT DO INSTEAD\u200b\u89c4\u5219\u200b\n\n\u200b\u8fd9\u79cd\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c\u200b\u5728\u200bINSERT\u200b\u8bed\u53e5\u200b\u6267\u884c\u200b\u4e4b\u524d\u200b\uff0c\u200b\u9700\u8981\u200b\u4f7f\u7528\u200b\u4ee3\u7801\u200b\u6e05\u5355\u200b5-A\u200b\u4e2d\u200b\u7684\u200b\u6307\u4ee4\u200b\u6765\u200b\u5141\u8bb8\u200b\n\u200b\u66f4\u65b0\u200b\u64cd\u4f5c\u200b\u3002\u200b\u5728\u200bDB2\u200b\u548c\u200bMySQL\u200b\u7b49\u200b\u5176\u4ed6\u200bDBMS\u200b\u4e2d\u200b\uff0c\u200b\u5e76\u4e0d\u9700\u8981\u200b\u6267\u884c\u200b\u8fd9\u6837\u200b\u7684\u200b\u6307\u4ee4\u200b\u3002\n*/\n-- \u200b\u5141\u8bb8\u200bPostgreSQL\u200b\u5bf9\u200b\u89c6\u56fe\u200b\u8fdb\u884c\u200b\u66f4\u65b0\u200b\nCREATE OR REPLACE RULE insert_rule\nAS ON INSERT\nTO ProductJim DO INSTEAD\nINSERT INTO Product VALUES (\n            new.product_id,\n            new.product_name,\n            new.product_type,\n            new.sale_price,\n            new,purchase_price,\n            new.regist_date);\n\n/* UPDATE \u200b\u8bed\u53e5\u200b\u548c\u200b DELETE \u200b\u8bed\u53e5\u200b\u5f53\u7136\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u50cf\u200b\u64cd\u4f5c\u200b\u8868\u65f6\u200b\u90a3\u6837\u200b\u6b63\u5e38\u200b\u6267\u884c\u200b\uff0c\n\u200b\u4f46\u662f\u200b\u5bf9\u4e8e\u200b\u539f\u8868\u200b\u6765\u8bf4\u200b\u5374\u200b\u9700\u8981\u200b\u8bbe\u7f6e\u200b\u5404\u79cd\u5404\u6837\u200b\u7684\u200b\u7ea6\u675f\u200b\uff08\u200b\u4e3b\u952e\u200b\u548c\u200b NOT NULL \u200b\u7b49\u200b\uff09\uff0c\n\u200b\u9700\u8981\u200b\u7279\u522b\u200b\u6ce8\u610f\u200b\u3002\n*/\n\n-- \u200b\u5220\u9664\u200b\u89c6\u56fe\u200b\n-- \u200b\u5220\u9664\u200b\u89c6\u56fe\u200b\u7684\u200bDROP VIEW\u200b\u8bed\u53e5\u200b\nDROP VIEW \u200b\u89c6\u56fe\u200b\u540d\u79f0\u200b(&lt;\u200b\u89c6\u56fe\u200b\u5217\u540d\u200b&gt;, &lt;\u200b\u89c6\u56fe\u200b\u5217\u540d\u200b&gt;, ...)\nDROP VIEW ProductSum;\n\n/*\n\u200b\u5728\u200bPostgreSQL\u200b\u4e2d\u200b\uff0c\u200b\u5982\u679c\u200b\u5220\u9664\u200b\u4ee5\u200b\u89c6\u56fe\u200b\u4e3a\u200b\u57fa\u7840\u200b\u521b\u5efa\u200b\u51fa\u6765\u200b\u7684\u200b\u591a\u200b\u91cd\u89c6\u200b\u56fe\u200b\uff0c\u200b\u7531\u4e8e\u200b\u5b58\u5728\u200b\u5173\u8054\u200b\u7684\u200b\n\u200b\u89c6\u56fe\u200b\uff0c\u200b\u56e0\u6b64\u200b\u4f1a\u200b\u53d1\u751f\u200b\u5982\u4e0b\u200b\u9519\u8bef\u200b\u3002\n\u200b\u6267\u884c\u200b\u7ed3\u679c\u200b\uff08\u200b\u4f7f\u7528\u200bPostgreSQL\uff09\nERROR: \u200b\u7531\u4e8e\u200b\u5b58\u5728\u200b\u5173\u8054\u200b\u89c6\u56fe\u200b\uff0c\u200b\u56e0\u6b64\u200b\u65e0\u6cd5\u200b\u5220\u9664\u200b\u89c6\u56fe\u200bproductsum\nDETAIL: \u200b\u89c6\u56fe\u200bproductsumjim\u200b\u4e0e\u200b\u89c6\u56fe\u200bproductsum\u200b\u76f8\u5173\u8054\u200b\nHINT: \u200b\u5220\u9664\u200b\u5173\u8054\u200b\u5bf9\u8c61\u200b\u8bf7\u200b\u4f7f\u7528\u200bDROP\u2026CASCADE\n\u200b\u8fd9\u65f6\u200b\u53ef\u4ee5\u200b\u50cf\u200b\u4e0b\u9762\u200b\u8fd9\u6837\u200b\uff0c\u200b\u4f7f\u7528\u200bCASCADE\u200b\u9009\u9879\u200b\u6765\u200b\u5220\u9664\u200b\u5173\u8054\u200b\u89c6\u56fe\u200b\u3002\nPostgreSQL\nDROP VIEW ProductSum CASCADE;\n*/\n\n-- \u200b\u5b50\u200b\u67e5\u8be2\u200b\n-- \u200b\u89c6\u56fe\u200bProductSum\u200b\u548c\u200b\u786e\u8ba4\u200b\u7528\u200b\u7684\u200bSELECT\u200b\u8bed\u53e5\u200b\n\n-- \u200b\u6839\u636e\u200b\u5546\u54c1\u79cd\u7c7b\u200b\u7edf\u8ba1\u200b\u5546\u54c1\u200b\u6570\u91cf\u200b\u89c6\u56fe\u200b\nCREATE VIEW ProductSum (product_type,cnt_product)\nAS \nSELECT product_type, COUNT(*)\nFROM Product\nGROUP BY product_type;\n\n-- \u200b\u786e\u8ba4\u200b\u521b\u5efa\u200b\u597d\u200b\u7684\u200b\u89c6\u56fe\u200b\nSELECT product_type, cnt_product\nFROM ProductSum;\n\n-- \u200b\u5b50\u200b\u67e5\u8be2\u200b\nSELECT product_type, cnt_product\nFROM (SELECT product_type, COUNT(*) AS cnt_product\n        FROM Product\n        GROUP BY product_type) AS ProductSum;\n\n-- * \u200b\u5b50\u200b\u67e5\u8be2\u200b\u4f5c\u4e3a\u200b\u5185\u5c42\u200b\u67e5\u8be2\u200b\u4f1a\u200b\u9996\u5148\u200b\u6267\u884c\u200b\n\n--\u200b\u589e\u52a0\u200b\u5b50\u200b\u67e5\u8be2\u200b\u7684\u200b\u5c42\u6570\u200b\nSELECT product_type, cnt_product\nFROM (SELECT * \n        FROM (SELECT product_type,COUNT(*) AS cnt_product\n                FROM Product\n                GROUP BY product_type) AS ProductSum)\n        WHERE cnt_product = 4) AS ProductSum2;\n\n-- \u200b\u5b50\u200b\u67e5\u8be2\u200b\u7684\u200b\u540d\u79f0\u200b\n/* \u200b\u4e4b\u524d\u200b\u7684\u200b\u4f8b\u5b50\u200b\u4e2d\u200b\u6211\u4eec\u200b\u7ed9\u5b50\u200b\u67e5\u8be2\u200b\u8bbe\u5b9a\u200b\u4e86\u200b ProductSum \u200b\u7b49\u200b\u540d\u79f0\u200b\u3002\u200b\u539f\u5219\u4e0a\u200b\n\u200b\u5b50\u200b\u67e5\u8be2\u200b\u5fc5\u987b\u200b\u8bbe\u5b9a\u200b\u540d\u79f0\u200b\uff0c\u200b\u56e0\u6b64\u200b\u8bf7\u200b\u5927\u5bb6\u200b\u5c3d\u91cf\u200b\u4ece\u200b\u5904\u7406\u200b\u5185\u5bb9\u200b\u7684\u200b\u89d2\u5ea6\u200b\u51fa\u53d1\u200b\u4e3a\u5b50\u200b\u67e5\u8be2\u200b\u8bbe\u200b\n\u200b\u5b9a\u200b\u6070\u5f53\u200b\u7684\u200b\u540d\u79f0\u200b\u3002\u200b\u5728\u200b\u4e0a\u8ff0\u200b\u4f8b\u5b50\u200b\u4e2d\u200b\uff0c\u200b\u5b50\u200b\u67e5\u8be2\u200b\u7528\u6765\u200b\u5bf9\u200b Product \u200b\u8868\u200b\u7684\u200b\u6570\u636e\u200b\u8fdb\u884c\u200b\u6c47\u200b\n\u200b\u603b\u200b\uff0c\u200b\u56e0\u6b64\u200b\u6211\u4eec\u200b\u4f7f\u7528\u200b\u4e86\u200b\u540e\u7f00\u200b Sum \u200b\u4f5c\u4e3a\u200b\u5176\u200b\u540d\u79f0\u200b\u3002\n\u200b\u4e3a\u5b50\u200b\u67e5\u8be2\u200b\u8bbe\u5b9a\u200b\u540d\u79f0\u200b\u65f6\u200b\u9700\u8981\u200b\u4f7f\u7528\u200b AS \u200b\u5173\u952e\u5b57\u200b\uff0c\u200b\u8be5\u200b\u5173\u952e\u5b57\u200b\u6709\u65f6\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\n\u200b\u7701\u7565\u200b \n\n*\u200b\u5176\u4e2d\u200b\u4e5f\u200b\u6709\u200b\u50cf\u200b Oracle \u200b\u8fd9\u6837\u200b\uff0c\u200b\u5728\u200b\u540d\u79f0\u200b\n\u200b\u4e4b\u524d\u200b\u4f7f\u7528\u200bAS\u200b\u5173\u952e\u5b57\u200b\u5c31\u200b\u4f1a\u200b\u53d1\u751f\u200b\u9519\u200b\n\u200b\u8bef\u200b\u7684\u200b\u6570\u636e\u5e93\u200b\uff0c\u200b\u5927\u5bb6\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u5176\u200b\u89c6\u4e3a\u200b\n\u200b\u4f8b\u5916\u200b\u7684\u200b\u60c5\u51b5\u200b\n*/\n\n--\u200b\u6807\u200b\u91cf\u5b50\u200b\u67e5\u8be2\u200b\n\n/*\u200b\u6807\u91cf\u200b\u5c31\u662f\u200b\u5355\u4e00\u200b\u7684\u200b\u610f\u601d\u200b\uff0c\u200b\u5728\u200b\u6570\u636e\u5e93\u200b\u4e4b\u5916\u200b\u7684\u200b\u9886\u57df\u200b\u4e5f\u200b\u7ecf\u5e38\u200b\u4f7f\u7528\u200b\u3002\n\u200b\u800c\u6807\u200b\u91cf\u5b50\u200b\u67e5\u8be2\u200b\u5219\u200b\u6709\u200b\u4e00\u4e2a\u200b\u7279\u6b8a\u200b\u7684\u200b\u9650\u5236\u200b\uff0c\u200b\u90a3\u200b\u5c31\u662f\u200b\u5fc5\u987b\u200b\u800c\u4e14\u200b\u53ea\u80fd\u200b\u8fd4\u56de\u200b 1 \u200b\u884c\u200b 1\n\u200b\u5217\u200b\u7684\u200b\u7ed3\u679c\u200b\uff0c\u200b\u4e5f\u200b\u5c31\u662f\u200b\u8fd4\u56de\u200b\u8868\u4e2d\u200b\u67d0\u200b\u4e00\u884c\u200b\u7684\u200b\u67d0\u200b\u4e00\u5217\u200b\u7684\u200b\u503c\u200b\uff0c\u200b\u4f8b\u5982\u200b\u201c10\u201d\u200b\u6216\u8005\u200b\u201c\u200b\u4e1c\u4eac\u90fd\u200b\u201d\n\u200b\u8fd9\u6837\u200b\u7684\u200b\u503c\u200b\n*\u200b\u6807\u200b\u91cf\u5b50\u200b\u67e5\u8be2\u200b\u5c31\u662f\u200b\u8fd4\u56de\u200b\u5355\u4e00\u200b\u503c\u200b\u7684\u200b\u5b50\u200b\u67e5\u8be2\u200b\u3002\n*/\n\n-- \u200b\u9009\u53d6\u200b\u51fa\u200b\u9500\u552e\u200b\u5355\u4ef7\u200b\uff08 sale_price\uff09\u200b\u9ad8\u4e8e\u200b\u5168\u90e8\u200b\u5546\u54c1\u200b\u7684\u200b\u5e73\u5747\u200b\u5355\u4ef7\u200b\u7684\u200b\u5546\u54c1\u200b\nSELECT product_id, product_name, sale_price\nFROM Product\nWHERE sale_price &gt; (SELECT AVG(sale_price)\n                        FROM Product);\n\n-- \u200b\u6807\u200b\u91cf\u5b50\u200b\u67e5\u8be2\u200b\u7684\u200b\u4e66\u5199\u200b\u4f4d\u7f6e\u200b\n/* \n\u200b\u6807\u200b\u91cf\u5b50\u200b\u67e5\u8be2\u200b\u7684\u200b\u4e66\u5199\u200b\u4f4d\u7f6e\u200b\u5e76\u200b\u4e0d\u4ec5\u4ec5\u200b\u5c40\u9650\u4e8e\u200b WHERE \u200b\u5b50\u53e5\u200b\u4e2d\u200b\uff0c\u200b\u901a\u5e38\u200b\u4efb\u4f55\u200b\u53ef\u200b\n\u200b\u4ee5\u200b\u4f7f\u7528\u200b\u5355\u4e00\u200b\u503c\u200b\u7684\u200b\u4f4d\u7f6e\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u3002\u200b\u4e5f\u5c31\u662f\u8bf4\u200b\uff0c \u200b\u80fd\u591f\u200b\u4f7f\u7528\u200b\u5e38\u6570\u200b\u6216\u8005\u200b\u5217\u540d\u200b\u7684\u200b\n\u200b\u5730\u65b9\u200b\uff0c\u200b\u65e0\u8bba\u662f\u200b SELECT \u200b\u5b50\u53e5\u200b\u3001 GROUP BY \u200b\u5b50\u53e5\u200b\u3001 HAVING \u200b\u5b50\u53e5\u200b\uff0c\u200b\u8fd8\u662f\u200b\nORDER BY \u200b\u5b50\u53e5\u200b\uff0c\u200b\u51e0\u4e4e\u200b\u6240\u6709\u200b\u7684\u200b\u5730\u65b9\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u3002\n*/\n\n-- \u200b\u5728\u200bSELECT\u200b\u5b50\u53e5\u200b\u4e2d\u200b\u4f7f\u7528\u200b\u6807\u200b\u91cf\u5b50\u200b\u67e5\u8be2\u200b\nSELECT product_id, product_name, sale_price,\n        (SELECT AVG(sale_price)\n            FROM Product) AS avg_price\nFROM Product;\n\n\n-- \u200b\u5728\u200bHAVING \u200b\u5b50\u53e5\u200b\u4e2d\u200b\u4f7f\u7528\u200b\u6807\u200b\u91cf\u5b50\u200b\u67e5\u8be2\u200b\nSELECT product_type, AVG(sale_price)\nFROM Product\nGROUP BY product_type\nHAVING AVG(sale_price) &gt; (SELECT AVG(sale_price)\n                            FROM Product);\n\n-- \u200b\u5173\u8054\u200b\u5b50\u200b\u67e5\u8be2\u200b\n/*\n\u25cf \u200b\u5173\u8054\u200b\u5b50\u200b\u67e5\u8be2\u200b\u4f1a\u200b\u5728\u200b\u7ec6\u5206\u200b\u7684\u200b\u7ec4\u5185\u200b\u8fdb\u884c\u200b\u6bd4\u8f83\u200b\u65f6\u200b\u4f7f\u7528\u200b\u3002\n\u25cf \u200b\u5173\u8054\u200b\u5b50\u200b\u67e5\u8be2\u200b\u548c\u200bGROUP BY\u200b\u5b50\u53e5\u200b\u4e00\u6837\u200b\uff0c\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u5bf9\u8868\u4e2d\u200b\u7684\u200b\u6570\u636e\u200b\u8fdb\u884c\u200b\u5207\u5206\u200b\u3002\n\u25cf \u200b\u5173\u8054\u200b\u5b50\u200b\u67e5\u8be2\u200b\u7684\u200b\u7ed3\u5408\u200b\u6761\u4ef6\u200b\u5982\u679c\u200b\u672a\u200b\u51fa\u73b0\u200b\u5728\u5b50\u200b\u67e5\u8be2\u200b\u4e4b\u4e2d\u200b\u5c31\u200b\u4f1a\u200b\u53d1\u751f\u200b\u9519\u8bef\u200b\u3002\n*/\n\n-- \u200b\u901a\u8fc7\u200b\u5173\u8054\u200b\u5b50\u200b\u67e5\u8be2\u200b\u6309\u7167\u200b\u5546\u54c1\u79cd\u7c7b\u200b\u5bf9\u200b\u5e73\u5747\u200b\u9500\u552e\u200b\u5355\u4ef7\u200b\u8fdb\u884c\u200b\u6bd4\u8f83\u200b\nSELECT product_type, product_name, sale_price\nFROM Product AS P1\nWHERE sale_price &gt; (SELECT AVG(SALE_price)\n                        FROM Product AS P2\n                        WHERE P1.product_type = P2.product_type)\n                        GROUP BY product_type);\n</code></pre>"},{"location":"%E7%BC%96%E7%A8%8B/SQL/SQL%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B/SQL%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B_%E7%AC%AC%E5%9B%9B%E7%AB%A0/","title":"SQL\u200b\u57fa\u7840\u6559\u7a0b\u200b \u200b\u7b2c\u56db\u7ae0","text":"<pre><code>-- *\u200b\u7b2c\u56db\u7ae0\u200b*\n\n--\u200b\u6570\u636e\u200b\u7684\u200b\u63d2\u5165\u200b\n--INSERT \u200b\u8bed\u53e5\u200b\nINSERT INTO &lt;\u200b\u8868\u540d\u200b&gt; (\u200b\u5217\u200b1, \u200b\u5217\u200b2, \u200b\u5217\u200b3, ...) VALUES (\u200b\u503c\u200b1, \u200b\u503c\u200b2, \u200b\u503c\u200b3, ...);\n\n-- \u200b\u5411\u8868\u4e2d\u200b\u63d2\u5165\u200b\u4e00\u884c\u200b\u6570\u636e\u200b\nINSERT INTO ProductIns (product_id, product_name, product_type, sale_price, purchase_price, regist_date) \nVALUES  ('0001', 'T\u200b\u6064\u886b\u200b', '\u200b\u8863\u670d\u200b', 1000, 500, '2009-09-20');\n\n/* \u200b\u591a\u884c\u200bINSERT\n\u200b\u8be5\u200b\u8bed\u6cd5\u200b\u5f88\u200b\u5bb9\u6613\u200b\u7406\u89e3\u200b\uff0c\u200b\u5e76\u4e14\u200b\u51cf\u5c11\u200b\u4e86\u200b\u4e66\u5199\u200b\u8bed\u53e5\u200b\u6570\u91cf\u200b\uff0c\u200b\u975e\u5e38\u200b\u65b9\u4fbf\u200b\u3002\n\u200b\u786e\u8ba4\u200b\u63d2\u5165\u200b\u7684\u200b\u6570\u636e\u200b\u662f\u5426\u200b\u6b63\u786e\u200b\uff0c\u200b\u7531\u4e8e\u200b\u591a\u884c\u200b\u63d2\u5165\u200b\uff0c\u200b\u60f3\u8981\u200b\u627e\u51fa\u200b\u51fa\u9519\u200b\u7684\u200b\u67d0\u884c\u200b\u975e\u5e38\u200b\u56f0\u96be\u200b\u3002\n\u200b\u8be5\u200b\u8bed\u6cd5\u200b\u9002\u7528\u200b\u4e8e\u200bDB2\u3001SQL\u3001 SQL Server\u3001 PostgreSQL\u200b\u548c\u200bMySQL\uff0c\u200b\u4f46\u200b\u4e0e\u200b\u9002\u7528\u200b\u4e8e\u200bOracle\u3002\n*/\nINSERT INTO ProductIns VALUES ('0002','\u200b\u6253\u5b54\u5668\u200b','\u200b\u529e\u516c\u7528\u54c1\u200b', 500, 320, '2009-09-11'),('0003','\u200b\u8fd0\u52a8\u200bT\u200b\u6064\u200b','\u200b\u8863\u670d\u200b',4000,2800,NULL),('0004','\u200b\u83dc\u5200\u200b','\u200b\u53a8\u623f\u7528\u5177\u200b',3000,280,'2009-09-20');\n\n-- Oracle\u200b\u4e2d\u200b\u7684\u200b\u591a\u884c\u200bINSERT\nINSERT ALL INTO ProductIns VALUES ('0002','\u200b\u6253\u5b54\u5668\u200b','\u200b\u529e\u516c\u7528\u54c1\u200b',500,320,'2009-09-11')\n            INTO ProductIns VALUES ('0003','\u200b\u8fd0\u52a8\u200bT\u200b\u6064\u200b','\u200b\u8863\u670d\u200b',4000,2800, NULL)\n            INTO ProductIns VALUES ('0004','\u200b\u83dc\u5200\u200b','\u200b\u53a8\u623f\u7528\u5177\u200b',3000,2800,'2009-09-20');\n\n-- \u200b\u5217\u200b\u6e05\u5355\u200b\u7684\u200b\u7701\u7565\u200b \u200b\u5bf9\u6807\u200b\u8fdb\u884c\u200b\u5168\u5217\u200bINSERT\u200b\u65f6\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u7701\u7565\u200b\u8868\u660e\u200b\u540e\u200b\u7684\u200b\u5217\u200b\u6e05\u5355\u200b\n-- \u200b\u5305\u542b\u200b\u5217\u200b\u6e05\u5355\u200b\nINSERT INTO ProductIns (product_id,product_name,product_type,sale_price,purchase_price,regist_date)\nVALUES ('0005','\u200b\u9ad8\u538b\u9505\u200b','\u200b\u53a8\u623f\u7528\u54c1\u200b',6800,5000,'2009-01-15');\n-- \u200b\u7701\u7565\u200b\u5217\u200b\u6e05\u5355\u200b\nINSERT INTO ProductIns VALUES ('0005','\u200b\u9ad8\u538b\u9505\u200b','\u200b\u53a8\u623f\u7528\u54c1\u200b',6800,5000,'2009-01-15');\n\n-- \u200b\u63d2\u5165\u200bNULL\nINSERT INTO ProductIns (product_id, product_name, product_type, \ue805\nsale_price, purchase_price, regist_date) VALUES ('0006', '\u200b\u53c9\u5b50\u200b', \ue805\n'\u200b\u53a8\u623f\u7528\u5177\u200b', 500, NULL, '2009-09-20');\n\n-- \u200b\u63d2\u5165\u200b\u9ed8\u8ba4\u503c\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u5728\u200b\u521b\u5efa\u200b\u8868\u200b\u7684\u200bCREATE TABLE \u200b\u8bed\u53e5\u200b\u4e2d\u200b\u8bbe\u7f6e\u200b DEFAULT \u200b\u7ea6\u675f\u200b\u6765\u200b\u8bbe\u5b9a\u200b\u9ed8\u8ba4\u503c\u200b\uff0c\u200b\u9ed8\u8ba4\u503c\u200b\u7684\u200b\u4f7f\u7528\u200b\u65b9\u6cd5\u200b\u901a\u5e38\u200b\u6709\u200b\u663e\u5f0f\u200b\u548c\u200b\u9690\u5f0f\u200b\u4e24\u79cd\u200b\u3002\n-- \u200b\u901a\u8fc7\u200b\u663e\u5f0f\u200b\u65b9\u6cd5\u200b\u8bbe\u5b9a\u200b\u9ed8\u8ba4\u503c\u200b\ninsert into ProductIns (product_id,product_name,product_type,sale_price,purchase_price,regist_date) \nvalues ('0007','\u200b\u64e6\u200b\u83dc\u677f\u200b','\u200b\u53a8\u623f\u7528\u5177\u200b',DEFAULT, 790, '2009-04-28');\n-- \u200b\u901a\u8fc7\u200b\u9690\u5f0f\u200b\u65b9\u6cd5\u200b\u63d2\u5165\u200b\u9ed8\u8ba4\u503c\u200b,\u200b\u5373\u200b\u7701\u7565\u200bsale_price\u200b\u5217\u200b\u548c\u200b\u7701\u7565\u200b\u63d2\u5165\u200b\u503c\u200bDEFAULT\nINSERT INTO ProductIns (product_id,product_name,product_type,purchase_price,regist_date) \nvalues ('0007','\u200b\u64e6\u200b\u83dc\u677f\u200b','\u200b\u53a8\u623f\u7528\u5177\u200b', 790, '2009-04-28');\n\n-- \u200b\u4ece\u200b\u5176\u4ed6\u200b\u8868\u4e2d\u200b\u590d\u5236\u200b\u6570\u636e\u200b\n-- \u200b\u521b\u5efa\u200bProductCopy\u200b\u8868\u200b\u7684\u200bCREATE TABLE\u200b\u8bed\u53e5\u200b\n-- INSERT ... SELECT\u200b\u8bed\u53e5\u200b\n-- \u200b\u5c06\u200b\u5546\u54c1\u200b\u8868\u4e2d\u200b\u7684\u200b\u6570\u636e\u200b\u590d\u5236\u5230\u200b\u5546\u54c1\u200b\u590d\u5236\u200b\u8868\u4e2d\u200b\n INSERT INTO ProductCopy (product_id,product_name,product_type,sale_price,purchase_price,regist_date) \n SELECT product_id,product_name,product_type,sale_price,purchase_price,regist_date FROM Proudct;\n /*\n \u200b\u8be5\u200b INSERT \u200b\u8bed\u53e5\u200b\u4e2d\u200b\u7684\u200b SELECT \u200b\u8bed\u53e5\u200b\uff0c\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b WHERE \u200b\u5b50\u53e5\u200b\u6216\u8005\u200b\nGROUP BY \u200b\u5b50\u53e5\u200b\u7b49\u200b\u3002\u200b\u76ee\u524d\u4e3a\u6b62\u200b\u5b66\u5230\u200b\u7684\u200b\u5404\u79cd\u200b SELECT \u200b\u8bed\u53e5\u200b\u4e5f\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u3002\n\u200b\u5bf9\u200b\u5728\u200b\u5173\u8054\u200b\u8868\u200b\u4e4b\u95f4\u200b\u5b58\u53d6\u6570\u636e\u200b\u6765\u8bf4\u200b\uff0c\u200b\u8fd9\u662f\u200b\u975e\u5e38\u200b\u65b9\u4fbf\u200b\u7684\u200b\u529f\u80fd\u200b\u3002\n*/\nINSERT INTO ProductType (product_type, sum_sale_price, sum_purchase_price)\nSELECT product_type, SUM(sale_price), SUM(purchase_price) FROM Product GROUP BY Product_type;\n\n-- \u200b\u6570\u636e\u200b\u7684\u200b\u5220\u9664\u200b\n-- DELETE\u200b\u8bed\u53e5\u200b\u7684\u200b\u57fa\u672c\u200b\u8bed\u6cd5\u200b\ndelete from &lt;\u200b\u8868\u540d\u200b&gt;;\n\n-- \u200b\u6e05\u7a7a\u200bProduct\u200b\u8868\u200b\ndelete from Product;\n\n-- \u200b\u5220\u9664\u200b\u90e8\u5206\u200b\u6570\u636e\u200b\u884c\u200b\u7684\u200b\u641c\u7d22\u200b\u6027\u200bDELETE\nDELETE FROM &lt;\u200b\u8868\u540d\u200b&gt; WHERE &lt;\u200b\u6761\u4ef6\u200b&gt;;\ndelete from Product where sale_price &gt;= 4000;\n\n-- \u200b\u53ea\u80fd\u200b\u5220\u9664\u200b\u8868\u4e2d\u200b\u5168\u90e8\u200b\u6570\u636e\u200b\u7684\u200bTRUNCATE\u200b\u8bed\u53e5\u200b\nTRUNCATE &lt;\u200b\u8868\u540d\u200b&gt;;\n\n-- \u200b\u6570\u636e\u200b\u7684\u200b\u66f4\u65b0\u200b\nUPDATE &lt;\u200b\u8868\u540d\u200b&gt; SET &lt;\u200b\u5217\u540d\u200b&gt; = &lt;\u200b\u8868\u8fbe\u5f0f\u200b&gt;;\n\n-- \u200b\u5c06\u200b\u767b\u8bb0\u200b\u65e5\u671f\u200b\u5168\u90e8\u200b\u66f4\u65b0\u200b\u4e3a\u200b\"2009-10-10\"\nUPDATE Product SET regist_date = '2009-20-20';\n\n-- \u200b\u6307\u5b9a\u200b\u6761\u4ef6\u200b\u7684\u200bUPDATE\u200b\u8bed\u53e5\u200b(\u200b\u641c\u7d22\u200b\u6027\u200bUPDATE)\n-- \u200b\u66f4\u65b0\u200b\u90e8\u5206\u200b\u6570\u636e\u200b\u884c\u200b\u7684\u200b\u641c\u7d22\u200b\u578b\u200bUPDATE\nUPDATE &lt;\u200b\u8868\u540d\u200b&gt; SET &lt;\u200b\u5217\u540d\u200b&gt; = &lt;\u200b\u8868\u8fbe\u5f0f\u200b&gt; WHERE &lt;\u200b\u6761\u4ef6\u200b&gt;;\n\n-- \u200b\u5c06\u200b\u5546\u54c1\u79cd\u7c7b\u200b\u4e3a\u200b\u53a8\u623f\u7528\u5177\u200b\u7684\u200b\u8bb0\u5f55\u200b\u7684\u200b\u9500\u552e\u200b\u5355\u4ef7\u200b\u66f4\u65b0\u200b\u4e3a\u200b\u539f\u6765\u200b\u7684\u200b10\u200b\u500d\u200b\nUPDATE Product SET sale_price = sale_price * 10 WHERE product_type = '\u200b\u53a8\u623f\u200b';\n\n-- \u200b\u4f7f\u7528\u200bNULL\u200b\u8fdb\u884c\u200b\u66f4\u65b0\u200b\nUPDATE Product SET regist_date = NULL WHERE product_id = '0008';\n\n-- \u200b\u591a\u5217\u200b\u7684\u200b\u66f4\u65b0\u200b\nUPDATE Product SET sale_price = sale_price * 10, purchase_price = purchase_price / 2 WHERE product_type = '\u200b\u53a8\u623f\u7528\u5177\u200b';\n-- \u200b\u5c06\u200b\u4e0a\u8ff0\u200b\u8bed\u53e5\u200b\u7684\u200b\u5904\u7406\u200b\u5408\u5e76\u200b\u4e3a\u200b\u4e00\u6761\u200bUPDATE\u200b\u8bed\u53e5\u200b, \u200b\u5c06\u200b\u7528\u200b()\u200b\u62ec\u200b\u8d77\u6765\u200b\u7684\u200b\u5f62\u5f0f\u200b\nUPDATE Product SET (sale_price, purchase_price) = (sale_price * 10, purchase_price / 2) WHERE product_type = '\u200b\u53a8\u623f\u7528\u5177\u200b';\n\n-- \u200b\u4e8b\u52a1\u200b\n/*\u200b\u5728\u200b\u6807\u51c6\u200b SQL \u200b\u4e2d\u200b\n\u200b\u5e76\u200b\u6ca1\u6709\u200b\u5b9a\u4e49\u200b\u4e8b\u52a1\u200b\u7684\u200b\u5f00\u59cb\u200b\u8bed\u53e5\u200b\uff0c\u200b\u800c\u662f\u200b\u7531\u200b\u5404\u4e2a\u200b DBMS \u200b\u81ea\u5df1\u200b\u6765\u200b\u5b9a\u4e49\u200b\u7684\u200b\u3002\n\u25cf SQL\u2003Server\u3001PostgreSQL\nBEGIN TRANSACTION\n\u25cf MySQL\nSTART TRANSACTION\n\u25cf Oracle\u3001DB2\n\u200b\u65e0\u200b\n\n\u25a0 COMMIT\u2014\u2014\u200b\u63d0\u4ea4\u200b\u5904\u7406\u200b\nCOMMIT \u200b\u662f\u200b\u63d0\u4ea4\u200b\u4e8b\u52a1\u200b\u5305\u542b\u200b\u7684\u200b\u5168\u90e8\u200b\u66f4\u65b0\u200b\u5904\u7406\u200b\u7684\u200b\u7ed3\u675f\u200b\u6307\u4ee4\u200b\uff08\u200b\u56fe\u200b 4-3\uff09\uff0c\u200b\u76f8\u5f53\u200b\n\u200b\u4e8e\u200b\u6587\u4ef6\u200b\u5904\u7406\u200b\u4e2d\u200b\u7684\u200b\u8986\u76d6\u200b\u4fdd\u5b58\u200b\u3002\u200b\u4e00\u65e6\u200b\u63d0\u4ea4\u200b\uff0c\u200b\u5c31\u200b\u65e0\u6cd5\u200b\u6062\u590d\u200b\u5230\u200b\u4e8b\u52a1\u200b\u5f00\u59cb\u200b\u524d\u200b\u7684\u200b\u72b6\u6001\u200b\u4e86\u200b\u3002\n\u200b\u56e0\u6b64\u200b\uff0c\u200b\u5728\u200b\u63d0\u4ea4\u200b\u4e4b\u524d\u200b\u4e00\u5b9a\u200b\u8981\u200b\u786e\u8ba4\u200b\u662f\u5426\u200b\u771f\u7684\u200b\u9700\u8981\u200b\u8fdb\u884c\u200b\u8fd9\u4e9b\u200b\u66f4\u65b0\u200b\u3002\n\n\u200b\u4e07\u4e00\u200b\u7531\u4e8e\u200b\u8bef\u64cd\u4f5c\u200b\u63d0\u4ea4\u200b\u4e86\u200b\u5305\u542b\u200b\u9519\u8bef\u200b\u66f4\u65b0\u200b\u7684\u200b\u4e8b\u52a1\u200b\uff0c\u200b\u5c31\u200b\u53ea\u80fd\u200b\u56de\u5230\u200b\u91cd\u65b0\u200b\u5efa\u8868\u200b\u3001\n\u200b\u91cd\u65b0\u200b\u63d2\u5165\u200b\u6570\u636e\u200b\u8fd9\u6837\u200b\u7e41\u7410\u200b\u7684\u200b\u8001\u200b\u8def\u4e0a\u200b\u4e86\u200b\u3002\u200b\u7531\u4e8e\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u9020\u6210\u200b\u6570\u636e\u200b\u65e0\u6cd5\u200b\u6062\u590d\u200b\u7684\u200b\u540e\u200b\n\u200b\u679c\u200b\uff0c\u200b\u8bf7\u200b\u5927\u5bb6\u200b\u4e00\u5b9a\u200b\u8981\u200b\u6ce8\u610f\u200b\uff08\u200b\u7279\u522b\u200b\u662f\u200b\u5728\u200b\u6267\u884c\u200b DELETE \u200b\u8bed\u53e5\u200b\u7684\u200b COMMIT \u200b\u65f6\u200b\u5c24\u5176\u200b\n\u200b\u8981\u200b\u5c0f\u5fc3\u200b\uff09\n\n*\u200b\u867d\u7136\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u4e0d\u200b\u6e05\u695a\u200b\u4e8b\u52a1\u200b\u5f00\u59cb\u200b\u7684\u200b\u65f6\u95f4\u200b\u70b9\u200b\uff0c\u200b\u4f46\u662f\u200b\u5728\u200b\u4e8b\u52a1\u200b\u7ed3\u675f\u200b\u65f6\u200b\u4e00\u5b9a\u200b\u8981\u200b\u4ed4\u7ec6\u200b\u8fdb\u884c\u200b\u786e\u8ba4\u200b\u3002\n\n\u25a0 ROLLBACK\u2014\u2014\u200b\u53d6\u6d88\u200b\u5904\u7406\u200b\nROLLBACK \u200b\u662f\u200b\u53d6\u6d88\u200b\u4e8b\u52a1\u200b\u5305\u542b\u200b\u7684\u200b\u5168\u90e8\u200b\u66f4\u65b0\u200b\u5904\u7406\u200b\u7684\u200b\u7ed3\u675f\u200b\u6307\u4ee4\u200b\uff08\u200b\u56fe\u200b 4-4\uff09\uff0c\n\u200b\u76f8\u5f53\u4e8e\u200b\u6587\u4ef6\u200b\u5904\u7406\u200b\u4e2d\u200b\u7684\u200b\u653e\u5f03\u200b\u4fdd\u5b58\u200b\u3002\u200b\u4e00\u65e6\u200b\u56de\u6eda\u200b\uff0c\u200b\u6570\u636e\u5e93\u200b\u5c31\u200b\u4f1a\u200b\u6062\u590d\u200b\u5230\u200b\u4e8b\u52a1\u200b\u5f00\u59cb\u200b\u4e4b\u200b\n\u200b\u524d\u200b\u7684\u200b\u72b6\u6001\u200b\uff08\u200b\u4ee3\u7801\u200b\u6e05\u5355\u200b 4-22\uff09\u3002\u200b\u901a\u5e38\u200b\u56de\u6eda\u200b\u5e76\u200b\u4e0d\u4f1a\u200b\u50cf\u200b\u63d0\u4ea4\u200b\u90a3\u6837\u200b\u9020\u6210\u200b\u5927\u89c4\u6a21\u200b\u7684\u200b\u6570\u200b\n\u200b\u636e\u200b\u635f\u5931\u200b\n\n\u200b\u4e8b\u52a1\u5904\u7406\u200b\u4f55\u65f6\u200b\u5f00\u59cb\u200b\n\u200b\u4e4b\u524d\u200b\u6211\u4eec\u200b\u8bf4\u200b\u8fc7\u200b\uff0c\u200b\u4e8b\u52a1\u200b\u5e76\u200b\u6ca1\u6709\u200b\u6807\u51c6\u200b\u7684\u200b\u5f00\u59cb\u200b\u6307\u4ee4\u200b\u5b58\u5728\u200b\uff0c\u200b\u800c\u662f\u200b\u6839\u636e\u200b DBMS \u200b\u7684\u200b\u4e0d\u540c\u200b\u800c\u200b\n\u200b\u4e0d\u540c\u200b\u3002\n\u200b\u5b9e\u9645\u4e0a\u200b\uff0c\u200b\u51e0\u4e4e\u200b\u6240\u6709\u200b\u7684\u200b\u6570\u636e\u5e93\u200b\u4ea7\u54c1\u200b\u7684\u200b\u4e8b\u52a1\u200b\u90fd\u200b\u65e0\u9700\u200b\u5f00\u59cb\u200b\u6307\u4ee4\u200b\u3002\u200b\u8fd9\u200b\u662f\u56e0\u4e3a\u200b\u5927\u90e8\u5206\u200b\u60c5\u51b5\u200b\n\u200b\u4e0b\u200b\uff0c\u200b\u4e8b\u52a1\u200b\u5728\u200b\u6570\u636e\u5e93\u200b\u8fde\u63a5\u200b\u5efa\u7acb\u200b\u65f6\u200b\u5c31\u200b\u5df2\u7ecf\u200b\u6084\u6084\u200b\u5f00\u59cb\u200b\u4e86\u200b\uff0c\u200b\u5e76\u4e0d\u9700\u8981\u200b\u7528\u6237\u200b\u518d\u200b\u660e\u786e\u200b\u53d1\u51fa\u200b\u5f00\u59cb\u200b\u6307\u200b\n\u200b\u4ee4\u200b\u3002\u200b\u4f8b\u5982\u200b\uff0c\u200b\u4f7f\u7528\u200b Oracle \u200b\u65f6\u200b\uff0c\u200b\u6570\u636e\u5e93\u200b\u8fde\u63a5\u200b\u5efa\u7acb\u200b\u4e4b\u540e\u200b\uff0c\u200b\u7b2c\u4e00\u6761\u200b SQL \u200b\u8bed\u53e5\u200b\u6267\u884c\u200b\u7684\u200b\u540c\u65f6\u200b\uff0c\n\u200b\u4e8b\u52a1\u200b\u5c31\u200b\u5df2\u7ecf\u200b\u6084\u6084\u200b\u5f00\u59cb\u200b\u4e86\u200b\u3002\n\u200b\u50cf\u200b\u8fd9\u6837\u200b\u4e0d\u200b\u4f7f\u7528\u200b\u6307\u4ee4\u200b\u800c\u200b\u6084\u6084\u200b\u5f00\u59cb\u200b\u4e8b\u52a1\u200b\u7684\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c\u200b\u5e94\u8be5\u200b\u5982\u4f55\u200b\u533a\u5206\u200b\u5404\u4e2a\u200b\u4e8b\u52a1\u200b\u5462\u200b\uff1f\u200b\u901a\u5e38\u200b\n\u200b\u4f1a\u200b\u6709\u200b\u5982\u4e0b\u200b\u4e24\u79cd\u200b\u60c5\u51b5\u200b\u3002\nA \u200b\u6bcf\u6761\u200bSQL\u200b\u8bed\u53e5\u200b\u5c31\u662f\u200b\u4e00\u4e2a\u200b\u4e8b\u52a1\u200b\uff08 \u200b\u81ea\u52a8\u200b\u63d0\u4ea4\u200b\u6a21\u5f0f\u200b\uff09\nB \u200b\u76f4\u5230\u200b\u7528\u6237\u200b\u6267\u884c\u200bCOMMIT\u200b\u6216\u8005\u200bROLLBACK\u200b\u4e3a\u6b62\u200b\u7b97\u4f5c\u200b\u4e00\u4e2a\u200b\u4e8b\u52a1\u200b\n\u200b\u901a\u5e38\u200b\u7684\u200b DBMS \u200b\u90fd\u200b\u53ef\u4ee5\u200b\u9009\u62e9\u200b\u5176\u4e2d\u200b\u4efb\u610f\u200b\u4e00\u79cd\u200b\u6a21\u5f0f\u200b\u3002\u200b\u9ed8\u8ba4\u200b\u4f7f\u7528\u200b\u81ea\u52a8\u200b\u63d0\u4ea4\u200b\u6a21\u5f0f\u200b\u7684\u200b\nDBMS \u200b\u6709\u200b SQL Server\u3001 PostgreSQL \u200b\u548c\u200b MySQL \u200b\u7b49\u200b A\u3002\u200b\u8be5\u200b\u6a21\u5f0f\u200b\u4e0b\u200b\u7684\u200b DML \u200b\u8bed\u53e5\u200b\u5982\u4e0b\u200b\n\u200b\u6240\u793a\u200b\uff0c\u200b\u6bcf\u200b\u4e00\u6761\u200b\u8bed\u53e5\u200b\u90fd\u62ec\u200b\u5728\u200b\u4e8b\u52a1\u200b\u7684\u200b\u5f00\u59cb\u200b\u8bed\u53e5\u200b\u548c\u200b\u7ed3\u675f\u200b\u8bed\u53e5\u200b\u4e4b\u4e2d\u200b\u3002\n\n\u200b\u901a\u5e38\u200b\u7684\u200b DBMS \u200b\u90fd\u200b\u53ef\u4ee5\u200b\u9009\u62e9\u200b\u5176\u4e2d\u200b\u4efb\u610f\u200b\u4e00\u79cd\u200b\u6a21\u5f0f\u200b\u3002\u200b\u9ed8\u8ba4\u200b\u4f7f\u7528\u200b\u81ea\u52a8\u200b\u63d0\u4ea4\u200b\u6a21\u5f0f\u200b\u7684\u200b\nDBMS \u200b\u6709\u200b SQL Server\u3001 PostgreSQL \u200b\u548c\u200b MySQL \u200b\u7b49\u200b A\u3002\u200b\u8be5\u200b\u6a21\u5f0f\u200b\u4e0b\u200b\u7684\u200b DML \u200b\u8bed\u53e5\u200b\u5982\u4e0b\u200b\n\u200b\u6240\u793a\u200b\uff0c\u200b\u6bcf\u200b\u4e00\u6761\u200b\u8bed\u53e5\u200b\u90fd\u62ec\u200b\u5728\u200b\u4e8b\u52a1\u200b\u7684\u200b\u5f00\u59cb\u200b\u8bed\u53e5\u200b\u548c\u200b\u7ed3\u675f\u200b\u8bed\u53e5\u200b\u4e4b\u4e2d\u200b\u3002\n\n\u200b\u5728\u200b\u9ed8\u8ba4\u200b\u4f7f\u7528\u200b B \u200b\u6a21\u5f0f\u200b\u7684\u200b Oracle \u200b\u4e2d\u200b\uff0c\u200b\u4e8b\u52a1\u200b\u90fd\u200b\u662f\u200b\u76f4\u5230\u200b\u7528\u6237\u200b\u81ea\u5df1\u200b\u6267\u884c\u200b\u63d0\u4ea4\u200b\u6216\u8005\u200b\u56de\u6eda\u200b\u6307\u200b\n\u200b\u4ee4\u624d\u200b\u4f1a\u200b\u7ed3\u675f\u200b\u3002\n\u200b\u81ea\u52a8\u200b\u63d0\u4ea4\u200b\u7684\u200b\u60c5\u51b5\u200b\u9700\u8981\u200b\u7279\u522b\u200b\u6ce8\u610f\u200b\u7684\u200b\u662f\u200b DELETE \u200b\u8bed\u53e5\u200b\u3002\u200b\u5982\u679c\u200b\u4e0d\u662f\u200b\u81ea\u52a8\u200b\u63d0\u4ea4\u200b\uff0c\u200b\u5373\u4f7f\u200b\n\u200b\u4f7f\u7528\u200b DELETE \u200b\u8bed\u53e5\u200b\u5220\u9664\u200b\u4e86\u200b\u6570\u636e\u8868\u200b\uff0c\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b ROLLBACK \u200b\u547d\u4ee4\u200b\u53d6\u6d88\u200b\u8be5\u200b\u4e8b\u52a1\u200b\u7684\u200b\u5904\u200b\n\u200b\u7406\u200b\uff0c\u200b\u6062\u590d\u200b\u8868\u4e2d\u200b\u7684\u200b\u6570\u636e\u200b\u3002\u200b\u4f46\u200b\u8fd9\u200b\u4ec5\u9650\u4e8e\u200b\u660e\u793a\u200b\u5f00\u59cb\u200b\u4e8b\u52a1\u200b\uff0c\u200b\u6216\u8005\u200b\u5173\u95ed\u200b\u81ea\u52a8\u200b\u63d0\u4ea4\u200b\u7684\u200b\u60c5\u51b5\u200b\u3002\u200b\u5982\u679c\u200b\n\u200b\u4e0d\u200b\u5c0f\u5fc3\u200b\u5728\u200b\u81ea\u52a8\u200b\u63d0\u4ea4\u200b\u6a21\u5f0f\u200b\u4e0b\u200b\u6267\u884c\u200b\u4e86\u200b DELETE \u200b\u64cd\u4f5c\u200b\uff0c\u200b\u5373\u4f7f\u200b\u518d\u200b\u56de\u6eda\u200b\u4e5f\u200b\u65e0\u6d4e\u4e8e\u4e8b\u200b\u4e86\u200b\u3002\u200b\u8fd9\u662f\u200b\n\u200b\u4e00\u4e2a\u200b\u5f88\u200b\u4e25\u91cd\u200b\u7684\u200b\u95ee\u9898\u200b\uff0c\u200b\u521d\u5b66\u8005\u200b\u96be\u514d\u4f1a\u200b\u78b0\u5230\u200b\u8fd9\u6837\u200b\u7684\u200b\u9ebb\u70e6\u200b\u3002\u200b\u4e00\u65e6\u200b\u8bef\u5220\u200b\u4e86\u200b\u6570\u636e\u200b\uff0c\u200b\u5982\u679c\u200b\u65e0\u6cd5\u200b\u91cd\u200b\n\u200b\u65b0\u200b\u63d2\u5165\u200b\uff0c\u200b\u662f\u4e0d\u662f\u200b\u60f3\u200b\u54ed\u200b\u7684\u200b\u5fc3\u200b\u90fd\u200b\u6709\u200b\u4e86\u200b\uff1f\u200b\u6240\u4ee5\u200b\u4e00\u5b9a\u200b\u8981\u200b\u7279\u522b\u200b\u5c0f\u5fc3\u200b\u3002\n\n*\u200b\u6ce8\u610f\u200b \u200b\u4f8b\u5982\u200b\uff0cPostgreSQL \u200b\u7684\u200b\u7528\u6237\u624b\u518c\u200b\u4e2d\u200b\n\u200b\u6709\u200b\u5982\u4e0b\u200b\u8bb0\u8ff0\u200b \uff1a\u201cPostgreSQL \u200b\u4e2d\u200b\u6240\u6709\u200b\n\u200b\u7684\u200b SQL \u200b\u6307\u4ee4\u200b\u8bed\u53e5\u200b\u90fd\u200b\u5728\u200b\u4e8b\u52a1\u200b\u5185\u200b\u6267\u884c\u200b\u3002\n\u200b\u5373\u4f7f\u200b\u4e0d\u200b\u6267\u884c\u200bBEGIN\uff0c\u200b\u8fd9\u4e9b\u200b\u547d\u4ee4\u200b\u8bed\u200b\n\u200b\u53e5\u200b \u200b\u4e5f\u200b \u200b\u4f1a\u200b \u200b\u5728\u200b \u200b\u6267\u200b \u200b\u884c\u200b \u200b\u65f6\u200b \u200b\u6084\u200b \u200b\u6084\u200b \u200b\u88ab\u200b \u200b\u62ec\u200b \u200b\u5728\u200b\nBEGIN\u200b\u548c\u200bCOMMIT\uff08\u200b\u5982\u679c\u200b\u6210\u529f\u200b\n\u200b\u7684\u8bdd\u200b\uff09\u200b\u4e4b\u95f4\u200b\u3002\u201d\uff08\u300aPostgreSQL 9.5.2\n\u200b\u6587\u6863\u200b\u300b\u201c3-4 \u200b\u8282\u200b \u200b\u4e8b\u52a1\u200b\u201d\uff09\n\n/*\n</code></pre>"}]}